{"version":3,"file":"khmer-chess-board.bundle.js","mappings":"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","sources":["webpack:///webpack/universalModuleDefinition","webpack:///../public/assets/Capture.mp3","webpack:///../public/assets/Check.mp3","webpack:///../public/assets/Move.mp3","webpack:///../node_modules/k4us-share/font/svg-optimized/$B_KhmerChess.svg","webpack:///../node_modules/k4us-share/font/svg-optimized/$F_KhmerChess.svg","webpack:///../node_modules/k4us-share/font/svg-optimized/$G_KhmerChess.svg","webpack:///../node_modules/k4us-share/font/svg-optimized/$H_KhmerChess.svg","webpack:///../node_modules/k4us-share/font/svg-optimized/$K_KhmerChess.svg","webpack:///../node_modules/k4us-share/font/svg-optimized/$Q_KhmerChess.svg","webpack:///../node_modules/k4us-share/font/svg-optimized/$T_KhmerChess.svg","webpack:///../node_modules/svgson/dist/svgson.umd.js","webpack:///../node_modules/k4us-share/types/index.ts","webpack:///../node_modules/k4us-share/types/khmerChessPieces.ts","webpack:///./BoardManager.ts","webpack:///./CellManager.ts","webpack:///./GraveyardManager.ts","webpack:///./Index.ts","webpack:///./KhmerChessBoard.ts","webpack:///./KhmerChessProps.ts","webpack:///./MessageManager.ts","webpack:///./MoveData.ts","webpack:///./OptionsManager.ts","webpack:///./PieceShadowManager.ts","webpack:///./PlayManager.ts","webpack:///./SoundManager.ts","webpack:///./event/BoardManagerEventController.ts","webpack:///./event/BoardStatusEvent.ts","webpack:///./event/BoardStatusEventController.ts","webpack:///./event/PlayManagerEventController.ts","webpack:///./helpers/addCss.ts","webpack:///./helpers/addCssNote.ts","webpack:///./helpers/appendCss.ts","webpack:///./helpers/drawBoardAndGraveyard.ts","webpack:///./helpers/uniqueIdHelper.ts","webpack:///./providers/audio.ts","webpack:///./providers/constance.ts","webpack:///./providers/svg.ts","webpack:///../../khmer-chess.js/src/KhmerChess.ts","webpack:///../../khmer-chess.js/src/brain/HVPont.ts","webpack:///../../khmer-chess.js/src/brain/MoveHelper.ts","webpack:///../../khmer-chess.js/src/brain/Rectangle.ts","webpack:///../../khmer-chess.js/src/brain/boardHelper.ts","webpack:///../../khmer-chess.js/src/brain/constant.ts","webpack:///../../khmer-chess.js/src/brain/genMask.ts","webpack:///../../khmer-chess.js/src/brain/index.ts","webpack:///../../khmer-chess.js/src/brain/jsis.ts","webpack:///../../khmer-chess.js/src/index.ts","webpack:///../../khmer-chess.js/src/kpgn/Captured.ts","webpack:///../../khmer-chess.js/src/kpgn/KPGN.ts","webpack:///../../khmer-chess.js/src/kpgn/Move.ts","webpack:///../../khmer-chess.js/src/kpgn/Player.ts","webpack:///../../khmer-chess.js/src/kpgn/Result.ts","webpack:///../../khmer-chess.js/src/kpgn/Timer.ts","webpack:///../../khmer-chess.js/src/kpgn/index.ts","webpack:///../../khmer-chess.js/src/other/EventHandler.ts","webpack:///../../khmer-chess.js/src/other/base64Helper.ts","webpack:///../../khmer-chess.js/src/other/index.ts","webpack:///../../khmer-chess.js/src/other/table.ts","webpack:///../../khmer-chess.js/src/ren/Board.ts","webpack:///../../khmer-chess.js/src/ren/CountUp.ts","webpack:///../../khmer-chess.js/src/ren/Graveyard.ts","webpack:///../../khmer-chess.js/src/ren/KAttacked.ts","webpack:///../../khmer-chess.js/src/ren/KqJumped.ts","webpack:///../../khmer-chess.js/src/ren/Piece.ts","webpack:///../../khmer-chess.js/src/ren/PieceIndex.ts","webpack:///../../khmer-chess.js/src/ren/Point.ts","webpack:///../../khmer-chess.js/src/ren/REN.ts","webpack:///../../khmer-chess.js/src/ren/constant.ts","webpack:///../../khmer-chess.js/src/ren/index.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/publicPath","webpack:///webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","export default __webpack_public_path__ + \"3871c59aa0d9809025bd8963b779eb48.mp3\";","export default __webpack_public_path__ + \"f39d9eb214416a5a32a0e060e2e4219d.mp3\";","export default __webpack_public_path__ + \"6843b5956a4523cf4ef83c84e0120752.mp3\";","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M508.259 454.128h0.302734c0.723633 0.328125 57.5889 26.0469 95.0117 39.4414c15.5312 5.55664 60.1143 14.5146 100.886 37.5742c40.7734 23.0596 80.3154 64.8369 83.1123 130.47c2.31543 54.373 -10.3096 109.333 -25.2803 154.087 c6.84863 10.3203 11.2207 22.1895 11.2207 35.21c0 21.4883 -11.8955 39.8535 -27.207 53.2637c-15.3145 13.4111 -34.8975 23.6748 -57.9736 32.2236c-46.1543 17.0977 -106.736 26.8711 -173.619 26.8711c-2.0752 0 -4.14355 -0.0117188 -6.20801 -0.03125 c-0.0615234 -0.000976562 -0.124023 0.00195312 -0.1875 0c-2.06543 0.0195312 -4.13281 0.03125 -6.20996 0.03125c-66.8838 0 -127.464 -9.77344 -173.617 -26.8711c-23.0781 -8.54883 -42.6602 -18.8125 -57.9736 -32.2236 c-15.3125 -13.4102 -27.2061 -31.7754 -27.2061 -53.2637c0 -13.0205 4.36914 -24.8896 11.2197 -35.21c-14.9707 -44.7539 -27.5957 -99.7139 -25.2793 -154.087c2.79492 -65.6328 42.3359 -107.41 83.1084 -130.47c40.7734 -23.0596 85.3584 -32.0176 100.886 -37.5742 c37.4268 -13.3945 94.291 -39.1133 95.0146 -39.4414zM508.409 504.763c-20.376 8.9502 -53.2832 23.0273 -79.7217 32.4873c-23.9287 8.56348 -61.2559 15.9336 -93.749 34.3086c-14.8428 8.39648 -28.126 18.1328 -38.3906 30.8848 c0.896484 3.19238 3.48145 7.44922 9.91992 13.0869c8.62891 7.55859 23.416 15.9863 42.6934 23.126c38.5488 14.2812 94.6504 23.8262 156.645 23.8262c0.84082 0 1.6748 -0.0078125 2.51074 -0.0117188h0.1875c0.835938 0.00390625 1.66992 0.0117188 2.50879 0.0117188 c61.9961 0 118.094 -9.54492 156.646 -23.8262c19.2773 -7.13965 34.0645 -15.5674 42.6934 -23.126c6.43945 -5.6377 9.02246 -9.89453 9.91895 -13.0869c-10.2627 -12.752 -23.5479 -22.4883 -38.3906 -30.8848c-32.4932 -18.375 -69.8193 -25.7451 -93.7471 -34.3086 c-26.4395 -9.45996 -59.3467 -23.5371 -79.7246 -32.4873zM276.397 651.025c-0.543945 4.00684 -0.922852 8.18848 -1.11035 12.5723c-1.66699 39.165 6.68555 81.0391 17.7539 118.115l0.115234 0.542969c9.16602 6.33594 20.1504 12.4805 32.7764 18.0752 c44.8291 19.8672 109.379 32.9443 180.788 32.9443c0.53125 0 1.0625 -0.00488281 1.5957 -0.00683594v-0.00195312h0.0927734h0.0947266v0.00195312c0.53125 0.00195312 1.06445 0.00683594 1.59668 0.00683594c71.4082 0 135.957 -13.0771 180.788 -32.9443 c12.6221 -5.59473 23.6094 -11.7393 32.7764 -18.0752l0.113281 -0.542969c11.0703 -37.0762 19.4219 -78.9502 17.7549 -118.115c-0.1875 -4.38379 -0.567383 -8.56543 -1.1123 -12.5723c-14.8867 12.9287 -34.0654 23 -56.7441 31.3984 c-45.7266 16.9404 -106.057 26.7051 -172.664 26.7051c-0.838867 0 -1.67285 -0.00976562 -2.50879 -0.0146484h-0.1875c-0.835938 0.00585938 -1.66992 0.0146484 -2.51074 0.0146484c-66.6064 0 -126.937 -9.76465 -172.663 -26.7051 c-22.6777 -8.39844 -41.8574 -18.4697 -56.7451 -31.3984zM304.557 836.92l0.0224609 0.100586c-8.25391 7.22949 -9.38965 11.5586 -9.38965 13.8896c0 2.33301 1.13574 6.66406 9.38965 13.8916c8.25293 7.22656 22.7715 15.5518 41.835 22.6123 c38.123 14.123 93.9688 23.6562 155.692 23.6562c2.07812 0 4.14453 -0.0126953 6.20996 -0.0341797v-0.00292969h0.0927734h0.0947266v0.00292969c2.06445 0.0214844 4.13184 0.0341797 6.20801 0.0341797c61.7227 0 117.569 -9.5332 155.694 -23.6562 c19.0615 -7.06055 33.5811 -15.3857 41.835 -22.6123c8.25293 -7.22754 9.38965 -11.5586 9.38965 -13.8916c0 -2.33105 -1.13672 -6.66016 -9.38965 -13.8896l0.0195312 -0.100586c-1.47266 0.680664 -2.96289 1.3584 -4.4668 2.02441 c-52.0322 23.0605 -121.295 36.5273 -197.693 36.5273c-0.56543 0 -1.12793 -0.0078125 -1.69141 -0.00878906c-0.563477 0.00195312 -1.12402 0.00878906 -1.68848 0.00878906c-76.3984 0 -145.662 -13.4668 -197.694 -36.5273 c-1.50488 -0.666016 -2.99316 -1.34375 -4.46973 -2.02441zM508.259 454.128h0.302734c0.723633 0.328125 57.5889 26.0469 95.0117 39.4414c15.5312 5.55664 60.1143 14.5146 100.886 37.5742c40.7734 23.0596 80.3154 64.8369 83.1123 130.47 c2.31543 54.373 -10.3096 109.333 -25.2803 154.087c6.84863 10.3203 11.2207 22.1895 11.2207 35.21c0 21.4883 -11.8955 39.8535 -27.207 53.2637c-15.3145 13.4111 -34.8975 23.6748 -57.9736 32.2236c-46.1543 17.0977 -106.736 26.8711 -173.619 26.8711 c-2.0752 0 -4.14355 -0.0117188 -6.20801 -0.03125c-0.0615234 -0.000976562 -0.124023 0.00195312 -0.1875 0c-2.06543 0.0195312 -4.13281 0.03125 -6.20996 0.03125c-66.8838 0 -127.464 -9.77344 -173.617 -26.8711 c-23.0781 -8.54883 -42.6602 -18.8125 -57.9736 -32.2236c-15.3125 -13.4102 -27.2061 -31.7754 -27.2061 -53.2637c0 -13.0205 4.36914 -24.8896 11.2197 -35.21c-14.9707 -44.7539 -27.5957 -99.7139 -25.2793 -154.087c2.79492 -65.6328 42.3359 -107.41 83.1084 -130.47 c40.7734 -23.0596 85.3584 -32.0176 100.886 -37.5742c37.4268 -13.3945 94.291 -39.1133 95.0146 -39.4414zM508.409 504.763c-20.376 8.9502 -53.2832 23.0273 -79.7217 32.4873c-23.9287 8.56348 -61.2559 15.9336 -93.749 34.3086 c-14.8428 8.39648 -28.126 18.1328 -38.3906 30.8848c0.896484 3.19238 3.48145 7.44922 9.91992 13.0869c8.62891 7.55859 23.416 15.9863 42.6934 23.126c38.5488 14.2812 94.6504 23.8262 156.645 23.8262c0.84082 0 1.6748 -0.0078125 2.51074 -0.0117188h0.1875 c0.835938 0.00390625 1.66992 0.0117188 2.50879 0.0117188c61.9961 0 118.094 -9.54492 156.646 -23.8262c19.2773 -7.13965 34.0645 -15.5674 42.6934 -23.126c6.43945 -5.6377 9.02246 -9.89453 9.91895 -13.0869c-10.2627 -12.752 -23.5479 -22.4883 -38.3906 -30.8848 c-32.4932 -18.375 -69.8193 -25.7451 -93.7471 -34.3086c-26.4395 -9.45996 -59.3467 -23.5371 -79.7246 -32.4873zM276.397 651.025c-0.543945 4.00684 -0.922852 8.18848 -1.11035 12.5723c-1.66699 39.165 6.68555 81.0391 17.7539 118.115l0.115234 0.542969 c9.16602 6.33594 20.1504 12.4805 32.7764 18.0752c44.8291 19.8672 109.379 32.9443 180.788 32.9443c0.53125 0 1.0625 -0.00488281 1.5957 -0.00683594v-0.00195312h0.0927734h0.0947266v0.00195312c0.53125 0.00195312 1.06445 0.00683594 1.59668 0.00683594 c71.4082 0 135.957 -13.0771 180.788 -32.9443c12.6221 -5.59473 23.6094 -11.7393 32.7764 -18.0752l0.113281 -0.542969c11.0703 -37.0762 19.4219 -78.9502 17.7549 -118.115c-0.1875 -4.38379 -0.567383 -8.56543 -1.1123 -12.5723 c-14.8867 12.9287 -34.0654 23 -56.7441 31.3984c-45.7266 16.9404 -106.057 26.7051 -172.664 26.7051c-0.838867 0 -1.67285 -0.00976562 -2.50879 -0.0146484h-0.1875c-0.835938 0.00585938 -1.66992 0.0146484 -2.51074 0.0146484 c-66.6064 0 -126.937 -9.76465 -172.663 -26.7051c-22.6777 -8.39844 -41.8574 -18.4697 -56.7451 -31.3984zM304.557 836.92l0.0224609 0.100586c-8.25391 7.22949 -9.38965 11.5586 -9.38965 13.8896c0 2.33301 1.13574 6.66406 9.38965 13.8916 c8.25293 7.22656 22.7715 15.5518 41.835 22.6123c38.123 14.123 93.9688 23.6562 155.692 23.6562c2.07812 0 4.14453 -0.0126953 6.20996 -0.0341797v-0.00292969h0.0927734h0.0947266v0.00292969c2.06445 0.0214844 4.13184 0.0341797 6.20801 0.0341797 c61.7227 0 117.569 -9.5332 155.694 -23.6562c19.0615 -7.06055 33.5811 -15.3857 41.835 -22.6123c8.25293 -7.22754 9.38965 -11.5586 9.38965 -13.8916c0 -2.33105 -1.13672 -6.66016 -9.38965 -13.8896l0.0195312 -0.100586 c-1.47266 0.680664 -2.96289 1.3584 -4.4668 2.02441c-52.0322 23.0605 -121.295 36.5273 -197.693 36.5273c-0.56543 0 -1.12793 -0.0078125 -1.69141 -0.00878906c-0.563477 0.00195312 -1.12402 0.00878906 -1.68848 0.00878906 c-76.3984 0 -145.662 -13.4668 -197.694 -36.5273c-1.50488 -0.666016 -2.99316 -1.34375 -4.46973 -2.02441z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M506.65 431.63c134.85 0 246.449 36.2705 263.189 82.7705c0.929688 1.85938 1.86035 4.64941 1.86035 7.43945v0.929688v2.79004v3.7207v159.96v2.79004v1.85938v1.86035c0 1.86035 0 3.71973 -0.930664 5.58008h-0.929688 c-13.9502 47.4297 -125.55 85.5596 -263.189 85.5596c-135.78 0 -247.381 -36.2695 -263.19 -83.6992c-0.929688 -1.86035 -1.86035 -4.65039 -1.86035 -7.44043v-2.79004v-0.929688v-0.930664v-163.68v-1.86035v-0.929688v-2.79004 c0 -2.79004 0.930664 -5.58008 1.86035 -7.43945c15.8096 -46.5 128.34 -82.7705 263.19 -82.7705zM506.65 455.81c-118.11 0 -214.83 28.8301 -223.2 65.1006v0.929688v9.2998c8.37012 36.2705 106.02 65.1006 223.2 65.1006c117.18 0 212.97 -27.9004 222.27 -64.1699 v-10.2305l0.929688 -0.929688c-8.36914 -36.2705 -106.02 -65.1006 -223.199 -65.1006zM503.86 483.71h0.929688h1.86035c92.0693 0 167.399 18.5996 167.399 41.8496s-75.3301 42.7803 -167.399 42.7803c-92.0703 0 -167.4 -19.5303 -167.4 -42.7803 s73.4697 -41.8496 164.61 -41.8496zM283.45 576.71v108.81c12.0898 7.44043 26.04 13.9502 41.8496 20.4609c47.4307 17.6699 111.601 28.8291 181.351 28.8291s133.92 -11.1592 181.35 -28.8291c15.8096 -5.58008 28.8301 -13.0205 40.9199 -20.4609v-107.88 c-47.4297 26.04 -128.34 42.7803 -222.27 42.7803c-93.9307 0 -175.771 -17.6699 -223.2 -43.71z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M507 235.393c1.83789 0.286133 3.61914 0.865234 5.27539 1.71289l64.8867 33.2344c10.7539 5.50977 12.8213 20.001 4.03711 28.2988c0 0 -7.0332 6.64258 -15.0273 14.4414c-3.23633 3.15723 -4.9248 5.08301 -8.07422 8.27344 c5.47754 2.72754 11.8604 5.69922 19.3691 8.82812c22.6201 9.42383 50.4775 19.25 65.6953 24.7285c22.7773 8.19922 65.4688 29.5645 93.7773 69.9082c28.3086 40.3428 37.751 101.351 -7.36719 172.721c-24.5537 38.8389 -44.7812 68.5156 -61.2578 91.1914 c8.08496 5.00098 15.2607 10.543 21.3789 16.7344c11.5938 11.7324 19.5781 26.6494 19.5781 43.0977c0 1.43848 -0.0820312 2.8623 -0.201172 4.27734v41.1211c0 2.58789 -0.265625 5.1748 -0.794922 7.75391h0.404297v31.6875 c0.242188 -1.68164 0.373047 -3.36523 0.390625 -5.04883v49.6074c0 48.3389 -90.3945 87.5459 -202.07 87.7402c-111.677 -0.194336 -202.07 -39.4014 -202.07 -87.7402v-49.6074c0.0185547 1.68359 0.148438 3.36719 0.390625 5.04883v-31.6875h0.404297 c-0.529297 -2.5791 -0.794922 -5.16602 -0.794922 -7.75391v-41.1211c-0.119141 -1.41504 -0.201172 -2.83887 -0.201172 -4.27734c0 -16.4482 7.98438 -31.3652 19.5781 -43.0977c6.11816 -6.19141 13.2939 -11.7334 21.3789 -16.7344 c-16.4766 -22.6758 -36.7041 -52.3525 -61.2578 -91.1914c-45.1182 -71.3701 -35.6758 -132.378 -7.36719 -172.721c28.3086 -40.3438 71 -61.709 93.7773 -69.9082c15.2178 -5.47852 43.0752 -15.3047 65.6953 -24.7285 c7.50879 -3.12891 13.8916 -6.10059 19.3691 -8.82812c-3.14941 -3.19043 -4.83789 -5.11621 -8.07422 -8.27344c-7.99414 -7.79883 -15.0273 -14.4414 -15.0273 -14.4414c-8.78418 -8.29785 -6.7168 -22.7891 4.03711 -28.2988l64.8867 -33.2344 c1.65625 -0.847656 3.4375 -1.42676 5.27539 -1.71289zM507 273.729l-32.4082 16.5996c7.51367 7.3457 15.2119 14.9551 20.0684 20.7832c1.03223 1.23926 1.90234 2.77734 2.5957 4.45703c2.51172 0.912109 5.62793 1.56055 9.04492 1.56055 c4.22754 0 8.00586 -0.983398 10.7305 -2.24414c0.641602 -1.41406 1.41699 -2.70312 2.30859 -3.77344c4.85645 -5.82812 12.5547 -13.4375 20.0684 -20.7832zM526.406 343.529c-6.18066 2.38379 -12.9805 3.59961 -20.1055 3.59961 c-6.77148 0 -13.2471 -1.10449 -19.1797 -3.25977c-1.82715 1.30762 -3.70215 2.44336 -5.71094 3.63672c-8.53906 5.07129 -19.3936 9.97461 -31.416 14.9844c-24.0459 10.0176 -52.3682 19.9736 -67.3008 25.3496c-0.44043 0.158203 -0.954102 0.367188 -1.42383 0.544922 c0.853516 1.18359 1.87793 2.42578 3.12891 3.75c5.24902 5.55371 14.1396 11.6768 25.9199 16.9492c23.5469 10.5361 58.251 17.7207 96.6816 17.7305c38.4307 -0.00976562 73.1348 -7.19434 96.6816 -17.7305c11.7803 -5.27246 20.6709 -11.3955 25.9199 -16.9492 c1.25098 -1.32422 2.27539 -2.56641 3.12891 -3.75c-0.469727 -0.177734 -0.983398 -0.386719 -1.42383 -0.544922c-14.9326 -5.37598 -43.2549 -15.332 -67.3008 -25.3496c-12.0225 -5.00977 -22.877 -9.91309 -31.416 -14.9844 c-2.18262 -1.29688 -4.20801 -2.52051 -6.18359 -3.97656zM350.074 404.42c-15.6006 9.89844 -32.4736 23.5576 -44.3633 40.502c-4.9248 7.01855 -9.21387 14.5186 -12.459 22.6406c0.287109 8.88672 4.41113 17.9248 13.7441 27.5879 c9.68359 10.0254 24.8506 20.0293 44.2734 28.5352c38.8301 17.0039 94.3398 28.084 155.73 28.0938c61.3906 -0.00976562 116.9 -11.0898 155.73 -28.0938c19.4229 -8.50586 34.5898 -18.5098 44.2734 -28.5352c9.33301 -9.66309 13.457 -18.7012 13.7441 -27.5879 c-3.24512 -8.12207 -7.53418 -15.6221 -12.459 -22.6406c-11.8896 -16.9443 -28.7627 -30.6035 -44.3633 -40.502c-2.49512 4.22949 -5.50391 8.17578 -8.88867 11.7578c-9.62207 10.1787 -22.251 18.2256 -37.0605 24.8535 c-29.6025 13.2461 -68.3135 20.7734 -110.977 20.7832c-42.6631 -0.00878906 -81.374 -7.53711 -110.977 -20.7832c-14.8096 -6.62793 -27.4385 -14.6748 -37.0605 -24.8535c-3.38477 -3.58203 -6.39355 -7.52832 -8.88867 -11.7578zM288.635 519.176 c3.22852 17.3896 11.0918 37.0635 25.377 59.6602c43.2188 68.3643 72.5029 107.337 90.5898 128.852c9.04395 10.7568 15.2842 17.1475 19.0098 20.6602c2.57812 2.43066 3.38086 3.09766 3.6582 3.30273c0.938477 0.351562 2.00391 0.701172 3.24414 1.04688 c1.71582 0.871094 3.54688 1.7334 5.51367 2.5625c16.9707 7.15527 42.5957 12.209 70.9727 12.2188c28.377 -0.00976562 54.002 -5.06348 70.9727 -12.2188c1.9668 -0.829102 3.79785 -1.69141 5.51367 -2.5625c1.24023 -0.345703 2.30566 -0.695312 3.24414 -1.04688 c0.277344 -0.205078 1.08008 -0.87207 3.6582 -3.30273c3.72559 -3.5127 9.96582 -9.90332 19.0098 -20.6602c18.0869 -21.5146 47.3711 -60.4873 90.5898 -128.852c14.2852 -22.5967 22.1484 -42.2705 25.377 -59.6602c-13.124 12.542 -30.3066 23.1035 -50.5996 31.9902 c-43.9648 19.2529 -102.825 30.6045 -167.766 30.6133c-64.9404 -0.00878906 -123.801 -11.3604 -167.766 -30.6133c-20.293 -8.88672 -37.4756 -19.4482 -50.5996 -31.9902zM366.945 716.852c-7.43848 4.33594 -13.4365 8.85547 -17.7441 13.2148 c-7.11328 7.19824 -9.47266 13.0957 -9.47266 18.4961s2.35938 11.2988 9.47266 18.498c7.11328 7.19824 18.8076 14.8359 34.0527 21.3613c30.4746 13.0439 74.7559 21.751 123.746 21.7617c48.9902 -0.00976562 93.2715 -8.71777 123.746 -21.7617 c15.2451 -6.52539 26.9395 -14.1631 34.0527 -21.3613c7.11328 -7.19922 9.47266 -13.0977 9.47266 -18.498s-2.35938 -11.2979 -9.47266 -18.4961c-4.30762 -4.35938 -10.3057 -8.87891 -17.7441 -13.2148c-3.92676 4.96387 -7.56055 9.42676 -10.8652 13.3574 c-2.74316 3.2627 -5.25391 6.15723 -7.58984 8.7832c-2.21094 3.69824 -4.91016 7.06934 -7.88086 10.0312c-3.34375 3.33301 -7.06738 6.30859 -11.123 9.00391c-2.35254 1.93457 -3.9707 3.0918 -3.9707 3.0918c-1.62109 1.05273 -3.40625 1.83008 -5.28125 2.30078 c-2.81152 1.44629 -5.73438 2.80762 -8.77344 4.08984c-22.8408 9.62988 -52.2061 14.958 -84.5703 14.9688c-32.3652 -0.00878906 -61.7295 -5.33887 -84.5703 -14.9688c-3.03906 -1.28223 -5.96191 -2.64355 -8.77344 -4.08984 c-1.875 -0.470703 -3.66016 -1.24805 -5.28125 -2.30078c0 0 -1.61816 -1.15723 -3.9707 -3.0918c-4.05566 -2.69531 -7.7793 -5.6709 -11.123 -9.00391c-2.9707 -2.96191 -5.66992 -6.33301 -7.88086 -10.0312c-2.33594 -2.62598 -4.84668 -5.52051 -7.58984 -8.7832 c-3.30469 -3.93066 -6.93848 -8.39355 -10.8652 -13.3574zM304.93 740.557v-0.000976562s0.152344 0.00976562 0.152344 0.0107422c-0.101562 1.13086 -0.152344 2.2627 -0.152344 3.39453v-3.4043zM709.07 740.557v3.4043 c0 -1.13184 -0.0507812 -2.26367 -0.152344 -3.39453zM304.93 824.557v-0.000976562s0.152344 0.00976562 0.152344 0.0107422c-0.101562 1.13086 -0.152344 2.2627 -0.152344 3.39453v-3.4043zM709.07 824.557v3.4043c0 -1.13184 -0.0507812 -2.26367 -0.152344 -3.39453z M345.32 816.498v54c38.1396 22.0625 98.0137 35.0879 161.68 35.2012c63.666 -0.113281 123.54 -13.1387 161.68 -35.2012v-54c-38.1396 22.0625 -98.0137 35.0879 -161.68 35.2012c-63.666 -0.113281 -123.54 -13.1387 -161.68 -35.2012z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M507.133 128.938c2.10352 0 6.27539 3.76953 6.33398 3.82324l0.0253906 0.0244141c-0.0253906 -0.0244141 61.4521 53.6514 85.3789 81.9648l6.52539 -18.3604s7.18066 16.7627 15.5078 39.5127l114.568 109.985c3.75 3.60156 5.85742 8.48535 5.85742 13.5771v243.649 c0.410156 -0.0283203 0.819336 -0.0546875 1.22852 -0.0839844c-0.0605469 4.50195 -0.490234 8.92383 -1.22852 13.2656v75.2002c0 3.69629 -1.11035 7.31348 -3.19922 10.418l-16.5273 24.5645l14.8242 20.0537c2.40039 3.24707 3.68945 7.12988 3.68945 11.1113v15.4561 l0.0839844 0.0185547v10.043c0 0.785156 -0.0332031 1.57031 -0.0839844 2.35449v17.6836c0 0.416992 -0.0146484 0.833008 -0.0429688 1.24902v7.24707c0.0390625 0.00976562 0.126953 0.0322266 0.126953 0.0322266v5.99414 c-0.000976562 -1.00488 -0.0429688 -2.00879 -0.126953 -3.01367v6.06445c0.0800781 -0.958008 0.126953 -1.91602 0.126953 -2.875v55.5049c0.000976562 50.2676 -101.563 91.0166 -226.85 91.0166c-2.11914 0 -4.23535 -0.0273438 -6.35156 -0.0517578 c-2.11621 0.0244141 -4.23242 0.0517578 -6.35156 0.0517578c-125.286 0 -226.851 -40.749 -226.85 -91.0166v-55.5049c0.00488281 0.958984 0.046875 1.91699 0.126953 2.875v-6.06445c-0.0839844 1.00488 -0.126953 2.00879 -0.126953 3.01367v-5.99414 s0.0878906 -0.0224609 0.126953 -0.0322266v-7.24707c-0.0283203 -0.416016 -0.0429688 -0.832031 -0.0429688 -1.24902v-17.6836c-0.0507812 -0.78418 -0.0839844 -1.56934 -0.0839844 -2.35449v-10.043l0.0839844 -0.0185547v-15.4561 c0 -3.98145 1.28906 -7.86426 3.68945 -11.1113l14.8242 -20.0537l-16.5273 -24.5645c-2.08887 -3.10449 -3.19922 -6.72168 -3.19922 -10.418v-75.2002c-0.738281 -4.3418 -1.16797 -8.76367 -1.22852 -13.2656c0.40918 0.0292969 0.818359 0.0556641 1.22852 0.0839844 v-243.649c0 -5.0918 2.10742 -9.97559 5.85742 -13.5771l114.568 -109.985c8.32715 -22.75 15.5078 -39.5127 15.5078 -39.5127l6.52539 18.3604l85.3867 -81.9727s4.41113 -3.83984 6.61719 -3.83984zM507 180.858l-77.4805 74.3818l19.1309 53.834 c2.2627 -2.43066 4.80371 -5.06543 7.5625 -7.71387c4.59277 -4.4082 9.64746 -8.84863 15.4141 -12.4688c4.3252 -2.71484 9.39941 -5.90625 16.2363 -6.0791c2.2793 -0.0566406 4.75488 0.22168 7.46289 0.963867c9.21777 2.52832 9.81445 7.37012 10.8105 9.6416 c0.356445 0.813477 0.625 1.55176 0.863281 2.26855c0.238281 -0.716797 0.506836 -1.45508 0.863281 -2.26855c0.996094 -2.27148 1.59375 -7.11328 10.8105 -9.6416c2.70801 -0.742188 5.18359 -1.02051 7.46289 -0.963867 c6.83691 0.172852 11.9111 3.36426 16.2363 6.0791c5.7666 3.62012 10.8213 8.06055 15.4141 12.4688c2.75879 2.64844 5.2998 5.2832 7.5625 7.71387l19.1309 -53.834zM370.654 311.752l-57.9863 55.666v246.659c4.93457 19.583 21.7236 38.7188 49.959 54.5967 c20.6514 11.6133 46.8711 20.8506 76.4863 26.3301c7.5 2.91895 16.1855 7.33789 18.5352 12.8154c2.18945 5.10547 6.88965 14.5527 11.1152 22.8809c0.928711 4.10254 -2.65039 5.66992 -7.59766 6c-45.2871 -4.55176 -86.123 -16.8662 -118.607 -35.1338 c-10.9092 -6.13477 -20.9678 -13.0654 -29.8906 -20.6836v4.95215l20.6777 30.7334c4.4375 6.59766 4.24414 15.124 -0.490234 21.5293l-18.9746 25.6689v0.0634766l0.0429688 -0.00976562v15.3457c42.3457 24.626 112.153 39.3301 186.723 39.3301 c2.11914 0 4.23535 -0.0263672 6.35156 -0.0507812c2.11621 0.0244141 4.23242 0.0507812 6.35156 0.0507812c74.5693 0 144.377 -14.7041 186.723 -39.3301v-15.3457l0.0429688 0.00976562v-0.0634766l-18.9746 -25.6689 c-4.73438 -6.40527 -4.92773 -14.9316 -0.490234 -21.5293l20.6777 -30.7334v-4.95215c-8.92285 7.61816 -18.9814 14.5488 -29.8906 20.6836c-32.4844 18.2676 -73.3203 30.582 -118.607 35.1338c-4.94727 -0.330078 -8.52734 -1.89746 -7.59766 -6 c4.22559 -8.32812 8.92578 -17.7754 11.1152 -22.8809c2.34961 -5.47754 11.0352 -9.89648 18.5352 -12.8154c29.6152 -5.47949 55.835 -14.7168 76.4863 -26.3301c28.2354 -15.8779 45.0244 -35.0137 49.959 -54.5967v-246.659l-57.9844 -55.666 c2.44141 12.7822 3.56934 24.3428 2.47266 33.1133c-1.93262 15.4629 -6.95605 51.6455 -12.5195 91.1641c-0.124023 0.510742 -0.209961 1.13867 -0.263672 1.875c-0.672852 4.77832 -1.35352 9.59277 -2.03711 14.4326c-3.52832 13.5225 -11.5557 17.0801 -27.9609 21.666 l-10.2148 2.78418v10.1855l0.28125 0.436523s-0.260742 1.61133 -0.28125 1.74023v8.88379s24.8867 1.22949 27.1387 -2.4248c15.1641 13.3623 15.5518 37.4561 -7.53516 87.1514l-53.5605 103.776l-9.08008 17.5898 c-0.0175781 0.0332031 -7.96289 15.3545 -43.6387 15.3545c-31.1611 0 -39.8623 -11.6885 -41.5762 -14.6709l-0.357422 -0.689453l-62.6367 -121.36c-23.0879 -49.6953 -22.6992 -73.7891 -7.53516 -87.1514c2.25195 3.6543 27.1387 2.4248 27.1387 2.4248v-21.2461 l-10.2148 -2.78418c-16.4053 -4.58594 -24.4326 -8.14355 -27.9609 -21.666c-0.683594 -4.83984 -1.36426 -9.6543 -2.03711 -14.4326c-0.0537109 -0.736328 -0.139648 -1.36426 -0.263672 -1.875c-5.56348 -39.5186 -10.5869 -75.7012 -12.5195 -91.1641 c-1.0957 -8.77051 0.03125 -20.3311 2.47266 -33.1133zM480.398 319.068h-0.00195312c-1.00098 0.889648 -1.99219 1.70996 -2.97852 2.65723c-7.51074 7.20996 -13.9082 15.0879 -13.9082 15.0879c-2.62012 3.24512 -6.55762 5.2627 -10.8242 5.54492l-15.2715 13.1084 l29.1777 271.16l18.6055 16.8115c0.211914 -34.9834 0.441406 -93.8525 0.00976562 -155.487c-0.329102 -46.9561 -1.04492 -94.0137 -2.43359 -129.308c-0.640625 -16.2861 -1.45215 -29.6777 -2.375 -39.5752zM533.594 319.068h-0.00195312 c-0.923828 9.89746 -1.73438 23.2891 -2.375 39.5752c-1.38867 35.2939 -2.10449 82.3516 -2.43359 129.308c-0.431641 61.6348 -0.202148 120.504 0.00976562 155.487l18.6055 -16.8115l1.3418 -5.8125l28.1035 -265.248l-15.5391 -13.208 c-4.2666 -0.282227 -8.2041 -2.2998 -10.8242 -5.54492c0 0 -6.39746 -7.87793 -13.9082 -15.0879c-0.986328 -0.947266 -1.97754 -1.76758 -2.97852 -2.65723zM313.926 823.327v34.5605c42.3457 24.627 112.153 39.3301 186.723 39.3311 c2.11914 0 4.23535 -0.0273438 6.35156 -0.0517578c2.11621 0.0244141 4.23242 0.0517578 6.35156 0.0517578c74.5693 -0.000976562 144.377 -14.7041 186.723 -39.3311v-34.5605c-42.3457 24.627 -112.153 39.3301 -186.723 39.3311 c-2.11914 0 -4.23535 -0.0273438 -6.35156 -0.0517578c-2.11621 0.0244141 -4.23242 0.0517578 -6.35156 0.0517578c-74.5693 -0.000976562 -144.377 -14.7041 -186.723 -39.3311z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M501.97 35.9561h-0.0117188c0.0195312 0 0.0410156 0.0166016 0.0625 0v0.0185547c2.86426 0.797852 5.79102 1.8877 8.6875 3.39844c16.4189 8.56445 30.4453 27.9834 36.8926 59.4512c3.78125 18.4531 28.1963 63.8389 44.2666 109.03 c8.03613 22.5957 14.2207 46.0439 13.1699 69.9424c-0.443359 10.0645 -2.6377 20.3184 -6.53711 30.1025c40.3701 4.08594 100.55 19.5195 143.93 72.1787c36.2295 43.9805 40.8281 96.8467 33.4873 139.771c-7.34277 42.9229 -23.6377 75.9043 -40.7158 94.4287 c-11.0488 11.9844 -37.0273 40.3457 -60.9385 70.001c-4.57617 5.67578 -9.07031 11.3975 -13.3604 17.04c12.6797 5.91797 23.7607 12.748 32.9785 20.9131c9.63574 8.53613 17.5811 19.3271 21.0732 31.709c0.176758 -0.698242 0.339844 -1.39648 0.46875 -2.09961 c-0.046875 1.4043 -0.0673828 2.44141 -0.0927734 3.5332c0.00878906 0.03125 0.0117188 0.0625 0.0214844 0.09375l0.015625 -0.0722656v0.139648c0.960938 3.87305 1.50391 7.88867 1.50391 12.0439c0 3.30176 -0.337891 6.51855 -0.955078 9.64453 c0.00878906 0.789062 0.0273438 1.33691 0.0302734 2.25781c0 2.00879 -0.202148 4.00098 -0.579102 5.97461v104.399l-0.552734 0.277344c-10.9004 40.8945 -101.521 72.9688 -212.79 74.123c-0.0195312 0 -0.0390625 -0.000976562 -0.0585938 0 c-111.27 -1.1543 -201.889 -33.2285 -212.79 -74.123l-0.552734 -0.277344v-104.399c-0.376953 -1.97363 -0.579102 -3.96582 -0.579102 -5.97461c0.00292969 -0.920898 0.0214844 -1.46875 0.0302734 -2.25781c-0.617188 -3.12598 -0.955078 -6.34277 -0.955078 -9.64453 c0 -4.1543 0.542969 -8.1709 1.50391 -12.0439v-0.139648l0.0166016 0.0722656c0.00683594 -0.03125 0.0117188 -0.0625 0.0205078 -0.0927734c-0.0253906 -1.09277 -0.0458984 -2.12891 -0.0927734 -3.53418c0.129883 0.703125 0.291992 1.40137 0.469727 2.09961 c3.49023 -12.3828 11.4365 -23.1729 21.0723 -31.709c9.21777 -8.16504 20.2998 -14.9951 32.9785 -20.9131c-4.29004 -5.64355 -8.78418 -11.3643 -13.3604 -17.04c-23.9102 -29.6553 -49.8896 -58.0156 -60.9385 -70.001 c-17.0791 -18.5244 -33.374 -51.5059 -40.7158 -94.4287c-7.34082 -42.9238 -2.74219 -95.79 33.4873 -139.771c43.3799 -52.6592 103.564 -68.0928 143.93 -72.1787c-3.89941 -9.7832 -6.09375 -20.0381 -6.53613 -30.1025 c-1.05176 -23.8984 5.13281 -47.3467 13.1689 -69.9424c16.0703 -45.1895 40.4854 -90.5752 44.2666 -109.03c6.44727 -31.4678 20.4736 -50.8857 36.8926 -59.4512c2.89648 -1.51074 5.82324 -2.60059 8.6875 -3.39844v-0.0185547zM502 112.924h0.000976562 c-8.38379 34.6719 -31.624 73.2188 -45.0205 110.891c-6.99219 19.6621 -11.0645 38.1816 -10.4609 51.8984c0.509766 11.5957 2.94141 19.1816 10.1328 26.1689c1.12695 0.52832 2.33398 1.05859 3.72949 1.58105c9.94043 3.72461 24.8584 6.57617 41.6191 7.15039 c16.7598 -0.574219 31.6797 -3.42578 41.6201 -7.15039c1.39551 -0.522461 2.60254 -1.05273 3.72949 -1.58105c7.19141 -6.9873 9.62305 -14.5732 10.1328 -26.1689c0.602539 -13.7168 -3.46875 -32.2373 -10.4609 -51.8984 c-13.3965 -37.6768 -36.6387 -76.2236 -45.0225 -110.891zM468.731 356.104v0s-26.6797 -6.19629 -65.1191 0.225586c-2.77832 0.381836 -5.62891 0.814453 -8.57324 1.33984c4.34473 3.31055 11.6611 7.4082 21.2031 10.9834 c20.7012 7.75684 51.4727 13.3799 85.7578 13.9883c34.2861 -0.609375 65.0566 -6.23145 85.7598 -13.9883c9.54102 -3.57422 16.8574 -7.67188 21.2031 -10.9834c-2.94531 -0.525391 -5.7959 -0.958008 -8.57324 -1.33984 c-38.4404 -6.42188 -65.1191 -0.225586 -65.1191 -0.225586c-31.582 5.73926 -37.127 5.88867 -66.5391 0zM347.052 372.763h-0.00390625c-17.4131 8.33203 -34.5186 20.332 -48.7354 37.5898c-13.7734 16.7197 -21.125 34.959 -24.1055 53.4707 c1.95996 4.75391 5.79785 9.96484 12.3252 15.7471c10.4434 9.25098 27.252 18.7939 48.7861 26.8613c41.7598 15.6465 100.989 26.0186 166.65 26.6348c0.0205078 0 0.0410156 -0.000976562 0.0625 0c65.6602 -0.616211 124.891 -10.9883 166.649 -26.6348 c21.5342 -8.06738 38.3438 -17.6113 48.7861 -26.8613c6.52734 -5.78223 10.3652 -10.9932 12.3252 -15.7471c-2.97949 -18.5117 -10.332 -36.751 -24.1045 -53.4707c-14.2178 -17.2568 -31.3232 -29.2578 -48.7354 -37.5898 c-3.54297 7.4873 -8.8457 13.9551 -14.6689 19.1143c-10.3975 9.20996 -23.127 15.8535 -37.8203 21.3594c-27.916 10.4609 -63.3174 16.4443 -102.43 17.0166v0.00195312h-0.0322266h-0.0302734v-0.00195312c-39.1094 -0.573242 -74.5117 -6.55566 -102.431 -17.0166 c-14.6924 -5.50488 -27.4219 -12.1484 -37.8193 -21.3594c-5.82422 -5.15918 -11.126 -11.627 -14.6689 -19.1143zM275.655 515.323h-0.00195312c6.34766 32.3193 23.1602 61.2803 28.1436 66.6855c11.1914 12.1396 37.8301 41.1729 62.999 72.3887 c7.35742 9.125 14.5801 18.4287 21.3125 27.6426c1.10938 2.33301 3.33301 7.11133 5.91211 12.9385c4.51465 10.1699 9.92773 23.1348 12.3809 32.1348c0.317383 1.16602 1.39648 2.1875 3.08984 3.08691c3.62305 2.96387 10.2422 6.80566 19.123 10.1328 c17.75 6.65039 44.0488 11.4902 73.3877 12.0908c29.3389 -0.600586 55.6396 -5.44043 73.3896 -12.0908c8.88086 -3.32715 15.501 -7.16797 19.123 -10.1328c1.69238 -0.899414 2.77148 -1.9209 3.08984 -3.08691c2.45215 -8.99902 7.86523 -21.9648 12.3809 -32.1348 c2.5791 -5.82617 4.80273 -10.6045 5.91211 -12.9385c6.73242 -9.21387 13.9551 -18.5176 21.3125 -27.6426c25.1689 -31.2158 51.8066 -60.249 62.999 -72.3887c4.98438 -5.40527 21.7959 -34.3662 28.1426 -66.6855c-13.2402 9.16797 -29.1924 17.0049 -47.4062 23.8301 c-47.1299 17.6602 -109.706 28.2607 -178.91 28.8584h-0.0625c-69.2002 -0.597656 -131.776 -11.1982 -178.91 -28.8584c-18.2139 -6.82422 -34.166 -14.6621 -47.4072 -23.8301zM366.625 738.503h0.000976562c-12.2686 5.2998 -21.7832 11.0918 -27.6592 16.2959 c-7.13965 6.3252 -8.33105 10.3145 -8.33105 12.7793s1.19141 6.4541 8.33105 12.7793c7.14062 6.32422 19.585 13.5273 35.9141 19.6455c31.3779 11.7578 76.751 19.8135 127.12 20.4268c50.374 -0.613281 95.748 -8.66895 127.13 -20.4268 c16.3291 -6.11816 28.7744 -13.3213 35.9141 -19.6455c7.13965 -6.3252 8.33203 -10.3145 8.33203 -12.7793s-1.19238 -6.45508 -8.33203 -12.7793c-5.875 -5.2041 -15.3896 -10.9961 -27.6592 -16.2959c-2.75586 8.78711 -8.41602 16.2656 -14.8037 21.9238 c-8.99902 7.97168 -20.0156 13.7217 -32.7314 18.4863c-23.9648 8.97949 -54.2959 14.1504 -87.8135 14.7178v0.00195312h-0.0322266h-0.0302734v-0.00195312c-33.5195 -0.567383 -63.8496 -5.73926 -87.8135 -14.7178 c-12.7158 -4.76367 -23.7334 -10.5156 -32.7314 -18.4863c-6.38867 -5.6582 -12.0488 -13.1367 -14.8047 -21.9238zM323.339 824.279l0.0126953 42.8457c38.29 22.1465 104.046 36.8623 178.63 37.6367c0.0205078 0.000976562 0.0419922 0 0.0625 0 c74.5801 -0.774414 140.334 -15.4902 178.63 -37.6367v-42.8457c-7.18652 4.15332 -15.3525 8.04785 -24.3594 11.6416c-3.84082 1.67871 -7.80957 3.28516 -11.916 4.82422c-38.04 14.25 -87.5889 22.6035 -142.36 23.1924v0.00195312h-0.0322266h-0.0302734v-0.00195312 c-54.7754 -0.588867 -104.324 -8.94141 -142.36 -23.1924c-4.10645 -1.53906 -8.0752 -3.14551 -11.916 -4.82422c-9.00684 -3.59375 -17.1729 -7.48828 -24.3604 -11.6416z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M506.765 113.54h0.0078125c0.116211 0 0.162109 -0.0263672 0.462891 0c7.77051 1.16992 21.6113 9.08984 35.9551 16.7266c12.46 6.63477 10.0205 23.6094 7.87109 32.1074l-15.3516 49.4727c11.1777 36.5859 21.3398 70.3037 17.9932 101.78 c20.9648 31.0527 39.2188 44.6465 59.252 57.8145c20.9727 13.7842 44.7012 27.2969 69.2891 56.9521c33.8994 40.8906 34.7324 89.7275 15.1211 146.641c-12.8477 37.2891 -37.626 84.1328 -65.7822 136.79c15.8955 6.1875 29.3955 13.6123 39.8809 23.123 c8.41406 7.63281 15.1445 17.3027 17.6475 28.3281l0.167969 -8.01562v8.74609c0.578125 2.77051 0.898438 5.62305 0.898438 8.55273c0 2.78418 -0.296875 5.49609 -0.822266 8.13867v106.88h-0.0761719v3.45508s-0.0654297 0.00390625 -0.0664062 0.00390625 c0.0390625 0.589844 0.0585938 1.17969 0.0585938 1.76953c0 38.6016 -81.4697 69.8994 -182.04 69.9727v0.00390625h-0.111328c-0.0400391 0 -0.0800781 -0.00195312 -0.121094 -0.00195312c-0.0400391 0 -0.0791016 0.00195312 -0.119141 0.00195312h-0.111328 v-0.00390625c-100.571 -0.0742188 -182.041 -31.3711 -182.04 -69.9727c0 -0.589844 0.0195312 -1.17969 0.0585938 -1.76953c-0.000976562 0 -0.0664062 -0.00390625 -0.0664062 -0.00390625v-3.45508h-0.0761719v-106.88 c-0.525391 -2.64258 -0.822266 -5.35449 -0.822266 -8.13867c0 -2.92969 0.320312 -5.78223 0.898438 -8.55273v-8.74609l0.167969 8.01562c2.50195 -11.0254 9.2334 -20.6953 17.6484 -28.3281c10.4844 -9.51074 23.9854 -16.9346 39.8809 -23.123 c-28.1572 -52.6582 -52.9336 -99.502 -65.7832 -136.79c-19.6104 -56.9141 -18.7773 -105.754 15.1211 -146.641c24.5879 -29.6553 48.3174 -43.168 69.2891 -56.9521c20.0342 -13.168 38.2881 -26.7617 59.252 -57.8145c-3.3457 -31.4775 6.81641 -65.1953 17.9941 -101.78 l-15.3525 -49.4727c-2.14941 -8.49805 -4.58887 -25.4727 7.87109 -32.1074c14.3447 -7.6377 28.1855 -15.5566 35.9551 -16.7266zM506.995 221.69v-0.000976562c-9.77734 15.542 -22.541 45.167 -17 88.9004c7.04004 1.70898 20.2178 3.71582 34.041 -0.337891 c5.43359 -43.5459 -7.28809 -73.0596 -17.041 -88.5615zM531.327 334.17v0.000976562c-20.4336 6.0957 -39.1836 2.89844 -48.8848 0.318359c-22.5283 32.0381 -44.6406 48.6914 -64.9219 62.0225c-2.15527 1.41699 -4.26367 2.77637 -6.36719 4.13672l0.164062 0.0234375 c-0.00195312 0.0361328 -0.0175781 0.109375 -0.0175781 0.134766c0 0.34375 0.0615234 1.7002 3.42188 4.74805c3.35938 3.04785 9.63672 6.82812 18.0547 10.0576c16.8359 6.45801 41.9492 10.9385 69.7188 10.9385c1.43262 0 2.85254 -0.0205078 4.26953 -0.0449219 v-0.00390625c0.0771484 0.00195312 0.155273 0.000976562 0.232422 0.00195312c0.0771484 -0.000976562 0.154297 -0.000976562 0.230469 -0.00195312v0.00390625c1.41699 0.0244141 2.83789 0.0449219 4.26953 0.0449219c27.7705 0 52.8848 -4.47949 69.7197 -10.9385 c8.41797 -3.23047 14.6953 -7.00977 18.0547 -10.0576c3.35938 -3.04688 3.42188 -4.4043 3.42188 -4.74805c0 -0.0253906 -0.015625 -0.0976562 -0.0175781 -0.134766l0.164062 -0.0234375c-2.10449 -1.36035 -4.21191 -2.71973 -6.36719 -4.13672 c-20.3486 -13.375 -42.54 -30.0957 -65.1455 -62.3418zM386.147 417.617h-0.00585938c-10.2871 7.73438 -20.4941 16.8945 -31.2969 29.9238c-14.708 17.7393 -21.6484 35.4854 -22.0576 56.3535c1.71387 2.6543 4.0752 5.40918 7.25195 8.29102 c7.85059 7.12012 20.248 14.292 36.0537 20.3555c31.6123 12.127 76.6406 19.9844 126.399 19.9844c1.43262 0 2.84766 -0.0263672 4.26953 -0.0429688v-0.00488281c0.078125 0.00195312 0.155273 0.00195312 0.232422 0.00292969 c0.0771484 -0.00195312 0.154297 -0.00195312 0.230469 -0.00292969v0.00488281c1.42188 0.0166016 2.83789 0.0429688 4.26953 0.0429688c49.7627 0 94.791 -7.85742 126.4 -19.9844c15.8047 -6.06348 28.2021 -13.2344 36.0527 -20.3555 c3.17773 -2.88184 5.53809 -5.63672 7.25195 -8.29102c-0.40918 -20.8691 -7.34961 -38.6143 -22.0566 -56.3535c-10.8037 -13.0293 -21.0117 -22.1885 -31.2969 -29.9238c-2.2832 3.82715 -5.20801 7.24414 -8.41992 10.1582 c-7.38867 6.70117 -16.6631 11.7021 -27.4629 15.8457c-21.6006 8.28711 -49.5859 12.9297 -80.4658 12.9297c-1.50879 0 -3.00488 -0.0195312 -4.5 -0.0429688c-1.49512 0.0234375 -2.99219 0.0429688 -4.50195 0.0429688c-30.8799 0 -58.8643 -4.64258 -80.4648 -12.9297 c-10.7998 -4.14453 -20.0752 -9.14453 -27.4629 -15.8457c-3.21191 -2.91406 -6.1377 -6.33105 -8.41992 -10.1582zM336.8 537.377h0.00390625c2.01758 8.67383 4.76465 17.9199 8.19727 27.8809c15.9902 46.4102 48.0801 105.973 88.6562 183.25 c0.192383 0.214844 0.37793 0.432617 0.583984 0.638672c0.196289 0.241211 0.461914 0.539062 1.05469 1.07617c2.22949 2.02344 6.87207 4.87988 13.2695 7.33398c12.7959 4.90918 32.3281 8.42969 53.9346 8.42969c1.43457 0 2.85449 -0.0253906 4.26953 -0.0566406 v-0.00585938c0.0761719 0.00195312 0.155273 0.00195312 0.232422 0.00390625c0.0761719 -0.00195312 0.15332 -0.00195312 0.230469 -0.00390625v0.00585938c1.41406 0.03125 2.83398 0.0566406 4.26953 0.0566406c21.6055 0 41.1377 -3.52051 53.9336 -8.42969 c6.39844 -2.4541 11.04 -5.31055 13.2695 -7.33398c0.592773 -0.537109 0.858398 -0.834961 1.05469 -1.07617c0.206055 -0.206055 0.391602 -0.423828 0.583984 -0.638672c40.5762 -77.2803 72.665 -136.843 88.6562 -183.25 c3.43262 -9.96094 6.17969 -19.207 8.19727 -27.8809c-8.93457 5.93262 -19.4912 11.127 -31.418 15.7031c-35.1055 13.4678 -82.2402 21.4434 -134.28 21.4434c-1.50879 0 -3 -0.0283203 -4.5 -0.0429688c-1.5 0.0146484 -2.99219 0.0429688 -4.50195 0.0429688 c-52.043 0 -99.1768 -7.97559 -134.279 -21.4434c-11.9277 -4.57617 -22.4834 -9.77051 -31.418 -15.7031zM399.021 742.937h0.00390625c-1.04102 0.375977 -2.07617 0.754883 -3.08203 1.14062c-13.5537 5.20117 -23.8984 11.3154 -29.9082 16.7666 c-6.00879 5.4502 -7.24023 9.12207 -7.24023 11.7129s1.23145 6.2627 7.24023 11.7129c6.00977 5.45117 16.3545 11.5654 29.9082 16.7656c27.1074 10.4004 66.7188 17.3984 110.51 17.3984c0.105469 0 0.209961 -0.00292969 0.314453 -0.00390625v-0.00390625 c0.078125 0 0.155273 0.000976562 0.232422 0.00195312c0.0771484 -0.000976562 0.15332 -0.00195312 0.230469 -0.00195312v0.00390625c0.104492 0.00195312 0.208984 0.00390625 0.314453 0.00390625c43.7891 0 83.4023 -6.99805 110.511 -17.3984 c13.5537 -5.2002 23.8984 -11.3154 29.9072 -16.7656c6.00977 -5.45117 7.24023 -9.12207 7.24023 -11.7129s-1.23047 -6.2627 -7.24023 -11.7129c-6.00879 -5.45117 -16.3535 -11.5664 -29.9072 -16.7666c-1.00684 -0.385742 -2.04102 -0.764648 -3.08203 -1.14062 c-1.60449 3.01465 -3.18164 5.95703 -4.79492 9.00293c-0.978516 8.3584 -5.74609 15.4453 -11.3203 20.502c-6.25879 5.67676 -13.8994 9.75391 -22.6797 13.123c-17.5615 6.7373 -39.9639 10.4219 -64.6807 10.4219c-1.50879 0 -3.00781 -0.0175781 -4.5 -0.0449219 c-1.49219 0.0273438 -2.99219 0.0449219 -4.50195 0.0449219c-24.7158 0 -47.1201 -3.68555 -64.6797 -10.4219c-8.78027 -3.36914 -16.4219 -7.44629 -22.6797 -13.123c-5.57422 -5.05664 -10.3418 -12.1436 -11.3203 -20.502 c-1.61426 -3.0459 -3.19043 -5.98828 -4.79492 -9.00293zM354.644 829.212v49.9922c33.6504 19.6699 90.8096 31.5303 152.12 31.5762c0.0771484 0 0.154297 0.00195312 0.232422 0.00195312c0.0771484 0 0.15332 -0.00195312 0.230469 -0.00195312 c61.3086 -0.0458984 118.469 -11.9062 152.12 -31.5762v-49.9922c-32.54 18.9805 -88.5059 31.5215 -152.12 31.5684v0.00195312h-0.111328h-0.121094h-0.119141h-0.111328v-0.00195312c-63.6133 -0.0458984 -119.575 -12.5879 -152.12 -31.5684z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 1024 1000\\\"><path fill=\\\"currentColor\\\" d=\\\"M283.45 514.84h445.47v20h-445.47v-20zM496 456h18v140h-18v-140zM506.65 431.63c134.85 0 246.449 36.2705 263.189 82.7705c0.929688 1.85938 1.86035 4.64941 1.86035 7.43945v0.929688v2.79004v3.7207v159.96v2.79004v1.85938v1.86035 c0 1.86035 0 3.71973 -0.930664 5.58008h-0.929688c-13.9502 47.4297 -125.55 85.5596 -263.189 85.5596c-135.78 0 -247.381 -36.2695 -263.19 -83.6992c-0.929688 -1.86035 -1.86035 -4.65039 -1.86035 -7.44043v-2.79004v-0.929688v-0.930664v-163.68v-1.86035v-0.929688 v-2.79004c0 -2.79004 0.930664 -5.58008 1.86035 -7.43945c15.8096 -46.5 128.34 -82.7705 263.19 -82.7705zM506.65 455.81c-118.11 0 -214.83 28.8301 -223.2 65.1006v0.929688v9.2998c8.37012 36.2705 106.02 65.1006 223.2 65.1006 c117.18 0 212.97 -27.9004 222.27 -64.1699v-10.2305l0.929688 -0.929688c-8.36914 -36.2705 -106.02 -65.1006 -223.199 -65.1006zM283.45 576.71v108.81c12.0898 7.44043 26.04 13.9502 41.8496 20.4609c47.4307 17.6699 111.601 28.8291 181.351 28.8291 s133.92 -11.1592 181.35 -28.8291c15.8096 -5.58008 28.8301 -13.0205 40.9199 -20.4609v-107.88c-47.4297 26.04 -128.34 42.7803 -222.27 42.7803c-93.9307 0 -175.771 -17.6699 -223.2 -43.71z\\\"></path></svg>\"","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.svgson = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  /*!\n   * isobject <https://github.com/jonschlinkert/isobject>\n   *\n   * Copyright (c) 2014-2017, Jon Schlinkert.\n   * Released under the MIT License.\n   */\n\n  var isobject = function isObject(val) {\n    return val != null && typeof val === 'object' && Array.isArray(val) === false;\n  };\n\n  function isObjectObject(o) {\n    return isobject(o) === true\n      && Object.prototype.toString.call(o) === '[object Object]';\n  }\n\n  var isPlainObject = function isPlainObject(o) {\n    var ctor,prot;\n\n    if (isObjectObject(o) === false) return false;\n\n    // If has modified constructor\n    ctor = o.constructor;\n    if (typeof ctor !== 'function') return false;\n\n    // If has modified prototype\n    prot = ctor.prototype;\n    if (isObjectObject(prot) === false) return false;\n\n    // If constructor does not have an Object-specific method\n    if (prot.hasOwnProperty('isPrototypeOf') === false) {\n      return false;\n    }\n\n    // Most likely a plain Object\n    return true;\n  };\n\n  var toString = {}.toString;\n\n  var isarray = Array.isArray || function (arr) {\n    return toString.call(arr) == '[object Array]';\n  };\n\n  var isobject$1 = function isObject(val) {\n    return val != null && typeof val === 'object' && isarray(val) === false;\n  };\n\n  /*!\n   * has-values <https://github.com/jonschlinkert/has-values>\n   *\n   * Copyright (c) 2014-2015, Jon Schlinkert.\n   * Licensed under the MIT License.\n   */\n\n  var hasValues = function hasValue(o, noZero) {\n    if (o === null || o === undefined) {\n      return false;\n    }\n\n    if (typeof o === 'boolean') {\n      return true;\n    }\n\n    if (typeof o === 'number') {\n      if (o === 0 && noZero === true) {\n        return false;\n      }\n      return true;\n    }\n\n    if (o.length !== undefined) {\n      return o.length !== 0;\n    }\n\n    for (var key in o) {\n      if (o.hasOwnProperty(key)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /*!\n   * get-value <https://github.com/jonschlinkert/get-value>\n   *\n   * Copyright (c) 2014-2015, Jon Schlinkert.\n   * Licensed under the MIT License.\n   */\n\n  var getValue = function(obj, prop, a, b, c) {\n    if (!isObject(obj) || !prop) {\n      return obj;\n    }\n\n    prop = toString$1(prop);\n\n    // allowing for multiple properties to be passed as\n    // a string or array, but much faster (3-4x) than doing\n    // `[].slice.call(arguments)`\n    if (a) prop += '.' + toString$1(a);\n    if (b) prop += '.' + toString$1(b);\n    if (c) prop += '.' + toString$1(c);\n\n    if (prop in obj) {\n      return obj[prop];\n    }\n\n    var segs = prop.split('.');\n    var len = segs.length;\n    var i = -1;\n\n    while (obj && (++i < len)) {\n      var key = segs[i];\n      while (key[key.length - 1] === '\\\\') {\n        key = key.slice(0, -1) + '.' + segs[++i];\n      }\n      obj = obj[key];\n    }\n    return obj;\n  };\n\n  function isObject(val) {\n    return val !== null && (typeof val === 'object' || typeof val === 'function');\n  }\n\n  function toString$1(val) {\n    if (!val) return '';\n    if (Array.isArray(val)) {\n      return val.join('.');\n    }\n    return val;\n  }\n\n  var hasValue = function(obj, prop, noZero) {\n    if (isobject$1(obj)) {\n      return hasValues(getValue(obj, prop), noZero);\n    }\n    return hasValues(obj, prop);\n  };\n\n  var unsetValue = function unset(obj, prop) {\n    if (!isobject(obj)) {\n      throw new TypeError('expected an object.');\n    }\n    if (obj.hasOwnProperty(prop)) {\n      delete obj[prop];\n      return true;\n    }\n\n    if (hasValue(obj, prop)) {\n      var segs = prop.split('.');\n      var last = segs.pop();\n      while (segs.length && segs[segs.length - 1].slice(-1) === '\\\\') {\n        last = segs.pop().slice(0, -1) + '.' + last;\n      }\n      while (segs.length) obj = obj[prop = segs.shift()];\n      return (delete obj[last]);\n    }\n    return true;\n  };\n\n  var omitDeep = function omitDeep(value, keys) {\n    if (typeof value === 'undefined') {\n      return {};\n    }\n\n    if (Array.isArray(value)) {\n      for (var i = 0; i < value.length; i++) {\n        value[i] = omitDeep(value[i], keys);\n      }\n      return value;\n    }\n\n    if (!isPlainObject(value)) {\n      return value;\n    }\n\n    if (typeof keys === 'string') {\n      keys = [keys];\n    }\n\n    if (!Array.isArray(keys)) {\n      return value;\n    }\n\n    for (var j = 0; j < keys.length; j++) {\n      unsetValue(value, keys[j]);\n    }\n\n    for (var key in value) {\n      if (value.hasOwnProperty(key)) {\n        value[key] = omitDeep(value[key], keys);\n      }\n    }\n\n    return value;\n  };\n\n  /*!\n   * Determine if an object is a Buffer\n   *\n   * @author   Feross Aboukhadijeh <https://feross.org>\n   * @license  MIT\n   */\n\n  // The _isBuffer check is for Safari 5-7 support, because it's missing\n  // Object.prototype.constructor. Remove this eventually\n  var isBuffer_1 = function (obj) {\n    return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n  };\n\n  function isBuffer (obj) {\n    return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n  }\n\n  // For Node v0.10 support. Remove this eventually.\n  function isSlowBuffer (obj) {\n    return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n  }\n\n  var toString$2 = Object.prototype.toString;\n\n  /**\n   * Get the native `typeof` a value.\n   *\n   * @param  {*} `val`\n   * @return {*} Native javascript type\n   */\n\n  var kindOf = function kindOf(val) {\n    // primitivies\n    if (typeof val === 'undefined') {\n      return 'undefined';\n    }\n    if (val === null) {\n      return 'null';\n    }\n    if (val === true || val === false || val instanceof Boolean) {\n      return 'boolean';\n    }\n    if (typeof val === 'string' || val instanceof String) {\n      return 'string';\n    }\n    if (typeof val === 'number' || val instanceof Number) {\n      return 'number';\n    }\n\n    // functions\n    if (typeof val === 'function' || val instanceof Function) {\n      return 'function';\n    }\n\n    // array\n    if (typeof Array.isArray !== 'undefined' && Array.isArray(val)) {\n      return 'array';\n    }\n\n    // check for instances of RegExp and Date before calling `toString`\n    if (val instanceof RegExp) {\n      return 'regexp';\n    }\n    if (val instanceof Date) {\n      return 'date';\n    }\n\n    // other objects\n    var type = toString$2.call(val);\n\n    if (type === '[object RegExp]') {\n      return 'regexp';\n    }\n    if (type === '[object Date]') {\n      return 'date';\n    }\n    if (type === '[object Arguments]') {\n      return 'arguments';\n    }\n    if (type === '[object Error]') {\n      return 'error';\n    }\n\n    // buffer\n    if (isBuffer_1(val)) {\n      return 'buffer';\n    }\n\n    // es6: Map, WeakMap, Set, WeakSet\n    if (type === '[object Set]') {\n      return 'set';\n    }\n    if (type === '[object WeakSet]') {\n      return 'weakset';\n    }\n    if (type === '[object Map]') {\n      return 'map';\n    }\n    if (type === '[object WeakMap]') {\n      return 'weakmap';\n    }\n    if (type === '[object Symbol]') {\n      return 'symbol';\n    }\n\n    // typed arrays\n    if (type === '[object Int8Array]') {\n      return 'int8array';\n    }\n    if (type === '[object Uint8Array]') {\n      return 'uint8array';\n    }\n    if (type === '[object Uint8ClampedArray]') {\n      return 'uint8clampedarray';\n    }\n    if (type === '[object Int16Array]') {\n      return 'int16array';\n    }\n    if (type === '[object Uint16Array]') {\n      return 'uint16array';\n    }\n    if (type === '[object Int32Array]') {\n      return 'int32array';\n    }\n    if (type === '[object Uint32Array]') {\n      return 'uint32array';\n    }\n    if (type === '[object Float32Array]') {\n      return 'float32array';\n    }\n    if (type === '[object Float64Array]') {\n      return 'float64array';\n    }\n\n    // must be a plain object\n    return 'object';\n  };\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var renameKeys = createCommonjsModule(function (module) {\n  (function() {\n\n    function rename(obj, fn) {\n      if (typeof fn !== 'function') {\n        return obj;\n      }\n\n      var res = {};\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          res[fn(key, obj[key]) || key] = obj[key];\n        }\n      }\n      return res;\n    }\n\n    if ( module.exports) {\n      module.exports = rename;\n    } else {\n      {\n        window.rename = rename;\n      }\n    }\n  })();\n  });\n\n  /**\n   * Expose `renameDeep`\n   */\n\n  var deepRenameKeys = function renameDeep(obj, cb) {\n    var type = kindOf(obj);\n\n    if (type !== 'object' && type !== 'array') {\n      throw new Error('expected an object');\n    }\n\n    var res = [];\n    if (type === 'object') {\n      obj = renameKeys(obj, cb);\n      res = {};\n    }\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        var val = obj[key];\n        if (kindOf(val) === 'object' || kindOf(val) === 'array') {\n          res[key] = renameDeep(val, cb);\n        } else {\n          res[key] = val;\n        }\n      }\n    }\n    return res;\n  };\n\n  var eventemitter3 = createCommonjsModule(function (module) {\n\n  var has = Object.prototype.hasOwnProperty\n    , prefix = '~';\n\n  /**\n   * Constructor to create a storage for our `EE` objects.\n   * An `Events` instance is a plain object whose properties are event names.\n   *\n   * @constructor\n   * @api private\n   */\n  function Events() {}\n\n  //\n  // We try to not inherit from `Object.prototype`. In some engines creating an\n  // instance in this way is faster than calling `Object.create(null)` directly.\n  // If `Object.create(null)` is not supported we prefix the event names with a\n  // character to make sure that the built-in object properties are not\n  // overridden or used as an attack vector.\n  //\n  if (Object.create) {\n    Events.prototype = Object.create(null);\n\n    //\n    // This hack is needed because the `__proto__` property is still inherited in\n    // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n    //\n    if (!new Events().__proto__) prefix = false;\n  }\n\n  /**\n   * Representation of a single event listener.\n   *\n   * @param {Function} fn The listener function.\n   * @param {Mixed} context The context to invoke the listener with.\n   * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n   * @constructor\n   * @api private\n   */\n  function EE(fn, context, once) {\n    this.fn = fn;\n    this.context = context;\n    this.once = once || false;\n  }\n\n  /**\n   * Minimal `EventEmitter` interface that is molded against the Node.js\n   * `EventEmitter` interface.\n   *\n   * @constructor\n   * @api public\n   */\n  function EventEmitter() {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  /**\n   * Return an array listing the events for which the emitter has registered\n   * listeners.\n   *\n   * @returns {Array}\n   * @api public\n   */\n  EventEmitter.prototype.eventNames = function eventNames() {\n    var names = []\n      , events\n      , name;\n\n    if (this._eventsCount === 0) return names;\n\n    for (name in (events = this._events)) {\n      if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      return names.concat(Object.getOwnPropertySymbols(events));\n    }\n\n    return names;\n  };\n\n  /**\n   * Return the listeners registered for a given event.\n   *\n   * @param {String|Symbol} event The event name.\n   * @param {Boolean} exists Only check if there are listeners.\n   * @returns {Array|Boolean}\n   * @api public\n   */\n  EventEmitter.prototype.listeners = function listeners(event, exists) {\n    var evt = prefix ? prefix + event : event\n      , available = this._events[evt];\n\n    if (exists) return !!available;\n    if (!available) return [];\n    if (available.fn) return [available.fn];\n\n    for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n      ee[i] = available[i].fn;\n    }\n\n    return ee;\n  };\n\n  /**\n   * Calls each of the listeners registered for a given event.\n   *\n   * @param {String|Symbol} event The event name.\n   * @returns {Boolean} `true` if the event had listeners, else `false`.\n   * @api public\n   */\n  EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n    var evt = prefix ? prefix + event : event;\n\n    if (!this._events[evt]) return false;\n\n    var listeners = this._events[evt]\n      , len = arguments.length\n      , args\n      , i;\n\n    if (listeners.fn) {\n      if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n      switch (len) {\n        case 1: return listeners.fn.call(listeners.context), true;\n        case 2: return listeners.fn.call(listeners.context, a1), true;\n        case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n        case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n        case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n        case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n      }\n\n      for (i = 1, args = new Array(len -1); i < len; i++) {\n        args[i - 1] = arguments[i];\n      }\n\n      listeners.fn.apply(listeners.context, args);\n    } else {\n      var length = listeners.length\n        , j;\n\n      for (i = 0; i < length; i++) {\n        if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n        switch (len) {\n          case 1: listeners[i].fn.call(listeners[i].context); break;\n          case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n          case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n          case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n          default:\n            if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n              args[j - 1] = arguments[j];\n            }\n\n            listeners[i].fn.apply(listeners[i].context, args);\n        }\n      }\n    }\n\n    return true;\n  };\n\n  /**\n   * Add a listener for a given event.\n   *\n   * @param {String|Symbol} event The event name.\n   * @param {Function} fn The listener function.\n   * @param {Mixed} [context=this] The context to invoke the listener with.\n   * @returns {EventEmitter} `this`.\n   * @api public\n   */\n  EventEmitter.prototype.on = function on(event, fn, context) {\n    var listener = new EE(fn, context || this)\n      , evt = prefix ? prefix + event : event;\n\n    if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n    else if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [this._events[evt], listener];\n\n    return this;\n  };\n\n  /**\n   * Add a one-time listener for a given event.\n   *\n   * @param {String|Symbol} event The event name.\n   * @param {Function} fn The listener function.\n   * @param {Mixed} [context=this] The context to invoke the listener with.\n   * @returns {EventEmitter} `this`.\n   * @api public\n   */\n  EventEmitter.prototype.once = function once(event, fn, context) {\n    var listener = new EE(fn, context || this, true)\n      , evt = prefix ? prefix + event : event;\n\n    if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n    else if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [this._events[evt], listener];\n\n    return this;\n  };\n\n  /**\n   * Remove the listeners of a given event.\n   *\n   * @param {String|Symbol} event The event name.\n   * @param {Function} fn Only remove the listeners that match this function.\n   * @param {Mixed} context Only remove the listeners that have this context.\n   * @param {Boolean} once Only remove one-time listeners.\n   * @returns {EventEmitter} `this`.\n   * @api public\n   */\n  EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n    var evt = prefix ? prefix + event : event;\n\n    if (!this._events[evt]) return this;\n    if (!fn) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n      return this;\n    }\n\n    var listeners = this._events[evt];\n\n    if (listeners.fn) {\n      if (\n           listeners.fn === fn\n        && (!once || listeners.once)\n        && (!context || listeners.context === context)\n      ) {\n        if (--this._eventsCount === 0) this._events = new Events();\n        else delete this._events[evt];\n      }\n    } else {\n      for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n\n      //\n      // Reset the array, or remove it completely if we have no more listeners.\n      //\n      if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n      else if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n\n    return this;\n  };\n\n  /**\n   * Remove all listeners, or those of the specified event.\n   *\n   * @param {String|Symbol} [event] The event name.\n   * @returns {EventEmitter} `this`.\n   * @api public\n   */\n  EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n    var evt;\n\n    if (event) {\n      evt = prefix ? prefix + event : event;\n      if (this._events[evt]) {\n        if (--this._eventsCount === 0) this._events = new Events();\n        else delete this._events[evt];\n      }\n    } else {\n      this._events = new Events();\n      this._eventsCount = 0;\n    }\n\n    return this;\n  };\n\n  //\n  // Alias methods names because people roll like that.\n  //\n  EventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  //\n  // This function doesn't apply anymore.\n  //\n  EventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n    return this;\n  };\n\n  //\n  // Expose the prefix.\n  //\n  EventEmitter.prefixed = prefix;\n\n  //\n  // Allow `EventEmitter` to be imported as module namespace.\n  //\n  EventEmitter.EventEmitter = EventEmitter;\n\n  //\n  // Expose the module.\n  //\n  {\n    module.exports = EventEmitter;\n  }\n  });\n\n  function _defineProperty$1(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n  var noop = function noop() {};\n\n  var State = {\n      data: 'state-data',\n      cdata: 'state-cdata',\n      tagBegin: 'state-tag-begin',\n      tagName: 'state-tag-name',\n      tagEnd: 'state-tag-end',\n      attributeNameStart: 'state-attribute-name-start',\n      attributeName: 'state-attribute-name',\n      attributeNameEnd: 'state-attribute-name-end',\n      attributeValueBegin: 'state-attribute-value-begin',\n      attributeValue: 'state-attribute-value'\n  };\n\n  var Action = {\n      lt: 'action-lt',\n      gt: 'action-gt',\n      space: 'action-space',\n      equal: 'action-equal',\n      quote: 'action-quote',\n      slash: 'action-slash',\n      char: 'action-char',\n      error: 'action-error'\n  };\n\n  var Type = {\n      text: 'text',\n      openTag: 'open-tag',\n      closeTag: 'close-tag',\n      attributeName: 'attribute-name',\n      attributeValue: 'attribute-value'\n  };\n\n  var charToAction = {\n      ' ': Action.space,\n      '\\t': Action.space,\n      '\\n': Action.space,\n      '\\r': Action.space,\n      '<': Action.lt,\n      '>': Action.gt,\n      '\"': Action.quote,\n      \"'\": Action.quote,\n      '=': Action.equal,\n      '/': Action.slash\n  };\n\n  var getAction = function getAction(char) {\n      return charToAction[char] || Action.char;\n  };\n\n  /**\n   * @param  {Object} options\n   * @param  {Boolean} options.debug\n   * @return {Object}\n   */\n  var create = function create(options) {\n      var _State$data, _State$tagBegin, _State$tagName, _State$tagEnd, _State$attributeNameS, _State$attributeName, _State$attributeNameE, _State$attributeValue, _State$attributeValue2, _lexer$stateMachine;\n\n      options = Object.assign({ debug: false }, options);\n      var lexer = new eventemitter3();\n      var state = State.data;\n      var data = '';\n      var tagName = '';\n      var attrName = '';\n      var attrValue = '';\n      var isClosing = '';\n      var openingQuote = '';\n\n      var emit = function emit(type, value) {\n          // for now, ignore tags like: '?xml', '!DOCTYPE' or comments\n          if (tagName[0] === '?' || tagName[0] === '!') {\n              return;\n          }\n          var event = { type: type, value: value };\n          if (options.debug) {\n              console.log('emit:', event);\n          }\n          lexer.emit('data', event);\n      };\n\n      lexer.stateMachine = (_lexer$stateMachine = {}, _defineProperty$1(_lexer$stateMachine, State.data, (_State$data = {}, _defineProperty$1(_State$data, Action.lt, function () {\n          if (data.trim()) {\n              emit(Type.text, data);\n          }\n          tagName = '';\n          isClosing = false;\n          state = State.tagBegin;\n      }), _defineProperty$1(_State$data, Action.char, function (char) {\n          data += char;\n      }), _State$data)), _defineProperty$1(_lexer$stateMachine, State.cdata, _defineProperty$1({}, Action.char, function (char) {\n          data += char;\n          if (data.substr(-3) === ']]>') {\n              emit(Type.text, data.slice(0, -3));\n              data = '';\n              state = State.data;\n          }\n      })), _defineProperty$1(_lexer$stateMachine, State.tagBegin, (_State$tagBegin = {}, _defineProperty$1(_State$tagBegin, Action.space, noop), _defineProperty$1(_State$tagBegin, Action.char, function (char) {\n          tagName = char;\n          state = State.tagName;\n      }), _defineProperty$1(_State$tagBegin, Action.slash, function () {\n          tagName = '';\n          isClosing = true;\n      }), _State$tagBegin)), _defineProperty$1(_lexer$stateMachine, State.tagName, (_State$tagName = {}, _defineProperty$1(_State$tagName, Action.space, function () {\n          if (isClosing) {\n              state = State.tagEnd;\n          } else {\n              state = State.attributeNameStart;\n              emit(Type.openTag, tagName);\n          }\n      }), _defineProperty$1(_State$tagName, Action.gt, function () {\n          if (isClosing) {\n              emit(Type.closeTag, tagName);\n          } else {\n              emit(Type.openTag, tagName);\n          }\n          data = '';\n          state = State.data;\n      }), _defineProperty$1(_State$tagName, Action.slash, function () {\n          state = State.tagEnd;\n          emit(Type.openTag, tagName);\n      }), _defineProperty$1(_State$tagName, Action.char, function (char) {\n          tagName += char;\n          if (tagName === '![CDATA[') {\n              state = State.cdata;\n              data = '';\n              tagName = '';\n          }\n      }), _State$tagName)), _defineProperty$1(_lexer$stateMachine, State.tagEnd, (_State$tagEnd = {}, _defineProperty$1(_State$tagEnd, Action.gt, function () {\n          emit(Type.closeTag, tagName);\n          data = '';\n          state = State.data;\n      }), _defineProperty$1(_State$tagEnd, Action.char, noop), _State$tagEnd)), _defineProperty$1(_lexer$stateMachine, State.attributeNameStart, (_State$attributeNameS = {}, _defineProperty$1(_State$attributeNameS, Action.char, function (char) {\n          attrName = char;\n          state = State.attributeName;\n      }), _defineProperty$1(_State$attributeNameS, Action.gt, function () {\n          data = '';\n          state = State.data;\n      }), _defineProperty$1(_State$attributeNameS, Action.space, noop), _defineProperty$1(_State$attributeNameS, Action.slash, function () {\n          isClosing = true;\n          state = State.tagEnd;\n      }), _State$attributeNameS)), _defineProperty$1(_lexer$stateMachine, State.attributeName, (_State$attributeName = {}, _defineProperty$1(_State$attributeName, Action.space, function () {\n          state = State.attributeNameEnd;\n      }), _defineProperty$1(_State$attributeName, Action.equal, function () {\n          emit(Type.attributeName, attrName);\n          state = State.attributeValueBegin;\n      }), _defineProperty$1(_State$attributeName, Action.gt, function () {\n          attrValue = '';\n          emit(Type.attributeName, attrName);\n          emit(Type.attributeValue, attrValue);\n          data = '';\n          state = State.data;\n      }), _defineProperty$1(_State$attributeName, Action.slash, function () {\n          isClosing = true;\n          attrValue = '';\n          emit(Type.attributeName, attrName);\n          emit(Type.attributeValue, attrValue);\n          state = State.tagEnd;\n      }), _defineProperty$1(_State$attributeName, Action.char, function (char) {\n          attrName += char;\n      }), _State$attributeName)), _defineProperty$1(_lexer$stateMachine, State.attributeNameEnd, (_State$attributeNameE = {}, _defineProperty$1(_State$attributeNameE, Action.space, noop), _defineProperty$1(_State$attributeNameE, Action.equal, function () {\n          emit(Type.attributeName, attrName);\n          state = State.attributeValueBegin;\n      }), _defineProperty$1(_State$attributeNameE, Action.gt, function () {\n          attrValue = '';\n          emit(Type.attributeName, attrName);\n          emit(Type.attributeValue, attrValue);\n          data = '';\n          state = State.data;\n      }), _defineProperty$1(_State$attributeNameE, Action.char, function (char) {\n          attrValue = '';\n          emit(Type.attributeName, attrName);\n          emit(Type.attributeValue, attrValue);\n          attrName = char;\n          state = State.attributeName;\n      }), _State$attributeNameE)), _defineProperty$1(_lexer$stateMachine, State.attributeValueBegin, (_State$attributeValue = {}, _defineProperty$1(_State$attributeValue, Action.space, noop), _defineProperty$1(_State$attributeValue, Action.quote, function (char) {\n          openingQuote = char;\n          attrValue = '';\n          state = State.attributeValue;\n      }), _defineProperty$1(_State$attributeValue, Action.gt, function () {\n          attrValue = '';\n          emit(Type.attributeValue, attrValue);\n          data = '';\n          state = State.data;\n      }), _defineProperty$1(_State$attributeValue, Action.char, function (char) {\n          openingQuote = '';\n          attrValue = char;\n          state = State.attributeValue;\n      }), _State$attributeValue)), _defineProperty$1(_lexer$stateMachine, State.attributeValue, (_State$attributeValue2 = {}, _defineProperty$1(_State$attributeValue2, Action.space, function (char) {\n          if (openingQuote) {\n              attrValue += char;\n          } else {\n              emit(Type.attributeValue, attrValue);\n              state = State.attributeNameStart;\n          }\n      }), _defineProperty$1(_State$attributeValue2, Action.quote, function (char) {\n          if (openingQuote === char) {\n              emit(Type.attributeValue, attrValue);\n              state = State.attributeNameStart;\n          } else {\n              attrValue += char;\n          }\n      }), _defineProperty$1(_State$attributeValue2, Action.gt, function (char) {\n          if (openingQuote) {\n              attrValue += char;\n          } else {\n              emit(Type.attributeValue, attrValue);\n              data = '';\n              state = State.data;\n          }\n      }), _defineProperty$1(_State$attributeValue2, Action.slash, function (char) {\n          if (openingQuote) {\n              attrValue += char;\n          } else {\n              emit(Type.attributeValue, attrValue);\n              isClosing = true;\n              state = State.tagEnd;\n          }\n      }), _defineProperty$1(_State$attributeValue2, Action.char, function (char) {\n          attrValue += char;\n      }), _State$attributeValue2)), _lexer$stateMachine);\n\n      var step = function step(char) {\n          if (options.debug) {\n              console.log(state, char);\n          }\n          var actions = lexer.stateMachine[state];\n          var action = actions[getAction(char)] || actions[Action.error] || actions[Action.char];\n          action(char);\n      };\n\n      lexer.write = function (str) {\n          var len = str.length;\n          for (var i = 0; i < len; i++) {\n              step(str[i]);\n          }\n      };\n\n      return lexer;\n  };\n\n  var lexer = {\n      State: State,\n      Action: Action,\n      Type: Type,\n      create: create\n  };\n\n  var Type$1 = lexer.Type;\n\n  var NodeType = {\n      element: 'element',\n      text: 'text'\n  };\n\n  var createNode = function createNode(params) {\n      return Object.assign({\n          name: '',\n          type: NodeType.element,\n          value: '',\n          parent: null,\n          attributes: {},\n          children: []\n      }, params);\n  };\n\n  var create$1 = function create(options) {\n      options = Object.assign({\n          stream: false,\n          parentNodes: true,\n          doneEvent: 'done',\n          tagPrefix: 'tag:',\n          emitTopLevelOnly: false,\n          debug: false\n      }, options);\n\n      var lexer$1 = void 0,\n          rootNode = void 0,\n          current = void 0,\n          attrName = void 0;\n\n      var reader = new eventemitter3();\n\n      var handleLexerData = function handleLexerData(data) {\n          switch (data.type) {\n\n              case Type$1.openTag:\n                  if (current === null) {\n                      current = rootNode;\n                      current.name = data.value;\n                  } else {\n                      var node = createNode({\n                          name: data.value,\n                          parent: current\n                      });\n                      current.children.push(node);\n                      current = node;\n                  }\n                  break;\n\n              case Type$1.closeTag:\n                  var parent = current.parent;\n                  if (!options.parentNodes) {\n                      current.parent = null;\n                  }\n                  if (current.name !== data.value) {\n                      // ignore unexpected closing tag\n                      break;\n                  }\n                  if (options.stream && parent === rootNode) {\n                      rootNode.children = [];\n                      // do not expose parent node in top level nodes\n                      current.parent = null;\n                  }\n                  if (!options.emitTopLevelOnly || parent === rootNode) {\n                      reader.emit(options.tagPrefix + current.name, current);\n                      reader.emit('tag', current.name, current);\n                  }\n                  if (current === rootNode) {\n                      // end of document, stop listening\n                      lexer$1.removeAllListeners('data');\n                      reader.emit(options.doneEvent, current);\n                      rootNode = null;\n                  }\n                  current = parent;\n                  break;\n\n              case Type$1.text:\n                  if (current) {\n                      current.children.push(createNode({\n                          type: NodeType.text,\n                          value: data.value,\n                          parent: options.parentNodes ? current : null\n                      }));\n                  }\n                  break;\n\n              case Type$1.attributeName:\n                  attrName = data.value;\n                  current.attributes[attrName] = '';\n                  break;\n\n              case Type$1.attributeValue:\n                  current.attributes[attrName] = data.value;\n                  break;\n          }\n      };\n\n      reader.reset = function () {\n          lexer$1 = lexer.create({ debug: options.debug });\n          lexer$1.on('data', handleLexerData);\n          rootNode = createNode();\n          current = null;\n          attrName = '';\n          reader.parse = lexer$1.write;\n      };\n\n      reader.reset();\n      return reader;\n  };\n\n  var parseSync = function parseSync(xml, options) {\n      options = Object.assign({}, options, { stream: false, tagPrefix: ':' });\n      var reader = create$1(options);\n      var res = void 0;\n      reader.on('done', function (ast) {\n          res = ast;\n      });\n      reader.parse(xml);\n      return res;\n  };\n\n  var reader = {\n      parseSync: parseSync,\n      create: create$1,\n      NodeType: NodeType\n  };\n  var reader_1 = reader.parseSync;\n\n  var parseInput = function parseInput(input) {\n    var parsed = reader_1(input, {\n      parentNodes: false\n    });\n    var hasMoreChildren = parsed.name === 'root' && parsed.children.length > 1;\n    var isValid = hasMoreChildren ? parsed.children.reduce(function (acc, _ref) {\n      var name = _ref.name;\n      return !acc ? name === 'svg' : true;\n    }, false) : parsed.children[0].name === 'svg';\n\n    if (isValid) {\n      return hasMoreChildren ? parsed : parsed.children[0];\n    } else {\n      throw Error('nothing to parse');\n    }\n  };\n  var removeDoctype = function removeDoctype(input) {\n    return input.replace(/<[\\/]{0,1}(\\!?DOCTYPE|\\??xml)[^><]*>/gi, '');\n  };\n  var wrapInput = function wrapInput(input) {\n    return \"<root>\".concat(input, \"</root>\");\n  };\n  var removeAttrs = function removeAttrs(obj) {\n    return omitDeep(obj, ['parent']);\n  };\n  var camelize = function camelize(node) {\n    return deepRenameKeys(node, function (key) {\n      if (!notCamelcase(key)) {\n        return toCamelCase(key);\n      }\n\n      return key;\n    });\n  };\n  var toCamelCase = function toCamelCase(prop) {\n    return prop.replace(/[-|:]([a-z])/gi, function (all, letter) {\n      return letter.toUpperCase();\n    });\n  };\n\n  var notCamelcase = function notCamelcase(prop) {\n    return /^(data|aria)(-\\w+)/.test(prop);\n  };\n\n  var escapeText = function escapeText(text) {\n    if (text) {\n      var str = String(text);\n      return /[&<>]/.test(str) ? \"<![CDATA[\".concat(str.replace(/]]>/, ']]]]><![CDATA[>'), \"]]>\") : str;\n    }\n\n    return '';\n  };\n  var escapeAttr = function escapeAttr(attr) {\n    return String(attr).replace(/&/g, '&amp;').replace(/'/g, '&apos;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  };\n\n  var svgsonSync = function svgsonSync(input) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$transformNode = _ref.transformNode,\n        transformNode = _ref$transformNode === void 0 ? function (node) {\n      return node;\n    } : _ref$transformNode,\n        _ref$camelcase = _ref.camelcase,\n        camelcase = _ref$camelcase === void 0 ? false : _ref$camelcase;\n\n    var wrap = function wrap(input) {\n      var cleanInput = removeDoctype(input);\n      return wrapInput(cleanInput);\n    };\n\n    var unwrap = function unwrap(res) {\n      return res.name === 'root' ? res.children : res;\n    };\n\n    var applyFilters = function applyFilters(input) {\n      var applyTransformNode = function applyTransformNode(node) {\n        var children = node.children;\n        return node.name === 'root' ? children.map(applyTransformNode) : _objectSpread2(_objectSpread2({}, transformNode(node)), children && children.length > 0 ? {\n          children: children.map(applyTransformNode)\n        } : {});\n      };\n\n      var n;\n      n = removeAttrs(input);\n      n = applyTransformNode(n);\n\n      if (camelcase) {\n        n = camelize(n);\n      }\n\n      return n;\n    };\n\n    return unwrap(applyFilters(parseInput(wrap(input))));\n  };\n  function svgson() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return new Promise(function (resolve, reject) {\n      try {\n        var res = svgsonSync.apply(void 0, args);\n        resolve(res);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  var stringify = function stringify(ast) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$transformAttr = _ref.transformAttr,\n        transformAttr = _ref$transformAttr === void 0 ? function (key, value, escape) {\n      return \"\".concat(key, \"=\\\"\").concat(escape(value), \"\\\"\");\n    } : _ref$transformAttr,\n        _ref$selfClose = _ref.selfClose,\n        selfClose = _ref$selfClose === void 0 ? true : _ref$selfClose;\n\n    if (Array.isArray(ast)) {\n      return ast.map(function (ast) {\n        return stringify(ast, {\n          transformAttr: transformAttr,\n          selfClose: selfClose\n        });\n      }).join('');\n    }\n\n    if (ast.type === 'text') {\n      return escapeText(ast.value);\n    }\n\n    var attributes = '';\n\n    for (var attr in ast.attributes) {\n      var attrStr = transformAttr(attr, ast.attributes[attr], escapeAttr, ast.name);\n      attributes += attrStr ? \" \".concat(attrStr) : '';\n    }\n\n    return ast.children.length || !selfClose ? \"<\".concat(ast.name).concat(attributes, \">\").concat(stringify(ast.children, {\n      transformAttr: transformAttr,\n      selfClose: selfClose\n    }), \"</\").concat(ast.name, \">\") : \"<\".concat(ast.name).concat(attributes, \"/>\");\n  };\n\n  var indexUmd = Object.assign({}, {\n    parse: svgson,\n    parseSync: svgsonSync,\n    stringify: stringify\n  });\n\n  return indexUmd;\n\n})));\n","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n\nexport * from './khmerChessPieces';\n","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nimport svgson, { INode } from 'svgson';\n\nconst king = require('../font/svg-optimized/$K_KhmerChess.svg');\nconst queen = require('../font/svg-optimized/$Q_KhmerChess.svg');\nconst general = require('../font/svg-optimized/$G_KhmerChess.svg');\nconst horse = require('../font/svg-optimized/$H_KhmerChess.svg');\nconst boat = require('../font/svg-optimized/$B_KhmerChess.svg');\nconst fish = require('../font/svg-optimized/$F_KhmerChess.svg');\nconst transformFish = require('../font/svg-optimized/$T_KhmerChess.svg');\n\nclass SVGManager {\n    svg: string;\n    svgsonInstant: INode;\n    constructor(svg: string) {\n        this.svg = svg;\n    }\n    init() {\n        this.svgsonInstant = svgson.parseSync(this.svg);\n    }\n    get pathData(): string[] {\n        if (!this.svgsonInstant) {\n            throw new Error('Call init() first');\n        }\n        return this.svgsonInstant.children.map((element: INode) => {\n            return element.attributes.d;\n        })\n    }\n    get svgString(): string {\n        if (!this.svgsonInstant) {\n            throw new Error('Call init() first');\n        }\n        return svgson.stringify(this.svgsonInstant);\n    }\n}\n\nexport const kingSVG = new SVGManager(king);\nexport const queenSVG = new SVGManager(queen);\nexport const generalSVG = new SVGManager(general);\nexport const horseSVG = new SVGManager(horse);\nexport const boatSVG = new SVGManager(boat);\nexport const fishSVG = new SVGManager(fish);\nexport const transformFishSVG = new SVGManager(transformFish);\n","import {\r\n    BOARD_NOTE_V_PREFIX_CLASS,\r\n    BOARD_NOTE_H_PREFIX_CLASS,\r\n    CSS_P2P,\r\n} from './providers/constance';\r\nimport CellManager from './CellManager';\r\nimport OptionsManager from './OptionsManager';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\nimport {\r\n    CELL_COUNT,\r\n    KhmerChess,\r\n    ListenerType,\r\n    PieceIndex,\r\n    Point,\r\n    ROW_NUMBER,\r\n} from 'khmer-chess';\r\nimport BoardManagerEventController from './event/BoardManagerEventController';\r\nimport BoardStatusEventController from './event/BoardStatusEventController';\r\nimport { BoardStatusEvent } from './event/BoardStatusEvent';\r\n\r\nexport default class BoardManager {\r\n    _cellManagers: CellManager[] = Array.from({ length: CELL_COUNT }, (_, i) => {\r\n        const dom = document.createElement('div');\r\n        return new CellManager(Point.fromIndex(i), dom, null);\r\n    });\r\n    options: OptionsManager;\r\n    khmerChessBoard: KhmerChessBoard;\r\n    khmerChess: KhmerChess;\r\n    isUpsideDown = false;\r\n    boardStatusEventController: BoardStatusEventController;\r\n    boardEventController: BoardManagerEventController<CellManager>;\r\n    constructor() {\r\n        this.boardStatusEventController = new BoardStatusEventController();\r\n        this.boardEventController = new BoardManagerEventController();\r\n    }\r\n    setProps(khmerChessBoard: KhmerChessBoard) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n        this.khmerChess = khmerChessBoard.khmerChess;\r\n        this.options = khmerChessBoard.options;\r\n    }\r\n    selectCell(cell: CellManager) {\r\n        this.boardEventController.click(cell);\r\n        const selectedList = this.selectedCells;\r\n        const selectedCell = selectedList[0];\r\n        if (selectedCell) {\r\n            if (cell === selectedCell) {\r\n                cell.select(false);\r\n                return this.boardEventController.deselected(selectedCell);\r\n            } else {\r\n                if (cell.isCanMove) {\r\n                    return this.boardEventController.attemptMove(selectedCell, cell);\r\n                }\r\n            }\r\n        }\r\n        if (cell.isCanSelect) {\r\n            if (selectedCell) {\r\n                selectedCell.select(false);\r\n                this.boardEventController.deselected(selectedCell);\r\n            }\r\n            cell.select(true);\r\n            return this.boardEventController.selected(cell);\r\n        }\r\n    }\r\n    attachClickEvent() {\r\n        this._cellManagers.forEach((cell) => {\r\n            return cell.setOnClick(this.selectCell.bind(this, cell));\r\n        });\r\n    }\r\n    detachClickEvent() {\r\n        this._cellManagers.forEach((cell) => {\r\n            return cell.removeOnClick();\r\n        });\r\n    }\r\n\r\n    set(i: number, cell: CellManager) {\r\n        this._cellManagers[i] = cell;\r\n        cell.setProps(this.khmerChessBoard);\r\n    }\r\n\r\n    get(index: number) {\r\n        return this._cellManagers[index];\r\n    }\r\n    getKing(color: string) {\r\n        const pieceIndex = this.khmerChess.kpgn.ren.board.getKing(color);\r\n        if (!pieceIndex) {\r\n            return null;\r\n        }\r\n        return this.get(pieceIndex.point.index);\r\n    }\r\n\r\n    getByIndexCode(indexCode: string) {\r\n        const index = Point.indexCodeToIndex(indexCode);\r\n        return this.get(index);\r\n    }\r\n\r\n    getByXY(x: number, y: number) {\r\n        const index = Point.xyToIndex(x, y);\r\n        return this.get(index);\r\n    }\r\n\r\n    flip() {\r\n        this.isUpsideDown = !this.isUpsideDown;\r\n        this._applyFlip();\r\n    }\r\n    _applyFlip() {\r\n        // backup\r\n        const backupPiecesList = this._cellManagers.map((cell) => {\r\n            return cell.clone();\r\n        });\r\n        const backupSelectedList = this.selectedCells.map((cell) => {\r\n            return cell.clone();\r\n        });\r\n        // clear\r\n        this.clearSelectedCells();\r\n        this.removePiecesFromCells();\r\n        // flip\r\n        this.applyFlippingFlag();\r\n        // restore\r\n        backupPiecesList.forEach((clonedCell) => {\r\n            const cell = this.getByXY(clonedCell.point.x, clonedCell.point.y);\r\n            cell.setPiece(clonedCell.piece);\r\n        });\r\n        backupSelectedList.forEach((clonedCell) => {\r\n            const cell = this.getByXY(clonedCell.point.x, clonedCell.point.y);\r\n            cell.select(true);\r\n        });\r\n    }\r\n\r\n    get pieceCells() {\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.piece;\r\n        });\r\n    }\r\n    get pieceInTurnCells() {\r\n        const turn = this.khmerChess.turn;\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.piece && cell.piece.color === turn;\r\n        });\r\n    }\r\n    get pieceNotInTurnCells() {\r\n        const turn = this.khmerChess.turn;\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.piece && cell.piece.color !== turn;\r\n        });\r\n    }\r\n    get selectedCells() {\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.isSelected;\r\n        });\r\n    }\r\n    get canMoveCells() {\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.isCanMove;\r\n        });\r\n    }\r\n    get movedCells() {\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.isMoved;\r\n        });\r\n    }\r\n    get attackedCells() {\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.isAttacked;\r\n        });\r\n    }\r\n    get turnCells() {\r\n        return this._cellManagers.filter((cell) => {\r\n            return cell.isTurning;\r\n        });\r\n    }\r\n    get piecesInBoard() {\r\n        return this._cellManagers.map((cell) => {\r\n            return cell.piece;\r\n        });\r\n    }\r\n    get isTurning() {\r\n        return !!this._cellManagers.find((cell) => {\r\n            return cell.isTurning;\r\n        });\r\n    }\r\n    toString() {\r\n        const pieceIndices = this.piecesInBoard.map((piece, i) => {\r\n            return new PieceIndex(Point.fromIndex(i), piece);\r\n        });\r\n        const str = this.khmerChess.kpgn.ren.board.toString(pieceIndices);\r\n        return str;\r\n    }\r\n\r\n    clearSelectedCells() {\r\n        this.selectedCells.forEach((cell) => {\r\n            cell.select(false);\r\n            this.boardEventController.deselected(cell);\r\n        });\r\n    }\r\n    clearCanMoveCells() {\r\n        this.canMoveCells.forEach((cell) => {\r\n            cell.clearCanMoved();\r\n        });\r\n    }\r\n\r\n    highlightMovedCells(fromCell: CellManager, toCell: CellManager) {\r\n        fromCell.moved();\r\n        toCell.moved();\r\n    }\r\n\r\n    clearMovedCells() {\r\n        this.movedCells.forEach((cell) => {\r\n            cell.clearMoved();\r\n        });\r\n    }\r\n\r\n    clearAttackCells() {\r\n        this.attackedCells.forEach((cell) => {\r\n            cell.attack(false);\r\n        });\r\n    }\r\n\r\n    enableTurnCells() {\r\n        this.pieceInTurnCells.forEach((cell) => {\r\n            cell.turn(true);\r\n        });\r\n    }\r\n\r\n    clearTurnCells() {\r\n        this.turnCells.forEach((cell) => {\r\n            cell.turn(false);\r\n        });\r\n    }\r\n\r\n    removePiecesFromCells() {\r\n        this._cellManagers.forEach((cell) => {\r\n            cell.removePiece();\r\n        });\r\n    }\r\n\r\n    applyFlippingFlag() {\r\n        this._cellManagers.forEach((cell) => {\r\n            cell.setFlipped(this.isUpsideDown);\r\n        });\r\n    }\r\n\r\n    setCellNote() {\r\n        for (let i = 0; i < ROW_NUMBER; i++) {\r\n            const cell = this.getByXY(i, 0);\r\n            cell.addClassName(`${BOARD_NOTE_H_PREFIX_CLASS}-${i + 1}`);\r\n            if (this.options.isEnglish) {\r\n                cell.addClassName(this.options.enClass);\r\n            }\r\n        }\r\n        for (let j = 0; j < ROW_NUMBER; j++) {\r\n            const cell = this.getByXY(0, j);\r\n            cell.addClassName(`${BOARD_NOTE_V_PREFIX_CLASS}-${j + 1}`);\r\n            if (this.options.isEnglish) {\r\n                cell.addClassName(this.options.enClass);\r\n            }\r\n        }\r\n    }\r\n    clearCellNote() {\r\n        for (let i = 0; i < ROW_NUMBER; i++) {\r\n            const cell = this.getByXY(i, 0);\r\n            cell.removeClassName(`${BOARD_NOTE_H_PREFIX_CLASS}-${i + 1}`);\r\n            cell.removeClassName(this.options.enClass);\r\n        }\r\n        for (let j = 0; j < ROW_NUMBER; j++) {\r\n            const cell = this.getByXY(0, j);\r\n            cell.removeClassName(`${BOARD_NOTE_V_PREFIX_CLASS}-${j + 1}`);\r\n            cell.removeClassName(this.options.enClass);\r\n        }\r\n    }\r\n\r\n    renderKhmerChessPieces() {\r\n        this.removePiecesFromCells();\r\n        this.khmerChess.piecesInBoard.forEach((piece, i) => {\r\n            const cell = this.get(i);\r\n            cell.setPiece(piece);\r\n        });\r\n    }\r\n\r\n    get isP2P() {\r\n        return this.khmerChessBoard.domRootBoard.classList.contains(CSS_P2P);\r\n    }\r\n\r\n    setP2P(b: boolean) {\r\n        this.khmerChessBoard.domRootBoard.classList.remove(CSS_P2P);\r\n        if (b) {\r\n            this.khmerChessBoard.domRootBoard.classList.add(CSS_P2P);\r\n        }\r\n        this.isUpsideDown = false;\r\n        this._applyFlip();\r\n    }\r\n\r\n    takeTurn() {\r\n        this.clearTurnCells();\r\n        this.enableTurnCells();\r\n        this.boardEventController.changeTurn();\r\n    }\r\n\r\n    checkBoardEvent() {\r\n        this.boardStatusEventController.checkBoardEvent(this.khmerChessBoard);\r\n    }\r\n    addBoardStatusEventListener(listener: ListenerType<BoardStatusEvent>) {\r\n        this.boardStatusEventController.addBoardStatusEventListener(listener);\r\n        this.checkBoardEvent();\r\n    }\r\n    removeBoardStatusEventListener(listener: ListenerType<BoardStatusEvent>) {\r\n        this.boardStatusEventController.removeBoardStatusEventListener(listener);\r\n    }\r\n\r\n    forceCount() {\r\n        const move = this.khmerChessBoard.playManager.currentMove;\r\n        if(move === null){\r\n            return false;\r\n        }\r\n        const ren = this.khmerChess.kpgn.ren;\r\n        if (!ren.countUp.isCounting && move.piece.colorOpponent === ren.turn) {\r\n            this.khmerChess.kpgn.ren.checkCountStatus(move, true);\r\n            this.khmerChessBoard.playManager.render();\r\n            if (move.isStartCounting) {\r\n                this.checkBoardEvent();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import {\r\n    Point,\r\n    Piece,\r\n    CELL_COUNT,\r\n    KhmerChess,\r\n} from 'khmer-chess';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\nimport OptionsManager from './OptionsManager';\r\nimport {\r\n    SELECTED_CLASS_NAME,\r\n    PIECE_CLASS_NAME,\r\n    ATTACKED_CLASS_NAME,\r\n    FLIPPED_CLASS,\r\n    MOVED_CLASS_NAME,\r\n    CAN_MOVE_CLASS_NAME,\r\n    TURN_CLASS_NAME,\r\n} from './providers/constance';\r\n\r\nexport default class CellManager {\r\n    point: Point;\r\n    isGraveyard = false;\r\n    containerDom: HTMLDivElement = document.createElement('td');\r\n    piece: Piece | null = null;\r\n    isUpsideDown = false;\r\n    options: OptionsManager;\r\n    khmerChessBoard: KhmerChessBoard;\r\n    khmerChess: KhmerChess;\r\n    constructor(point: Point, container: HTMLDivElement,\r\n        piece: Piece | null, isGraveyard = false) {\r\n        this.point = point;\r\n        this.containerDom = container;\r\n        this.setPiece(piece);\r\n        this.isGraveyard = isGraveyard;\r\n    }\r\n    setProps(khmerChessBoard?: KhmerChessBoard) {\r\n        if (khmerChessBoard) {\r\n            this.khmerChessBoard = khmerChessBoard;\r\n            this.khmerChess = khmerChessBoard.khmerChess;\r\n            this.options = khmerChessBoard.options;\r\n        }\r\n    }\r\n    removePieceClasses() {\r\n        this.removeClassName(PIECE_CLASS_NAME);\r\n        Piece.colorChars.forEach((color) => {\r\n            this.removeClassName(`color-${color}`);\r\n        });\r\n        Piece.pieceChars.forEach((type) => {\r\n            this.removeClassName(`type-${type}`);\r\n        });\r\n    }\r\n    removePiece() {\r\n        this.removePieceClasses();\r\n        this.piece = null;\r\n    }\r\n\r\n    setPiece(piece: Piece | null) {\r\n        this.removePiece();\r\n        this.piece = piece;\r\n        if (this.piece) {\r\n            this.addClassName(`type-${this.piece.type}`);\r\n            this.addClassName(`color-${this.piece.color}`);\r\n            this.addClassName(PIECE_CLASS_NAME);\r\n        }\r\n    }\r\n\r\n    addClassName(className: string) {\r\n        this.containerDom.classList.add(className);\r\n    }\r\n\r\n    removeClassName(className: string) {\r\n        this.containerDom.classList.remove(className);\r\n    }\r\n\r\n    hasClassName(className: string) {\r\n        return this.containerDom.classList.contains(className);\r\n    }\r\n\r\n    select(selected: boolean) {\r\n        this.removeClassName(SELECTED_CLASS_NAME);\r\n        if (selected && this.piece) {\r\n            this.addClassName(SELECTED_CLASS_NAME);\r\n        }\r\n    }\r\n\r\n    get canMovePoints() {\r\n        const points = this.khmerChess.getCanMovePointsByPoint(this.point);\r\n        return points;\r\n    }\r\n\r\n    get isSelected() {\r\n        return this.hasClassName(SELECTED_CLASS_NAME);\r\n    }\r\n\r\n    get isCanMove() {\r\n        return this.hasClassName(CAN_MOVE_CLASS_NAME);\r\n    }\r\n\r\n    get isMoved() {\r\n        return this.hasClassName(MOVED_CLASS_NAME);\r\n    }\r\n\r\n    get isCanSelect() {\r\n        return this.hasClassName(TURN_CLASS_NAME);\r\n    }\r\n\r\n    attack(attacked: boolean) {\r\n        this.removeClassName(ATTACKED_CLASS_NAME);\r\n        if (attacked) {\r\n            this.addClassName(ATTACKED_CLASS_NAME);\r\n        }\r\n    }\r\n\r\n    turn(attacked: boolean) {\r\n        this.removeClassName(TURN_CLASS_NAME);\r\n        if (attacked) {\r\n            this.addClassName(TURN_CLASS_NAME);\r\n        }\r\n    }\r\n\r\n    get isAttacked() {\r\n        return this.hasClassName(ATTACKED_CLASS_NAME);\r\n    }\r\n\r\n    get isTurning() {\r\n        return this.hasClassName(TURN_CLASS_NAME);\r\n    }\r\n    get onClick() {\r\n        return this.containerDom.onclick;\r\n    }\r\n\r\n    setOnClick(listener: (this: GlobalEventHandlers, ev: MouseEvent) => any) {\r\n        this.containerDom.onclick = listener;\r\n    }\r\n\r\n    removeOnClick() {\r\n        this.containerDom.onclick = null;\r\n    }\r\n\r\n    setFlipped(isUpsideDown: boolean) {\r\n        this.removeClassName(FLIPPED_CLASS);\r\n        if (this.isUpsideDown !== isUpsideDown) {\r\n            const xy = Point.indexToXY(CELL_COUNT - 1 - this.point.index);\r\n            this.point.x = xy.x;\r\n            this.point.y = xy.y;\r\n        }\r\n        this.isUpsideDown = isUpsideDown;\r\n        if (isUpsideDown) {\r\n            this.addClassName(FLIPPED_CLASS);\r\n        }\r\n    }\r\n\r\n    clone() {\r\n        const div = document.createElement('div');\r\n        return new CellManager(new Point(this.point.x, this.point.y)\r\n            , div, this.piece);\r\n    }\r\n\r\n    scrollIntoView() {\r\n        this.containerDom.scrollIntoView({\r\n            behavior: 'smooth',\r\n            block: 'end',\r\n            inline: 'nearest',\r\n        });\r\n    }\r\n\r\n    movePieceTo(toCell: CellManager) {\r\n        const piece = this.piece;\r\n        this.removePiece();\r\n        toCell.setPiece(piece);\r\n    }\r\n\r\n    movePieceToGraveyard(toCell: CellManager) {\r\n        const deadPiece = this.piece;\r\n        this.removePiece();\r\n        toCell.setPiece(deadPiece);\r\n        toCell.scrollIntoView();\r\n    }\r\n    movePieceFromGraveyard(toCell: CellManager) {\r\n        this.scrollIntoView();\r\n        const raisePiece = this.piece;\r\n        this.removePiece();\r\n        toCell.setPiece(raisePiece);\r\n    }\r\n\r\n    moved() {\r\n        this.addClassName(MOVED_CLASS_NAME);\r\n    }\r\n    clearMoved() {\r\n        this.removeClassName(MOVED_CLASS_NAME);\r\n    }\r\n    setCanMove() {\r\n        this.addClassName(CAN_MOVE_CLASS_NAME);\r\n    }\r\n    clearCanMoved() {\r\n        this.removeClassName(CAN_MOVE_CLASS_NAME);\r\n    }\r\n    upgrade() {\r\n        if (this.piece && this.piece.upgrade()) {\r\n            this.setPiece(this.piece);\r\n        }\r\n    }\r\n    downgrade() {\r\n        if (this.piece && this.piece.downgrade()) {\r\n            this.setPiece(this.piece);\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import { KhmerChess, Piece } from 'khmer-chess';\r\nimport {\r\n    TD_GRAVEYARD_NUMBER,\r\n    GRAVEYARD_NOTE_PREFIX_CLASS,\r\n} from './providers/constance';\r\nimport CellManager from './CellManager';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\nimport OptionsManager from './OptionsManager';\r\n\r\nexport default class GraveyardManager {\r\n    _cells: CellManager[] = [];\r\n    khmerChessBoard: KhmerChessBoard;\r\n    khmerChess: KhmerChess;\r\n    options: OptionsManager;\r\n    domGraveyard: HTMLElement;\r\n    setProps(khmerChessBoard: KhmerChessBoard) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n        this.khmerChess = khmerChessBoard.khmerChess;\r\n        this.options = khmerChessBoard.options;\r\n    }\r\n    setDom(domGraveyard: HTMLElement) {\r\n        this.domGraveyard = domGraveyard;\r\n    }\r\n    push(cell: CellManager) {\r\n        this._cells.push(cell);\r\n        cell.setProps(this.khmerChessBoard);\r\n    }\r\n\r\n    get(index: number) {\r\n        return this._cells[index];\r\n    }\r\n\r\n    setCellNote() {\r\n        for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\r\n            const cell = this.get(i);\r\n            cell.addClassName(`${GRAVEYARD_NOTE_PREFIX_CLASS}-${i + 1}`);\r\n            if (this.options.isEnglish) {\r\n                cell.addClassName(this.options.enClass);\r\n            }\r\n        }\r\n    }\r\n    clearCellNote() {\r\n        for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\r\n            const cell = this.get(i);\r\n            cell.removeClassName(`${GRAVEYARD_NOTE_PREFIX_CLASS}-${i + 1}`);\r\n            cell.removeClassName(this.options.enClass);\r\n        }\r\n    }\r\n\r\n    removePiecesFromCells() {\r\n        for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\r\n            const cell = this.get(i);\r\n            cell.removePiece();\r\n        }\r\n    }\r\n\r\n    applyPiecesFromKhmerChess() {\r\n        this.khmerChess.piecesInGraveyard.forEach((piece, i) => {\r\n            const cell = this.get(i);\r\n            cell.setPiece(piece);\r\n        });\r\n    }\r\n\r\n    renderKhmerChessPieces() {\r\n        this.removePiecesFromCells();\r\n        this.applyPiecesFromKhmerChess();\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import { KhmerChess } from 'khmer-chess';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\n\r\nconsole.log(KhmerChess.title, KhmerChess.version);\r\nconsole.log(KhmerChessBoard.title, KhmerChessBoard.version);\r\n\r\n(window as any).KhmerChessBoard = KhmerChessBoard;\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","// FIXME: chrome horizontal scroll not work\r\nimport config from '../package.json';\r\nimport GraveyardManager from './GraveyardManager';\r\nimport SoundManager from './SoundManager';\r\nimport BoardManager from './BoardManager';\r\nimport { POPUP_CLASS_NAME } from './providers/constance';\r\nimport addCss from './helpers/addCss';\r\nimport addCssNote from './helpers/addCssNote';\r\nimport drawBoardAndGraveyard from './helpers/drawBoardAndGraveyard';\r\nimport OptionsManager from './OptionsManager';\r\nimport { KhmerChess } from 'khmer-chess';\r\nimport type { KPGNOption } from 'khmer-chess';\r\nimport MessageManager from './MessageManager';\r\nimport PlayManager from './PlayManager';\r\nimport PieceShadowManager from './PieceShadowManager';\r\n\r\nimport KhmerChessProps from './KhmerChessProps';\r\n\r\nexport default class KhmerChessBoard extends KhmerChessProps {\r\n    static LOCALE_ENGLISH = 'en';\r\n    static LOCALE_KHMER = 'km';\r\n    static info = config;\r\n    static title = config.name;\r\n    static version = config.version;\r\n    containerDom: HTMLElement;\r\n    domRootBoard: HTMLElement;\r\n    options: OptionsManager;\r\n    playManager: PlayManager;\r\n    graveyardManager: GraveyardManager;\r\n    boardManager: BoardManager;\r\n    khmerChess: KhmerChess;\r\n    soundManager: SoundManager;\r\n    messageManager: MessageManager;\r\n    pieceShadowManager: PieceShadowManager;\r\n    setOptions(options: {\r\n        container?: HTMLElement | null;\r\n        width: number;\r\n    }) {\r\n\r\n        this.khmerChess = new KhmerChess();\r\n        this.options = new OptionsManager();\r\n        this.playManager = new PlayManager();\r\n        this.graveyardManager = new GraveyardManager();\r\n        this.boardManager = new BoardManager();\r\n        this.soundManager = new SoundManager();\r\n        this.messageManager = new MessageManager();\r\n        this.pieceShadowManager = new PieceShadowManager();\r\n\r\n        if (!options.container) {\r\n            throw new Error('Container is required!');\r\n        }\r\n        this.containerDom = options.container;\r\n\r\n        if (options.width < this.options.minWidth) {\r\n            throw new Error(`Board width must more than ${this.options.minWidth} `);\r\n        }\r\n        if (options.width) {\r\n            this.options.width = options.width;\r\n        }\r\n        if (options.width) {\r\n            this.options.width = options.width;\r\n        }\r\n\r\n        this.playManager.setProps(this);\r\n        this.graveyardManager.setProps(this);\r\n        this.boardManager.setProps(this);\r\n        this.soundManager.setProps(this);\r\n        this.messageManager.setProps(this);\r\n        this.pieceShadowManager.setProps(this);\r\n\r\n        this.render();\r\n        this.boardManager.attachClickEvent();\r\n\r\n        const boardEventController = this.boardManager.boardEventController;\r\n        boardEventController.addOnCellSelectedEventListener((cell) => {\r\n            const points = cell.canMovePoints;\r\n            points.forEach((point) => {\r\n                const targetCell = this.boardManager.get(point.index);\r\n                targetCell.setCanMove();\r\n            });\r\n        });\r\n        boardEventController.addOnCellDeselectedEventListener((cell) => {\r\n            this.boardManager.clearCanMoveCells();\r\n        });\r\n        boardEventController.addOnAttemptMoveEventListener(({ fromCell, toCell }) => {\r\n            this.move(fromCell.point.index, toCell.point.index);\r\n        });\r\n    }\r\n    move(fromIndex: number, toIndex: number) {\r\n        const move = this.khmerChess.move(fromIndex, toIndex);\r\n        if (move !== null) {\r\n            this.boardManager.clearTurnCells();\r\n            this.playManager.next(() => {\r\n                this.playManager.turning();\r\n            });\r\n        }\r\n    }\r\n\r\n    setFullScreen(isFullScreen: boolean) {\r\n        this.options.isFullScreen = isFullScreen;\r\n        const table = this.domRootBoard;\r\n\r\n        table.classList.remove(POPUP_CLASS_NAME);\r\n        table.style.top = '0';\r\n        table.style.left = '0';\r\n        table.style.transform = '';\r\n        table.style.zIndex = '';\r\n\r\n        if (isFullScreen) {\r\n            table.classList.add(POPUP_CLASS_NAME);\r\n            table.style.top = '50%';\r\n            table.style.left = '50%';\r\n            const scaleFit = this.options.getScaleFit(table.getBoundingClientRect());\r\n            table.style.transform = `translate(-50%,-50%) scale(${scaleFit})`;\r\n            table.style.zIndex = '9999';\r\n        }\r\n    }\r\n\r\n    render() {\r\n        this.addAllDomCss();\r\n        const {\r\n            domRootBoard,\r\n            domGraveyard,\r\n            playerContainer,\r\n            tdShadow,\r\n        } = drawBoardAndGraveyard({\r\n            uniqueClassName: this.options.uniqueClassName,\r\n            options: this.options,\r\n            container: this.containerDom,\r\n            boardManager: this.boardManager,\r\n            graveyardManager: this.graveyardManager,\r\n        });\r\n        this.domRootBoard = domRootBoard;\r\n        this.graveyardManager.setDom(domGraveyard);\r\n        this.pieceShadowManager.setTdShadow(tdShadow);\r\n        this.setCellNote();\r\n        this.applyPieces();\r\n        this.messageManager.draw();\r\n        this.playManager.draw(playerContainer);\r\n    }\r\n\r\n    setLocale(locale: string) {\r\n        const locales = [KhmerChessBoard.LOCALE_ENGLISH, KhmerChessBoard.LOCALE_KHMER];\r\n        if (!~locales.indexOf(locale)) {\r\n            throw new Error(`Unsupported locale: ${locale}, supported locales: ${locales.join(',')}`);\r\n        } else {\r\n            this.options.isEnglish = locale === locales[0];\r\n            this.setCellNote();\r\n        }\r\n    }\r\n\r\n    setCellNote() {\r\n        this.boardManager.clearCellNote();\r\n        this.graveyardManager.clearCellNote();\r\n\r\n        this.boardManager.setCellNote();\r\n        this.graveyardManager.setCellNote();\r\n    }\r\n\r\n    addAllDomCss() {\r\n        addCss({\r\n            uniqueClassName: this.options.uniqueClassName,\r\n            options: this.options,\r\n        });\r\n        addCssNote({\r\n            uniqueClassName: this.options.uniqueClassName,\r\n            options: this.options,\r\n        });\r\n        addCssNote({\r\n            uniqueClassName: this.options.uniqueClassName,\r\n            options: this.options,\r\n            isEnglish: true,\r\n        });\r\n    }\r\n\r\n    loadKpng(kpng: KPGNOption | string) {\r\n        if (typeof kpng === 'string') {\r\n            this.khmerChess.kpgn.fromBase64(kpng);\r\n        } else {\r\n            this.khmerChess.kpgn.fromJson(kpng);\r\n        }\r\n        this.applyPieces();\r\n        this.playManager.resetCurrentIndex();\r\n        this.playManager.highlightCurrentMove();\r\n        this.boardManager.checkBoardEvent();\r\n    }\r\n\r\n    reset() {\r\n        this.playManager.pause();\r\n        this.loadKpng({});\r\n        this.boardManager.attachClickEvent();\r\n    }\r\n\r\n    loadRen(renStr?: string) {\r\n        this.khmerChess.kpgn.loadRENStr(renStr);\r\n        this.applyPieces();\r\n    }\r\n\r\n    applyPieces() {\r\n        this.graveyardManager.renderKhmerChessPieces();\r\n        this.boardManager.renderKhmerChessPieces();\r\n    }\r\n\r\n    removeAllDomElements() {\r\n        const elements = document.querySelectorAll(`table.${this.options.uniqueClassName} `);\r\n        elements.forEach((element) => {\r\n            element.parentElement?.removeChild(element);\r\n        });\r\n        this.removeAllDomCss();\r\n    }\r\n\r\n    removeAllDomCss() {\r\n        const elements = document.querySelectorAll(`style.${this.options.uniqueClassName} `);\r\n        elements.forEach((element) => {\r\n            element.parentElement?.removeChild(element);\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        this.removeAllDomElements();\r\n    }\r\n}\r\n\r\n/*\r\n  \r\n8              k          \r\n  \r\n7                         \r\n  \r\n6                         \r\n  \r\n5                         \r\n  \r\n4                         \r\n  \r\n3                         \r\n  \r\n2                         \r\n  \r\n1           K             \r\n  \r\n    a   b   c   d   e   f   g   h\r\n  \r\n   b  h  g  q  g  h  b  f  f  f  f  f  f  f  f  F  F  F  F  F  F  F  F  B  H  G  Q  G  H  B \r\n  \r\n */\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import {\r\n    PIECE_COLOR_BLACK,\r\n    PIECE_COLOR_WHITE,\r\n    PIECE_TYPE_BOAT,\r\n    PIECE_TYPE_TRANSFORM_FISH,\r\n    PIECE_TYPE_GENERAL,\r\n    PIECE_TYPE_QUEEN,\r\n    PIECE_TYPE_KING,\r\n    PIECE_TYPE_HORSE,\r\n    PIECE_TYPE_FISH,\r\n    KhmerChess,\r\n    COLOR_NAMES,\r\n    COLOR_NAMES_ENGLISH,\r\n    PIECE_NAMES,\r\n    PIECE_NAMES_ENGLISH,\r\n    EMPTY_PIECE,\r\n    PIECE_COLOR_EMPTY,\r\n    BOARD_SEPARATOR,\r\n    ROW_NUMBER,\r\n    VERTICAL_NOTE_LETTERS_ENGLISH,\r\n    HORIZONTAL_NOTE_LETTERS_ENGLISH,\r\n    VERTICAL_NOTE_LETTERS,\r\n    HORIZONTAL_NOTE_LETTERS,\r\n    HORIZONTAL_CODE_LETTERS,\r\n    ROW_FIRST_INDEX,\r\n    ROW_LAST_INDEX,\r\n    CELL_COUNT,\r\n} from 'khmer-chess';\r\n\r\nexport default class KhmerChessProps {\r\n    static PIECE_COLOR_WHITE = PIECE_COLOR_WHITE;\r\n    static PIECE_COLOR_BLACK = PIECE_COLOR_BLACK;\r\n    static COLOR_NAMES = COLOR_NAMES;\r\n    static COLOR_NAMES_ENGLISH = COLOR_NAMES_ENGLISH;\r\n    static PIECE_TYPE_BOAT = PIECE_TYPE_BOAT;\r\n    static PIECE_TYPE_HORSE = PIECE_TYPE_HORSE;\r\n    static PIECE_TYPE_GENERAL = PIECE_TYPE_GENERAL;\r\n    static PIECE_TYPE_KING = PIECE_TYPE_KING;\r\n    static PIECE_TYPE_QUEEN = PIECE_TYPE_QUEEN;\r\n    static PIECE_TYPE_FISH = PIECE_TYPE_FISH;\r\n    static PIECE_TYPE_TRANSFORM_FISH = PIECE_TYPE_TRANSFORM_FISH;\r\n    static PIECE_NAMES = PIECE_NAMES;\r\n    static PIECE_NAMES_ENGLISH = PIECE_NAMES_ENGLISH;\r\n    static EMPTY_PIECE = EMPTY_PIECE;\r\n    static PIECE_COLOR_EMPTY = PIECE_COLOR_EMPTY;\r\n    static BOARD_SEPARATOR = BOARD_SEPARATOR;\r\n    static ROW_NUMBER = ROW_NUMBER;\r\n    static ROW_FIRST_INDEX = ROW_FIRST_INDEX;\r\n    static ROW_LAST_INDEX = ROW_LAST_INDEX;\r\n    static CELL_COUNT = CELL_COUNT;\r\n    static HORIZONTAL_CODE_LETTERS = HORIZONTAL_CODE_LETTERS;\r\n    static HORIZONTAL_NOTE_LETTERS = HORIZONTAL_NOTE_LETTERS;\r\n    static VERTICAL_NOTE_LETTERS = VERTICAL_NOTE_LETTERS;\r\n    static HORIZONTAL_NOTE_LETTERS_ENGLISH = HORIZONTAL_NOTE_LETTERS_ENGLISH;\r\n    static VERTICAL_NOTE_LETTERS_ENGLISH = VERTICAL_NOTE_LETTERS_ENGLISH;\r\n    static KhmerChess = KhmerChess;\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import OptionsManager from './OptionsManager';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\nimport appendCss from './helpers/appendCss';\r\n\r\nexport default class MessageManager {\r\n    khmerChessBoard: KhmerChessBoard;\r\n    options: OptionsManager;\r\n    containerClassName = 'message-container';\r\n    messageClassName = 'message';\r\n    domContainer: HTMLDivElement;\r\n    domMessage: HTMLDivElement;\r\n    logEnabled = true;\r\n    enableLog() {\r\n        this.logEnabled = true;\r\n    }\r\n    disableLog() {\r\n        this.logEnabled = false;\r\n    }\r\n    log(message?: any, ...optionalParams: any[]) {\r\n        if (!this.logEnabled) {\r\n            return;\r\n        }\r\n        console.log(message, ...optionalParams);\r\n    }\r\n    setProps(khmerChessBoard: KhmerChessBoard) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n        this.options = khmerChessBoard.options;\r\n        appendCss(this.options.uniqueClassName, this.css());\r\n    }\r\n    showMessage(message: string) {\r\n        this.domContainer.style.display = 'block';\r\n        this.domMessage.innerHTML = message;\r\n    }\r\n    hide() {\r\n        this.domContainer.style.display = 'none';\r\n    }\r\n    draw() {\r\n        const container = this.khmerChessBoard.domRootBoard;\r\n        const bc = this.khmerChessBoard.domRootBoard.getBoundingClientRect();\r\n        const div = document.createElement('div');\r\n        this.domContainer = div;\r\n        div.classList.add(this.options.uniqueClassName);\r\n        div.classList.add(this.containerClassName);\r\n        container.appendChild(div);\r\n        div.style.height = `${bc.height}px`;\r\n        div.style.transform = `translateY(-${bc.height}px)`;\r\n\r\n        const divMessage = document.createElement('div');\r\n        this.domMessage = divMessage;\r\n        divMessage.classList.add(this.messageClassName);\r\n        div.appendChild(divMessage);\r\n\r\n        this.hide();\r\n    }\r\n    css(): string {\r\n        const containerSelector = `.${this.options.uniqueClassName}.${this.containerClassName}`;\r\n        return `\r\n        ${containerSelector} {\r\n            width: ${this.options.width}px;\r\n            text-align: center;\r\n            border: 0px;\r\n            padding: 10px;\r\n            box-sizing: border-box;\r\n            margin: auto;\r\n            position: absolute;\r\n            background-color: rgba(0, 0, 0, 0.8);\r\n            color: white;\r\n            font-size: 18px;\r\n        }\r\n        ${containerSelector} .${this.messageClassName} {\r\n            margin-top: 50%;\r\n        }\r\n        `;\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import { KhmerChess } from 'khmer-chess';\r\n\r\nexport default class MoveData {\r\n    index: number;\r\n    renData: string;\r\n    dom: HTMLElement;\r\n    constructor({ index, containerDom, renData, title, str, onClick }: {\r\n        index: number,\r\n        containerDom: HTMLElement,\r\n        renData: string,\r\n        title: string,\r\n        str: string,\r\n        onClick: Function,\r\n    }) {\r\n        this.index = index;\r\n        this.renData = renData;\r\n\r\n        const span = document.createElement('span');\r\n        span.title = title;\r\n        containerDom.appendChild(span);\r\n        this.dom = span;\r\n\r\n        const indexSpan = document.createElement('span');\r\n        indexSpan.innerText = KhmerChess.toKhmerNum(index);\r\n        indexSpan.classList.add('index');\r\n        span.appendChild(indexSpan);\r\n\r\n        const infoSpan = document.createElement('span');\r\n        infoSpan.classList.add('info');\r\n        infoSpan.innerText = str;\r\n        span.appendChild(infoSpan);\r\n        infoSpan.onclick = () => {\r\n            if (!this.isCurrent) {\r\n                onClick();\r\n            }\r\n        };\r\n\r\n    }\r\n    get isCurrent() {\r\n        return this.dom.classList.contains('current');\r\n    }\r\n    current(b: boolean) {\r\n        this.dom.classList.remove('current');\r\n        if (b) {\r\n            this.dom.classList.add('current');\r\n        }\r\n    }\r\n    destroy() {\r\n        if (this.dom !== null) {\r\n            this.dom.onclick = null;\r\n            this.dom.parentElement?.removeChild(this.dom);\r\n        }\r\n    }\r\n    scrollIntoView() {\r\n        this.dom.scrollIntoView();\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import {\r\n    BORDER_WIDTH,\r\n    MIN_CELL_WIDTH,\r\n    TD_GRAVEYARD_NUMBER,\r\n} from './providers/constance';\r\nimport { genId } from './helpers/uniqueIdHelper';\r\nimport { ROW_NUMBER } from 'khmer-chess';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\n\r\nexport default class OptionsManager {\r\n    _width = 500;\r\n    isFullScreen = false;\r\n    uniqueClassName = '';\r\n    isEnglish = false;\r\n    constructor() {\r\n        this.uniqueClassName = `kcb-${genId()}`;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    get enClass() {\r\n        return KhmerChessBoard.LOCALE_ENGLISH;\r\n    }\r\n\r\n    getScaleFit(btr: ClientRect) {\r\n        if (this.isFullScreen && btr) {\r\n            const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\r\n            const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\r\n            if (vw < vh) {\r\n                return vw / btr.width;\r\n            }\r\n            return vh / btr.height;\r\n        }\r\n        return 1;\r\n    }\r\n\r\n    set width(width) {\r\n        this._width = width;\r\n    }\r\n\r\n    get cellWidth() {\r\n        const sqWidth = (this.width - (ROW_NUMBER - 1) * this.borderWidth) / ROW_NUMBER;\r\n        return sqWidth;\r\n    }\r\n\r\n    get graveyardContainerHeight() {\r\n        const gyCHeight = this.cellWidth + 10 * this.borderWidth;\r\n        return gyCHeight;\r\n    }\r\n\r\n    get minWidth() {\r\n        return (ROW_NUMBER - 1) * this.borderWidth + ROW_NUMBER * MIN_CELL_WIDTH;\r\n    }\r\n\r\n    get graveyardWidth() {\r\n        return this.borderWidth * (TD_GRAVEYARD_NUMBER - 1) + this.cellWidth * TD_GRAVEYARD_NUMBER;\r\n    }\r\n\r\n    get graveyardContainerPadding() {\r\n        return 8 * this.borderWidth * this.width / 600;\r\n    }\r\n\r\n    get borderWidth() {\r\n        return this.width * BORDER_WIDTH / this._width;\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import CellManager from './CellManager';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\nimport OptionsManager from './OptionsManager';\r\n\r\nexport default class PieceShadowManager {\r\n    tdShadowDom: HTMLElement;\r\n    khmerChessBoard: KhmerChessBoard;\r\n    options: OptionsManager;\r\n    _quickMove = false;\r\n    pending: {\r\n        resolvers: Array<() => void>,\r\n        callbacks: Array<() => void>,\r\n    } = {\r\n            resolvers: [],\r\n            callbacks: [],\r\n        }\r\n    quickMove(enable: boolean) {\r\n        this._quickMove = enable;\r\n        if (enable) {\r\n            this.finishAnimations();\r\n        }\r\n    }\r\n    setTdShadow(tdShadowDown: HTMLElement) {\r\n        this.tdShadowDom = tdShadowDown;\r\n    }\r\n    setProps(khmerChessBoard: KhmerChessBoard) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n        this.options = khmerChessBoard.options;\r\n    }\r\n    movingPiece(fromCell: CellManager, toCell: CellManager, callback: Function) {\r\n        if (this._quickMove) {\r\n            fromCell.removePieceClasses();\r\n            callback();\r\n        } else {\r\n            const div = document.createElement('div');\r\n            const pice = fromCell.piece;\r\n            if (!pice || !div.animate || this.options.isFullScreen) {\r\n                callback();\r\n            } else {\r\n\r\n                const fromBc = fromCell.containerDom.getBoundingClientRect();\r\n                const toBc = toCell.containerDom.getBoundingClientRect();\r\n                this.tdShadowDom.appendChild(div);\r\n                div.style.top = `${fromBc.top}`;\r\n                div.style.left = `${fromBc.left}`;\r\n                div.classList.add(`type-${pice.type}`);\r\n                div.classList.add(`color-${pice.color}`);\r\n                fromCell.removePieceClasses();\r\n                const option = [\r\n                    {\r\n                        transform: 'translate(0px)',\r\n                        opacity: 1,\r\n                    },\r\n                    {\r\n                        transform: `translate(${toBc.left - fromBc.left}px, ${toBc.top - fromBc.top}px)`,\r\n                        opacity: 0,\r\n                    },\r\n                ];\r\n                const animation = div.animate(option, 100);\r\n\r\n                const pendingCallback = () => {\r\n                    animation.cancel();\r\n                    this.removePendingCallback(pendingCallback);\r\n                    this._resolve();\r\n                };\r\n                this.addPendingCallback(pendingCallback);\r\n                const timeout = setTimeout(() => pendingCallback(), 1e3);\r\n                animation.onfinish = animation.oncancel = () => {\r\n                    clearTimeout(timeout);\r\n                    this.removePendingCallback(pendingCallback);\r\n                    this.tdShadowDom.removeChild(div);\r\n                    callback();\r\n                    callback = () => { };\r\n                };\r\n            }\r\n        }\r\n    }\r\n    addPendingCallback(callback: () => void) {\r\n        this.pending.callbacks.push(callback);\r\n    }\r\n    removePendingCallback(callback: () => void) {\r\n        this.pending.callbacks = this.pending.callbacks.filter((cb) => {\r\n            return cb !== callback;\r\n        });\r\n    }\r\n    finishAnimations() {\r\n        while (this.pending.callbacks.length) {\r\n            this.pending.callbacks[0]();\r\n        }\r\n        this._resolve();\r\n    }\r\n    _resolve() {\r\n        while (!this.pending.callbacks.length &&\r\n            this.pending.resolvers.length) {\r\n            const resolve = this.pending.resolvers.shift();\r\n            if (resolve) {\r\n                resolve();\r\n            }\r\n        }\r\n    }\r\n    resolveAnimation(): Promise<void> {\r\n        return new Promise((resolve, _) => {\r\n            this.pending.resolvers.push(resolve);\r\n            this._resolve();\r\n        });\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import OptionsManager from './OptionsManager';\r\nimport KhmerChessBoard from './KhmerChessBoard';\r\nimport appendCss from './helpers/appendCss';\r\nimport PlayManagerEventController from './event/PlayManagerEventController';\r\nimport {\r\n    Move,\r\n} from 'khmer-chess';\r\nimport MoveData from './MoveData';\r\n\r\nexport default class PlayManager {\r\n    khmerChessBoard: KhmerChessBoard;\r\n    options: OptionsManager;\r\n    containerClassName = 'player-table';\r\n    containerDom: HTMLElement;\r\n    renDataList: MoveData[] = [];\r\n    playEventController: PlayManagerEventController<MoveData>;\r\n    backBtnDom: HTMLButtonElement;\r\n    playBtnDom: HTMLButtonElement;\r\n    pauseBtnDom: HTMLButtonElement;\r\n    nextBtnDom: HTMLButtonElement;\r\n    currentIndex = 0;\r\n    constructor() {\r\n        this.playEventController = new PlayManagerEventController();\r\n    }\r\n    get isCanBack() {\r\n        return !!(this.khmerChessBoard.khmerChess.kpgn.moves.length && this.currentIndex);\r\n    }\r\n    get isCanNext() {\r\n        const movesLength = this.khmerChessBoard.khmerChess.kpgn.moves.length;\r\n        return this.khmerChessBoard.khmerChess.kpgn.moves.length && this.currentIndex < movesLength;\r\n    }\r\n    setProps(khmerChessBoard: KhmerChessBoard) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n        this.options = khmerChessBoard.options;\r\n        appendCss(this.options.uniqueClassName, this.css());\r\n    }\r\n    renderMoveData() {\r\n        this.renDataList.forEach((moveData) => {\r\n            moveData.destroy();\r\n        });\r\n        const isEnglish = this.options.isEnglish;\r\n        const current = this.currentIndex - 1;\r\n        const moves = this.khmerChessBoard.khmerChess.kpgn.moves;\r\n        this.renDataList = moves.map((move, i) => {\r\n            const moveData = new MoveData({\r\n                index: i + 1,\r\n                containerDom: this.containerDom,\r\n                renData: '',\r\n                title: move.getMessage(isEnglish),\r\n                str: move.toString(),\r\n                onClick: () => {\r\n                    this.toIndex(moveData.index);\r\n                    this.playEventController.click(moveData);\r\n                },\r\n            });\r\n            if (current === i) {\r\n                moveData.current(true);\r\n            }\r\n            return moveData;\r\n        });\r\n        if (this.renDataList.length) {\r\n            this.renDataList[this.renDataList.length - 1].scrollIntoView();\r\n        }\r\n    }\r\n    draw(playerContainer: HTMLElement) {\r\n        const containerWidth = ~~(this.options.width * 3 / 4);\r\n        const table = document.createElement('table');\r\n        table.classList.add(this.options.uniqueClassName);\r\n        table.classList.add(this.containerClassName);\r\n        playerContainer.appendChild(table);\r\n        const tbody = document.createElement('tbody');\r\n        table.appendChild(tbody);\r\n        const tr = document.createElement('tr');\r\n        tbody.appendChild(tr);\r\n        let tdHistory = document.createElement('td');\r\n        const div = document.createElement('div');\r\n        div.style.width = `${containerWidth}px`;\r\n        div.style.height = '26px';\r\n        div.classList.add('container');\r\n        this.containerDom = div;\r\n        tdHistory.appendChild(div);\r\n        tdHistory.style.width = `${containerWidth}px`;\r\n        tr.appendChild(tdHistory);\r\n        tdHistory = document.createElement('td');\r\n        let btn = document.createElement('button');\r\n        btn.innerHTML = '<';\r\n        this.backBtnDom = btn;\r\n        tdHistory.appendChild(btn);\r\n        tr.appendChild(tdHistory);\r\n        tdHistory = document.createElement('td');\r\n        btn = document.createElement('button');\r\n        btn.innerHTML = '^';\r\n        this.playBtnDom = btn;\r\n        tdHistory.appendChild(btn);\r\n        btn = document.createElement('button');\r\n        btn.innerHTML = '#';\r\n        this.pauseBtnDom = btn;\r\n        tdHistory.appendChild(btn);\r\n        btn.style.display = 'none';\r\n        tr.appendChild(tdHistory);\r\n        tdHistory = document.createElement('td');\r\n        btn = document.createElement('button');\r\n        btn.innerHTML = '>';\r\n        this.nextBtnDom = btn;\r\n        tdHistory.appendChild(btn);\r\n        tr.appendChild(tdHistory);\r\n        this.btnListen();\r\n    }\r\n    btnListen() {\r\n        this.backBtnDom.onclick = () => {\r\n            this.back();\r\n        };\r\n        this.playBtnDom.onclick = () => {\r\n            this.play();\r\n        };\r\n        this.pauseBtnDom.onclick = () => {\r\n            this.pause();\r\n        };\r\n        this.nextBtnDom.onclick = () => {\r\n            this.next();\r\n        };\r\n    }\r\n    css(): string {\r\n        const containerSelector = `table.${this.options.uniqueClassName}.${this.containerClassName}`;\r\n        return `\r\n        ${containerSelector} {\r\n            width: 100%;\r\n            height: 100%;\r\n            box-shadow: rgb(0, 0, 0) 0px 0px 2px inset;\r\n        }\r\n        ${containerSelector} td {\r\n            padding: 0px;\r\n            margin: 0px;\r\n            text-align: center;\r\n            box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 1px inset;\r\n        }\r\n        ${containerSelector} .container {\r\n            font-size: 14px;\r\n            text-align: right;\r\n            overflow-x: auto;\r\n        }\r\n        ${containerSelector} .container::-webkit-scrollbar {\r\n            width: 1em;\r\n        }\r\n        ${containerSelector} .container > span {\r\n            margin: 0 2px;\r\n            padding: 0 2px;\r\n            border: 1px solid green;\r\n            border-radius: 2px;\r\n            cursor: pointer;\r\n        }\r\n        ${containerSelector} .container > span.current {\r\n            background-color: rgba(255, 255, 255, 0.3);\r\n            cursor: not-allowed;\r\n        }\r\n        ${containerSelector} .container span.index {\r\n            color: grey;\r\n            padding-right: 2px;\r\n            border-right: 1px solid gray;\r\n            margin-right: 2px;\r\n            font-size: 12px;\r\n        }\r\n        `;\r\n    }\r\n    get isCanUndo() {\r\n        return !!this.khmerChessBoard.khmerChess.kpgn.latestMove;\r\n    }\r\n    undo() {\r\n        if (this.isCanUndo) {\r\n            this.offTurning();\r\n            this.toIndex(this.khmerChessBoard.khmerChess.kpgn.moves.length);\r\n            this.back(() => {\r\n                this.khmerChessBoard.khmerChess.kpgn.moves.pop();\r\n                this.turning();\r\n            });\r\n        }\r\n    }\r\n    get isCanPlay() {\r\n        return !this.isCanNext;\r\n    }\r\n    get isPlaying() {\r\n        return this.khmerChessBoard.boardManager.isTurning;\r\n    }\r\n    offTurning() {\r\n        this.khmerChessBoard.boardManager.clearTurnCells();\r\n        this.render();\r\n    }\r\n    turning() {\r\n        this.khmerChessBoard.boardManager.takeTurn();\r\n        this.render();\r\n    }\r\n    play() {\r\n        if (!this.isCanPlay) {\r\n            return false;\r\n        }\r\n        this.playEventController.play();\r\n        this.turning();\r\n        return true;\r\n    }\r\n    pause() {\r\n        this.playEventController.pause();\r\n        this.offTurning();\r\n        return true;\r\n    }\r\n    toggle() {\r\n        if (this.isPlaying) {\r\n            this.pause();\r\n        } else {\r\n            this.play();\r\n        }\r\n    }\r\n    render() {\r\n        this.playBtnDom.style.display = 'none';\r\n        this.pauseBtnDom.style.display = 'none';\r\n        this.backBtnDom.disabled = true;\r\n        this.nextBtnDom.disabled = true;\r\n        if (this.isPlaying) {\r\n            this.pauseBtnDom.style.display = '';\r\n        } else {\r\n            this.playBtnDom.style.display = '';\r\n        }\r\n        this.backBtnDom.disabled = !this.isCanBack;\r\n        this.nextBtnDom.disabled = !this.isCanNext;\r\n        this.playBtnDom.disabled = !this.isCanPlay;\r\n        this.renderMoveData();\r\n    }\r\n    loadCurrentRen() {\r\n        this.khmerChessBoard.loadRen(this.currentMove ? this.currentMove.renStr : '');\r\n        this.khmerChessBoard.boardManager.checkBoardEvent();\r\n    }\r\n    get currentMove() {\r\n        return this.khmerChessBoard.khmerChess.kpgn.getMove(this.currentIndex - 1);\r\n    }\r\n    back(callback: (arg0: void | Error) => void = () => { }) {\r\n        if (!this.isCanBack) {\r\n            return false;\r\n        }\r\n        this.offTurning();\r\n        this.playEventController.back();\r\n        this.currentIndex--;\r\n        const kpgn = this.khmerChessBoard.khmerChess.kpgn;\r\n        const move = kpgn.getMove(this.currentIndex);\r\n        if (move === null) {\r\n            return false;\r\n        }\r\n        this.applyMoveBack(move, (error) => {\r\n            callback(error);\r\n        });\r\n        return true;\r\n    }\r\n    next(callback: (arg0: void | Error) => void = () => { }) {\r\n        const kpgn = this.khmerChessBoard.khmerChess.kpgn;\r\n        this.playEventController.next();\r\n        const move = kpgn.getMove(this.currentIndex);\r\n        if (move === null) {\r\n            return false;\r\n        }\r\n        this.applyMove(move, (error) => {\r\n            callback(error);\r\n        });\r\n        this.currentIndex++;\r\n        return true;\r\n    }\r\n    applyMove(move: Move, callback: (arg0: void | Error) => void = () => { }) {\r\n        const {\r\n            boardManager,\r\n            graveyardManager,\r\n            pieceShadowManager,\r\n            soundManager,\r\n        } = this.khmerChessBoard;\r\n        pieceShadowManager.finishAnimations();\r\n\r\n        const finish = () => {\r\n            const fromCell = boardManager.get(move.moveFrom.index);\r\n            const toCell = boardManager.get(move.moveTo.index);\r\n            pieceShadowManager.movingPiece(fromCell, toCell, () => {\r\n                fromCell.movePieceTo(toCell);\r\n                if (move.isUpgrading) {\r\n                    toCell.upgrade();\r\n                }\r\n                this.loadCurrentRen();\r\n                this.highlightCurrentMove();\r\n                soundManager.playMove();\r\n                this.render();\r\n                callback();\r\n            });\r\n        };\r\n\r\n        if (move.captured) {\r\n            const fromBCell = boardManager.get(move.captured.fromBoardPoint.index);\r\n            const toGYCell = graveyardManager.get(move.captured.toGraveyardPoint.index);\r\n            pieceShadowManager.movingPiece(fromBCell, toGYCell, () => {\r\n                fromBCell.movePieceToGraveyard(toGYCell);\r\n                finish();\r\n            });\r\n            soundManager.playCapture();\r\n        } else {\r\n            finish();\r\n        }\r\n    }\r\n    applyMoveBack(move: Move, callback: (arg0: void | Error) => void = () => { }) {\r\n        const {\r\n            boardManager,\r\n            graveyardManager,\r\n            pieceShadowManager,\r\n            soundManager,\r\n        } = this.khmerChessBoard;\r\n        pieceShadowManager.finishAnimations();\r\n        pieceShadowManager;\r\n\r\n        const fromCell = boardManager.get(move.moveTo.index);\r\n        const toCell = boardManager.get(move.moveFrom.index);\r\n\r\n        const finish = () => {\r\n            this.loadCurrentRen();\r\n            this.highlightCurrentMove();\r\n            soundManager.playMove();\r\n            this.render();\r\n            callback();\r\n        };\r\n\r\n        pieceShadowManager.movingPiece(fromCell, toCell, () => {\r\n            fromCell.movePieceTo(toCell);\r\n            if (move.isUpgrading) {\r\n                toCell.downgrade();\r\n            }\r\n            if (move.captured) {\r\n                const fromGYCell = graveyardManager.get(move.captured.toGraveyardPoint.index);\r\n                const toBCell = boardManager.get(move.captured.fromBoardPoint.index);\r\n                pieceShadowManager.movingPiece(fromGYCell, toBCell, () => {\r\n                    fromGYCell.movePieceFromGraveyard(toBCell);\r\n                    finish();\r\n                });\r\n                soundManager.playCapture();\r\n            } else {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n    highlightCurrentMove() {\r\n        const boardManager = this.khmerChessBoard.boardManager;\r\n\r\n        boardManager.clearSelectedCells();\r\n        boardManager.clearMovedCells();\r\n        boardManager.clearAttackCells();\r\n\r\n        const currentMove = this.currentMove;\r\n        if (currentMove) {\r\n            const lastFromCell = boardManager.get(currentMove.moveFrom.index);\r\n            const lastToCell = boardManager.get(currentMove.moveTo.index);\r\n            if (lastFromCell !== null && lastToCell !== null) {\r\n                boardManager.highlightMovedCells(lastFromCell, lastToCell);\r\n            }\r\n            if (currentMove.attacker) {\r\n                const attacker = currentMove.attacker;\r\n                const cell = boardManager.get(attacker.point.index);\r\n                cell.attack(true);\r\n                if (attacker.piece !== null) {\r\n                    const king = boardManager.getKing(attacker.piece.colorOpponent);\r\n                    if (king != null) {\r\n                        king.attack(true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    toIndex(index: number) {\r\n        const pieceShadowManager = this.khmerChessBoard.pieceShadowManager;\r\n        while (this.currentIndex !== index) {\r\n            if (this.currentIndex < index) {\r\n                this.next();\r\n            } else {\r\n                this.back();\r\n            }\r\n        }\r\n        pieceShadowManager.quickMove(false);\r\n        this.highlightCurrentMove();\r\n    }\r\n    resetCurrentIndex() {\r\n        const moves = this.khmerChessBoard.khmerChess.kpgn.moves;\r\n        this.currentIndex = moves.length;\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import KhmerChessBoard from './KhmerChessBoard';\r\nimport AUDIO from './providers/audio';\r\n\r\nexport default class SoundManager {\r\n    static MOVE_FLAG = 'm';\r\n    static CAPTURE_FLAG = 'ct';\r\n    static CHECK_FLAG = 'c';\r\n    move: HTMLAudioElement | null = null;\r\n    capture: HTMLAudioElement | null = null;\r\n    check: HTMLAudioElement | null = null;\r\n    isEnable = false;\r\n    khmerChessBoard: KhmerChessBoard;\r\n    setProps(khmerChessBoard: KhmerChessBoard) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n    }\r\n    disable() {\r\n        this.isEnable = false;\r\n        if (this.move) {\r\n            this.move?.parentElement?.removeChild(this.move);\r\n            this.move = null;\r\n        }\r\n        if (this.capture) {\r\n            this.capture?.parentElement?.removeChild(this.capture);\r\n            this.capture = null;\r\n        }\r\n        if (this.check !== null) {\r\n            this.check.parentElement?.removeChild(this.check);\r\n            this.check = null;\r\n        }\r\n        this.khmerChessBoard.messageManager.log('Sound is disabled');\r\n    }\r\n\r\n    enable() {\r\n        this.isEnable = true;\r\n        this.move = this._addSound(AUDIO.move);\r\n        this.capture = this._addSound(AUDIO.capture);\r\n        this.check = this._addSound(AUDIO.check);\r\n        this.khmerChessBoard.messageManager.log('Sound is enabled');\r\n    }\r\n\r\n    _addSound(src: string) {\r\n        const sound = document.createElement('audio');\r\n        sound.src = src;\r\n        sound.setAttribute('preload', 'auto');\r\n        sound.setAttribute('controls', 'none');\r\n        sound.style.display = 'none';\r\n        document.body.appendChild(sound);\r\n        return sound;\r\n    }\r\n\r\n    play(flag: string) {\r\n        if (!this.isEnable) {\r\n            this.khmerChessBoard.messageManager.log('Sound is disable');\r\n            return;\r\n        }\r\n        try {\r\n            switch (flag) {\r\n                case SoundManager.MOVE_FLAG:\r\n                    this.move && this.move.play();\r\n                    break;\r\n                case SoundManager.CAPTURE_FLAG:\r\n                    this.capture && this.capture.play();\r\n                    break;\r\n                case SoundManager.CHECK_FLAG:\r\n                    this.check && this.check.play();\r\n                    break;\r\n                default:\r\n                    this.khmerChessBoard.messageManager.log('Invalid sound flag');\r\n            }\r\n        } catch (error) { }\r\n    }\r\n\r\n    playMove() {\r\n        this.play(SoundManager.MOVE_FLAG);\r\n    }\r\n\r\n    playCapture() {\r\n        this.play(SoundManager.CAPTURE_FLAG);\r\n    }\r\n\r\n    playCheck() {\r\n        this.play(SoundManager.CHECK_FLAG);\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import {\r\n    ListenerType,\r\n    EventHandler,\r\n} from 'khmer-chess';\r\n\r\nexport default class BoardManagerEventController<T> extends EventHandler {\r\n    static CLICK = 'click';\r\n    static SELECTED = 'selected';\r\n    static DESELECTED = 'deselected';\r\n    static ATTEMPT_MOVE = 'attempt-move';\r\n    static CHANGE_TURN = 'change-turn';\r\n    constructor() {\r\n        super({\r\n            events: {\r\n                CLICK: BoardManagerEventController.CLICK,\r\n                SELECTED: BoardManagerEventController.SELECTED,\r\n                ATTEMPT_MOVE: BoardManagerEventController.ATTEMPT_MOVE,\r\n                CHANGE_TURN: BoardManagerEventController.CHANGE_TURN,\r\n            },\r\n        });\r\n    }\r\n    click(data: T) {\r\n        this._addPropEvent(BoardManagerEventController.CLICK, data);\r\n    }\r\n    selected(data: T) {\r\n        this._addPropEvent(BoardManagerEventController.SELECTED, data);\r\n    }\r\n    deselected(data: T) {\r\n        this._addPropEvent(BoardManagerEventController.DESELECTED, data);\r\n    }\r\n    attemptMove(fromCell: T, toCell: T) {\r\n        this._addPropEvent(BoardManagerEventController.ATTEMPT_MOVE, {\r\n            fromCell,\r\n            toCell,\r\n        });\r\n    }\r\n    changeTurn() {\r\n        this._addPropEvent(BoardManagerEventController.CHANGE_TURN);\r\n    }\r\n    addOnCellClickEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(BoardManagerEventController.CLICK, listener);\r\n    }\r\n    removeOnCellClickEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(BoardManagerEventController.CLICK, listener);\r\n    }\r\n    addOnCellSelectedEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(BoardManagerEventController.SELECTED, listener);\r\n    }\r\n    removeOnCellSelectedEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(BoardManagerEventController.SELECTED, listener);\r\n    }\r\n    addOnCellDeselectedEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(BoardManagerEventController.DESELECTED, listener);\r\n    }\r\n    removeOnCellDeselectedEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(BoardManagerEventController.DESELECTED, listener);\r\n    }\r\n    addOnAttemptMoveEventListener(listener: ListenerType<{ fromCell: T, toCell: T }>) {\r\n        this._addOnEventListener(BoardManagerEventController.ATTEMPT_MOVE, listener);\r\n    }\r\n    removeOnAttemptMoveEventListener(listener: ListenerType<{ fromCell: T, toCell: T }>) {\r\n        this._removeOnEventListener(BoardManagerEventController.ATTEMPT_MOVE, listener);\r\n    }\r\n    addOnChangeTurnEventListener(listener: ListenerType<{ fromCell: T, toCell: T }>) {\r\n        this._addOnEventListener(BoardManagerEventController.CHANGE_TURN, listener);\r\n    }\r\n    removeOnChangeTurnEventListener(listener: ListenerType<{ fromCell: T, toCell: T }>) {\r\n        this._removeOnEventListener(BoardManagerEventController.CHANGE_TURN, listener);\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import {\r\n    EVENT_FLAG_ATTACK,\r\n    EVENT_FLAG_WIN,\r\n    PieceIndex,\r\n    PIECE_COLOR_WHITE,\r\n    EVENT_FLAG_DRAW,\r\n    EVENT_FLAG_COUNT_UP_OUT,\r\n    EVENT_FLAG_COUNTING_UP,\r\n    EVENT_FLAG_START_COUNTING,\r\n    PIECE_COLOR_BLACK,\r\n    Piece,\r\n} from 'khmer-chess';\r\nimport CellManager from '../CellManager';\r\nimport KhmerChessBoard from '../KhmerChessBoard';\r\n\r\nexport type Option = {\r\n    khmerChessBoard: KhmerChessBoard;\r\n    flag: string;\r\n    actorPieceIndex?: PieceIndex;\r\n    color: string;\r\n    countingToNumber?: number;\r\n    countingNumber?: number;\r\n};\r\nexport class BoardStatusEvent {\r\n    khmerChessBoard: KhmerChessBoard;\r\n    flag: string;\r\n    message = '';\r\n    actorPieceIndex: PieceIndex | null = null;\r\n    isWhite = false;\r\n    isAttacking = false;\r\n\r\n    isWin = false;\r\n\r\n    isDraw = false;\r\n    isCannotMove = false;\r\n\r\n    isStartCounting = false;\r\n    isCountingUp = false;\r\n    isCountUpOut = false;\r\n\r\n    countingToNumber: number | null = null\r\n    countingNumber: number | null = null\r\n\r\n    constructor({ khmerChessBoard, countingToNumber, countingNumber,\r\n        flag, actorPieceIndex, color }: Option) {\r\n        this.khmerChessBoard = khmerChessBoard;\r\n        this.flag = flag;\r\n        const isWhite = color === PIECE_COLOR_WHITE;\r\n        this.isWhite = isWhite;\r\n        this.actorPieceIndex = actorPieceIndex || null;\r\n        this.isWin = flag === EVENT_FLAG_WIN;\r\n        this.isAttacking = flag === EVENT_FLAG_ATTACK;\r\n        this.isStartCounting = flag === EVENT_FLAG_START_COUNTING;\r\n        if (this.isStartCounting) {\r\n            this.applyCount(countingToNumber || null, countingNumber || null);\r\n        }\r\n        this.isCountingUp = flag === EVENT_FLAG_COUNTING_UP;\r\n        if (this.isCountingUp) {\r\n            this.applyCount(countingToNumber || null, countingNumber || null);\r\n        }\r\n        this.isCountUpOut = flag === EVENT_FLAG_COUNT_UP_OUT;\r\n        if (this.isCountUpOut) {\r\n            this.applyCount(countingToNumber || null, countingNumber || null);\r\n        }\r\n        this.isDraw = this.isCountUpOut || flag === EVENT_FLAG_DRAW;\r\n        if (this.isDraw && !this.isCountUpOut) {\r\n            this.isCannotMove = true;\r\n        }\r\n        this.message = this.getMessage();\r\n    }\r\n    applyCount(countingToNumber: number | null, countingNumber: number | null) {\r\n        this.countingToNumber = countingToNumber;\r\n        this.countingNumber = countingNumber;\r\n    }\r\n    getMessage() {\r\n        const isEnglish = this.khmerChessBoard.options.isEnglish;\r\n        const color = this.isWhite ? PIECE_COLOR_WHITE : PIECE_COLOR_BLACK;\r\n        const boardManager = this.khmerChessBoard.boardManager;\r\n        const tran = (arr: [string, string]) => {\r\n            return arr[isEnglish ? 0 : 1];\r\n        };\r\n        const pTitle = (root: PieceIndex | CellManager | null | undefined) => {\r\n            if (!root || !root.piece) {\r\n                return tran(['unknown', '']);\r\n            }\r\n            return isEnglish ? root.piece.titleEnglish : root.piece.title;\r\n        };\r\n\r\n        if (this.isAttacking) {\r\n            const piece = this.actorPieceIndex?.piece;\r\n            const king = piece && boardManager.getKing(piece.colorOpponent);\r\n            return `${pTitle(this.actorPieceIndex)} ${tran(['is attacking', ''])} ${pTitle(king)}`;\r\n        }\r\n        if (this.isWin) {\r\n            const king = boardManager.getKing(color);\r\n            return `${pTitle(king)} ${tran(['wins', ''])}`;\r\n        }\r\n        if (this.isDraw) {\r\n            const king = boardManager.getKing(color);\r\n            if (this.isCannotMove) {\r\n                return `${pTitle(king)} ${tran(['stuck', ''])}`;\r\n            } else if (this.isCountUpOut) {\r\n                return `${pTitle(king)} ${isEnglish ? 'count all' : ''}`;\r\n            } else {\r\n                return `${tran(['draw', ''])}`;\r\n            }\r\n        }\r\n        if (this.isCannotMove) {\r\n            const king = boardManager.getKing(color);\r\n            return `${pTitle(king)} ${tran(['stuck', ''])}`;\r\n        }\r\n        if (this.isStartCounting) {\r\n            const king = boardManager.getKing(color);\r\n            return `${pTitle(king)} ${tran(['start counting from', ''])} ${this.countingNumber} ${tran(['to', ''])} ${this.countingToNumber}`;\r\n        }\r\n        if (this.isCountingUp) {\r\n            const king = boardManager.getKing(color);\r\n            return `${pTitle(king)} ${tran(['counting to', ''])} ${this.countingNumber} ${tran(['of', ''])} ${this.countingToNumber}`;\r\n        }\r\n        if (this.isCountUpOut) {\r\n            const king = boardManager.getKing(color);\r\n            return `${pTitle(king)} ${isEnglish ? 'count all' : ''}`;\r\n        }\r\n        return this.flag;\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import {\r\n    EVENT_FLAG_ATTACK,\r\n    EVENT_FLAG_WIN,\r\n    EventHandler,\r\n    ListenerType,\r\n    EVENT_FLAG_DRAW,\r\n    EVENT_FLAG_COUNT_UP_OUT,\r\n    EVENT_FLAG_COUNTING_UP,\r\n    EVENT_FLAG_START_COUNTING,\r\n    REN,\r\n    PieceIndex,\r\n} from 'khmer-chess';\r\nimport KhmerChessBoard from '../KhmerChessBoard';\r\nimport { BoardStatusEvent } from './BoardStatusEvent';\r\n\r\nexport default class BoardStatusEventController extends EventHandler {\r\n    static STATUS_EVENT = 'status-event';\r\n    constructor() {\r\n        super({\r\n            events: {\r\n                EVENT: BoardStatusEventController.STATUS_EVENT,\r\n            },\r\n        });\r\n    }\r\n    fireEvent(boardEvent: BoardStatusEvent) {\r\n        this._addPropEvent(BoardStatusEventController.STATUS_EVENT, boardEvent);\r\n    }\r\n    addBoardStatusEventListener(listener: ListenerType<BoardStatusEvent>) {\r\n        this._addOnEventListener(BoardStatusEventController.STATUS_EVENT, listener);\r\n    }\r\n    removeBoardStatusEventListener(listener: ListenerType<BoardStatusEvent>) {\r\n        this._removeOnEventListener(BoardStatusEventController.STATUS_EVENT, listener);\r\n    }\r\n\r\n    checkBoardEvent(khmerChessBoard: KhmerChessBoard) {\r\n        const { boardManager, playManager } = khmerChessBoard;\r\n        const boardStatusEventController = boardManager.boardStatusEventController;\r\n        const move = playManager.currentMove;\r\n        if (!move) {\r\n            return;\r\n        }\r\n        const ren = REN.fromString(move.renStr);\r\n        ren.syncWithMove(move);\r\n        if (move.attacker && move.attacker.piece) {\r\n            const boardEvent = new BoardStatusEvent({\r\n                khmerChessBoard,\r\n                flag: EVENT_FLAG_ATTACK,\r\n                actorPieceIndex: move.attacker,\r\n                color: move.attacker.piece.color,\r\n            });\r\n            boardStatusEventController.fireEvent(boardEvent);\r\n        }\r\n        const winColor = move.winColor;\r\n        if (winColor) {\r\n            const boardEvent = new BoardStatusEvent({\r\n                khmerChessBoard,\r\n                flag: EVENT_FLAG_WIN,\r\n                actorPieceIndex: move.attacker as PieceIndex,\r\n                color: winColor,\r\n            });\r\n            boardStatusEventController.fireEvent(boardEvent);\r\n        }\r\n        const stuckColor = move.stuckColor;\r\n        if (stuckColor) {\r\n            const boardEvent = new BoardStatusEvent({\r\n                khmerChessBoard,\r\n                flag: EVENT_FLAG_DRAW,\r\n                color: stuckColor,\r\n            });\r\n            boardStatusEventController.fireEvent(boardEvent);\r\n        }\r\n        if (move.isStartCounting) {\r\n            const boardEvent = new BoardStatusEvent({\r\n                khmerChessBoard,\r\n                flag: EVENT_FLAG_START_COUNTING,\r\n                color: ren.countUp.color as string,\r\n                countingToNumber: ren.countUp.countingToNumber as number,\r\n                countingNumber: ren.countUp.countingNumber as number,\r\n            });\r\n            boardStatusEventController.fireEvent(boardEvent);\r\n        }\r\n        if (ren.countUp.isCountingUp) {\r\n            const boardEvent = new BoardStatusEvent({\r\n                khmerChessBoard,\r\n                flag: EVENT_FLAG_COUNTING_UP,\r\n                color: ren.countUp.color as string,\r\n                countingToNumber: ren.countUp.countingToNumber as number,\r\n                countingNumber: ren.countUp.countingNumber as number,\r\n            });\r\n            boardStatusEventController.fireEvent(boardEvent);\r\n        }\r\n        if (ren.countUp.isCountingOut) {\r\n            const boardEvent = new BoardStatusEvent({\r\n                khmerChessBoard,\r\n                flag: EVENT_FLAG_COUNT_UP_OUT,\r\n                color: ren.countUp.color as string,\r\n                countingToNumber: ren.countUp.countingToNumber as number,\r\n                countingNumber: ren.countUp.countingToNumber as number,\r\n            });\r\n            boardStatusEventController.fireEvent(boardEvent);\r\n        }\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import {\r\n    ListenerType,\r\n    EventHandler,\r\n} from 'khmer-chess';\r\n\r\nexport default class PlayManagerEventController<T> extends EventHandler {\r\n    static CLICK = 'click';\r\n    static BLACK = 'back';\r\n    static PLAY = 'play';\r\n    static PAUSE = 'pause';\r\n    static NEXT = 'next';\r\n    constructor() {\r\n        super({\r\n            events: {\r\n                CLICK: PlayManagerEventController.CLICK,\r\n                SELECTED: PlayManagerEventController.BLACK,\r\n                ATTEMPT_MOVE: PlayManagerEventController.PAUSE,\r\n                CHANGE_TURN: PlayManagerEventController.NEXT,\r\n            },\r\n        });\r\n    }\r\n    click(data: T) {\r\n        this._addPropEvent(PlayManagerEventController.CLICK, data);\r\n    }\r\n    back() {\r\n        this._addPropEvent(PlayManagerEventController.BLACK);\r\n    }\r\n    play() {\r\n        this._addPropEvent(PlayManagerEventController.PLAY);\r\n    }\r\n    pause() {\r\n        this._addPropEvent(PlayManagerEventController.PAUSE);\r\n    }\r\n    next() {\r\n        this._addPropEvent(PlayManagerEventController.NEXT);\r\n    }\r\n    addOnDataClickEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(PlayManagerEventController.CLICK, listener);\r\n    }\r\n    removeOnDataClickEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(PlayManagerEventController.CLICK, listener);\r\n    }\r\n    addOnBackEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(PlayManagerEventController.BLACK, listener);\r\n    }\r\n    removeOnBackEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(PlayManagerEventController.BLACK, listener);\r\n    }\r\n    addOnPlayEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(PlayManagerEventController.PLAY, listener);\r\n    }\r\n    removeOnPlayEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(PlayManagerEventController.PLAY, listener);\r\n    }\r\n    addOnPauseEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(PlayManagerEventController.PAUSE, listener);\r\n    }\r\n    removeOnPauseEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(PlayManagerEventController.PAUSE, listener);\r\n    }\r\n    addOnNextEventListener(listener: ListenerType<T>) {\r\n        this._addOnEventListener(PlayManagerEventController.NEXT, listener);\r\n    }\r\n    removeOnNextEventListener(listener: ListenerType<T>) {\r\n        this._removeOnEventListener(PlayManagerEventController.NEXT, listener);\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import { Piece, PIECE_COLOR_BLACK, PIECE_COLOR_WHITE } from 'khmer-chess';\r\nimport {\r\n    PIECES_SVG,\r\n    svgCSS,\r\n} from '../providers/svg';\r\nimport {\r\n    CSS_TABLE_SELECTOR,\r\n    SELECTED_CLASS_NAME,\r\n    PIECE_CLASS_NAME,\r\n    ATTACKED_CLASS_NAME,\r\n    CSS_PSEUDO_HIGHLIGHT,\r\n    CSS_PSEUDO_PIECE,\r\n    POPUP_CLASS_NAME,\r\n    MOVED_CLASS_NAME,\r\n    CAN_MOVE_CLASS_NAME,\r\n    TURN_CLASS_NAME,\r\n    GRAVEYARD_CLASS_NAME,\r\n    TR_PIECE_CLASS_NAME,\r\n    TR_PIECE_SHADOW_CLASS_NAME,\r\n    CSS_P2P,\r\n} from '../providers/constance';\r\nimport appendCss from './appendCss';\r\nimport OptionsManager from '../OptionsManager';\r\n\r\nexport default function addCss({ uniqueClassName, options }:\r\n    { uniqueClassName: string, options: OptionsManager }) {\r\n    const { width, cellWidth } = options;\r\n    const pieceFontSize = width / 12;\r\n    const selector = `${CSS_TABLE_SELECTOR}.${uniqueClassName}`;\r\n    const p2pSelector = `${CSS_TABLE_SELECTOR}.${CSS_P2P}.${uniqueClassName}`;\r\n\r\n    let css = '';\r\n    css += `\r\n        ${selector} {\r\n            table-layout: fixed;\r\n            border-collapse: collapse;\r\n            border-spacing: 0px;\r\n            width: ${width}px;\r\n            text-align: center;\r\n            border: 0px;\r\n            padding: 0px;\r\n            margin: auto;\r\n            background-color: #f4d1a6;\r\n        }\r\n        ${selector}.${POPUP_CLASS_NAME} {\r\n            position: fixed;\r\n            box-shadow: 10px 10px 80px #000000, -10px -10px 80px #000000;\r\n        }\r\n        ${selector} table.${GRAVEYARD_CLASS_NAME} {\r\n            table-layout: fixed;\r\n            border-collapse: collapse;\r\n            border-spacing: 0px;\r\n            text-align: center;\r\n            border: 0px;\r\n            padding: 0px;\r\n            margin: auto;\r\n            background-color: #ffc57d;\r\n        }\r\n        ${selector} .${TR_PIECE_CLASS_NAME} {\r\n            width: ${width}px;\r\n            height: ${cellWidth}px;\r\n        }\r\n        ${selector} .${TR_PIECE_SHADOW_CLASS_NAME} {\r\n            width: ${width}px;\r\n            height: 0;\r\n        }\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td {\r\n            user-select: none;\r\n            border: 1px solid #9e9e9e87;\r\n            padding: 0px;\r\n            margin: 0px;\r\n            max-width: ${cellWidth}px;\r\n            max-height: ${cellWidth}px;\r\n            background-repeat: no-repeat;\r\n            cursor: pointer;\r\n        }\r\n        ${selector} .${TR_PIECE_SHADOW_CLASS_NAME} div {\r\n            width: ${cellWidth}px;\r\n            height: ${cellWidth}px;\r\n            position: absolute;\r\n        }\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td,\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td::before,\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td::after {\r\n            font-size: ${pieceFontSize}px;\r\n        }\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td::after {\r\n            opacity: 0.4;\r\n        }\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td::before {\r\n            float: left;\r\n        }\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td:not(.graveyard)::before,\r\n        ${selector} .${TR_PIECE_CLASS_NAME} td:not(.graveyard)::after {\r\n            width: ${cellWidth}px;\r\n            height: ${cellWidth}px;\r\n            background-size: ${cellWidth}px ${cellWidth}px;\r\n            display: block;\r\n            content: ' ';\r\n        }\r\n    `;\r\n    // moved cells\r\n    css += `\r\n    ${selector} .${TR_PIECE_CLASS_NAME} td.${MOVED_CLASS_NAME}${CSS_PSEUDO_HIGHLIGHT} {\r\n        ${svgCSS.moved()}\r\n    }`;\r\n    // selected pice\r\n    css += `\r\n    ${selector} .${TR_PIECE_CLASS_NAME} td.${SELECTED_CLASS_NAME}${CSS_PSEUDO_HIGHLIGHT} {\r\n        ${svgCSS.selected()}\r\n    }`;\r\n    // can move\r\n    css += `\r\n    ${selector} .${TR_PIECE_CLASS_NAME} td.${CAN_MOVE_CLASS_NAME}${CSS_PSEUDO_HIGHLIGHT} {\r\n        ${svgCSS.canMove()}\r\n    }`;\r\n\r\n    css += piecesImageBackground(selector);\r\n    css += piecesImageBackground(p2pSelector, {\r\n        color: PIECE_COLOR_BLACK,\r\n        css: `path {\r\n        transform-origin: center;\r\n        transform: scaleY(-1);\r\n     }`});\r\n\r\n    appendCss(uniqueClassName, css);\r\n}\r\n\r\nfunction piecesImageBackground(selector: string, moreBG?: { css: string, color?: string }) {\r\n    const moreCss: { [key: string]: string } = {\r\n        [PIECE_COLOR_WHITE]: '',\r\n        [PIECE_COLOR_BLACK]: '',\r\n    };\r\n    if (moreBG) {\r\n        if (moreBG.color) {\r\n            moreCss[moreBG.color] = moreBG.css;\r\n        } else {\r\n            moreCss[PIECE_COLOR_WHITE] = moreBG.css;\r\n            moreCss[PIECE_COLOR_BLACK] = moreBG.css;\r\n        }\r\n    }\r\n    let css = '';\r\n    // Turn\r\n    css += Piece.colorChars.map((color) => {\r\n        return Piece.pieceChars.map((type) => {\r\n            const attackedSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\r\n                <style>\r\n                    ${svgCSS.turn()}\r\n                    ${moreCss[color]}\r\n                </style>\r\n                ${PIECES_SVG[color + type]}\r\n            </svg>`;\r\n            return `\r\n                ${selector} .${TR_PIECE_CLASS_NAME} td.${PIECE_CLASS_NAME}.${TURN_CLASS_NAME}.type-${type}.color-${color}${CSS_PSEUDO_PIECE} {\r\n                    background-image: url('data:image/svg+xml;utf8,${encodeURIComponent(attackedSVG)}');\r\n                }\r\n                `;\r\n        }).join('');\r\n    }).join('');\r\n    // Attacked\r\n    css += Piece.colorChars.map((color) => {\r\n        return Piece.pieceChars.map((type) => {\r\n            const attackedSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\r\n                <style>\r\n                    ${svgCSS.attacked()}\r\n                    ${moreCss[color]}\r\n                </style>\r\n                ${PIECES_SVG[color + type]}\r\n            </svg>`;\r\n            const notAttackedSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\r\n                <style>\r\n                    ${svgCSS.notAttacked()}\r\n                    ${moreCss[color]}\r\n                </style>\r\n                ${PIECES_SVG[color + type]}\r\n            </svg>`;\r\n            return `\r\n                ${selector} .${TR_PIECE_CLASS_NAME} td.${PIECE_CLASS_NAME}.${ATTACKED_CLASS_NAME}.type-${type}.color-${color}${CSS_PSEUDO_PIECE} {\r\n                    background-image: url('data:image/svg+xml;utf8,${encodeURIComponent(attackedSVG)}');\r\n                }\r\n                ${selector} .${TR_PIECE_CLASS_NAME} td.${PIECE_CLASS_NAME}.type-${type}.color-${color}${CSS_PSEUDO_PIECE}\r\n                , ${selector} .${TR_PIECE_SHADOW_CLASS_NAME} div.type-${type}.color-${color}{\r\n                    background-image: url('data:image/svg+xml;utf8,${encodeURIComponent(notAttackedSVG)}');\r\n                }\r\n                `;\r\n        }).join('');\r\n    }).join('');\r\n    return css;\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import OptionsManager from '../OptionsManager';\r\n\r\nimport {\r\n    HORIZONTAL_NOTE_LETTERS,\r\n    HORIZONTAL_NOTE_LETTERS_ENGLISH,\r\n    KhmerChess,\r\n    ROW_NUMBER,\r\n} from 'khmer-chess';\r\nimport appendCss from './appendCss';\r\nimport { genBackgroundNote } from '../providers/svg';\r\nimport {\r\n    TD_GRAVEYARD_NUMBER,\r\n    CSS_TABLE_SELECTOR,\r\n    GRAVEYARD_NOTE_PREFIX_CLASS,\r\n    BOARD_NOTE_V_PREFIX_CLASS,\r\n    BOARD_NOTE_H_PREFIX_CLASS,\r\n    FLIPPED_CLASS,\r\n    CSS_PSEUDO_NOTE,\r\n} from '../providers/constance';\r\n\r\nexport default function addCssNote({ uniqueClassName, options, isEnglish }:\r\n    { uniqueClassName: string, options: OptionsManager, isEnglish?: boolean }) {\r\n    const tranIndex = (i: number) => {\r\n        return isEnglish ? `${i}` : KhmerChess.toKhmerNum(i);\r\n    };\r\n    const horizontalLetters = isEnglish ? HORIZONTAL_NOTE_LETTERS_ENGLISH : HORIZONTAL_NOTE_LETTERS;\r\n    const { width, cellWidth } = options;\r\n    const selector = `${CSS_TABLE_SELECTOR}.${uniqueClassName}`;\r\n    let css = '';\r\n    const fSize = 15 * width / 600;\r\n    for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\r\n        const bgImg = genBackgroundNote([{\r\n            x: cellWidth / 2 - cellWidth / 10,\r\n            y: cellWidth,\r\n            t: tranIndex(i),\r\n        }], cellWidth, fSize);\r\n        css += `\r\n        ${selector} td${isEnglish ? '.' + options.enClass : ''}.${GRAVEYARD_NOTE_PREFIX_CLASS}-${i + 1}${CSS_PSEUDO_NOTE} {\r\n            background-image: ${bgImg};\r\n        }\r\n        `;\r\n    }\r\n\r\n    const hx = cellWidth / 2 - cellWidth / 10;\r\n    const vy = cellWidth / 2 + cellWidth / 10;\r\n    let bgImg = (i: number) => genBackgroundNote([{\r\n        x: hx,\r\n        y: cellWidth,\r\n        t: horizontalLetters[i],\r\n    }], cellWidth, fSize);\r\n    for (let i = 0; i < ROW_NUMBER; i++) {\r\n        css += `\r\n        ${selector} td${isEnglish ? '.' + options.enClass : ''}.${BOARD_NOTE_H_PREFIX_CLASS}-${i + 1}${CSS_PSEUDO_NOTE} {\r\n            background-image: ${bgImg(i)};\r\n        }\r\n        ${selector} td${isEnglish ? '.' + options.enClass : ''}.${FLIPPED_CLASS}.${BOARD_NOTE_H_PREFIX_CLASS}-${i + 1}${CSS_PSEUDO_NOTE} {\r\n            background-image: ${bgImg(ROW_NUMBER - i - 1)};\r\n        }\r\n        `;\r\n    }\r\n    bgImg = (i) => genBackgroundNote([{\r\n        x: 0,\r\n        y: vy,\r\n        t: tranIndex(i),\r\n    }], cellWidth, fSize);\r\n    for (let j = 0; j < ROW_NUMBER; j++) {\r\n        css += `\r\n            ${selector} td${isEnglish ? '.' + options.enClass : ''}.${BOARD_NOTE_V_PREFIX_CLASS}-${j + 1}${CSS_PSEUDO_NOTE} {\r\n                background-image: ${bgImg(j)};\r\n            }\r\n            ${selector} td${isEnglish ? '.' + options.enClass : ''}.flipped.${BOARD_NOTE_V_PREFIX_CLASS}-${j + 1}${CSS_PSEUDO_NOTE} {\r\n                background-image: ${bgImg(ROW_NUMBER - j - 1)};\r\n            }\r\n            `;\r\n    }\r\n\r\n    bgImg = (i) => genBackgroundNote([\r\n        {\r\n            x: hx,\r\n            y: cellWidth,\r\n            t: horizontalLetters[i],\r\n        }, {\r\n            x: 0,\r\n            y: vy,\r\n            t: tranIndex(i),\r\n        },\r\n    ], cellWidth, fSize);\r\n    css += `\r\n    ${selector} td${isEnglish ? '.' + options.enClass : ''}.${BOARD_NOTE_V_PREFIX_CLASS}-1.${BOARD_NOTE_H_PREFIX_CLASS}-1${CSS_PSEUDO_NOTE} {\r\n        background-image: ${bgImg(0)};\r\n    }\r\n    ${selector} td${isEnglish ? '.' + options.enClass : ''}.${FLIPPED_CLASS}.${BOARD_NOTE_V_PREFIX_CLASS}-1.${BOARD_NOTE_H_PREFIX_CLASS}-1${CSS_PSEUDO_NOTE} {\r\n        background-image: ${bgImg(7)};\r\n    }\r\n    `;\r\n\r\n    appendCss(uniqueClassName, css);\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","export default function appendCss(uniqueClassName: string, css: string) {\r\n    const head = document.head || document.getElementsByTagName('head')[0];\r\n    const style = document.createElement('style');\r\n    style.classList.add(uniqueClassName);\r\n    head.appendChild(style);\r\n    style.appendChild(document.createTextNode(css));\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import BoardManager from '../BoardManager';\r\nimport GraveyardManager from '../GraveyardManager';\r\nimport OptionsManager from '../OptionsManager';\r\n\r\nimport {\r\n    Point,\r\n    ROW_NUMBER,\r\n} from 'khmer-chess';\r\nimport CellManager from '../CellManager';\r\nimport {\r\n    TD_GRAVEYARD_NUMBER,\r\n    TABLE_CLASS,\r\n    GRAVEYARD_CLASS_NAME,\r\n    TR_PIECE_CLASS_NAME,\r\n    TR_PIECE_SHADOW_CLASS_NAME,\r\n} from '../providers/constance';\r\n\r\ntype Type = {\r\n    uniqueClassName: string;\r\n    options: OptionsManager;\r\n    container: HTMLElement;\r\n    boardManager: BoardManager;\r\n    graveyardManager: GraveyardManager;\r\n};\r\nexport default function drawBoardAndGraveyard({\r\n    uniqueClassName, options, container, boardManager, graveyardManager }: Type) {\r\n    const {\r\n        width,\r\n        cellWidth,\r\n        graveyardContainerHeight,\r\n        graveyardWidth,\r\n        graveyardContainerPadding,\r\n    } = options;\r\n\r\n    const createTable = (parent = container) => {\r\n        const table = document.createElement('table');\r\n        parent.appendChild(table);\r\n        return table;\r\n    };\r\n    const createTbody = (parent: HTMLTableElement) => {\r\n        const tbody = document.createElement('tbody');\r\n        parent.appendChild(tbody);\r\n        return tbody;\r\n    };\r\n    const createTr = (parent: HTMLTableSectionElement) => {\r\n        const tr = document.createElement('tr');\r\n        parent.appendChild(tr);\r\n        return tr;\r\n    };\r\n    const createTd = (parent: HTMLTableRowElement) => {\r\n        const td = document.createElement('td');\r\n        parent.appendChild(td);\r\n        return td;\r\n    };\r\n\r\n    const table = createTable();\r\n    table.classList.add(TABLE_CLASS);\r\n    table.classList.add(uniqueClassName);\r\n    const tbody = createTbody(table);\r\n\r\n    for (let i = 0; i < ROW_NUMBER; i++) {\r\n        const tr = createTr(tbody);\r\n        tr.classList.add(TR_PIECE_CLASS_NAME);\r\n        for (let j = 0; j < ROW_NUMBER; j++) {\r\n            const td = createTd(tr);\r\n            const cell = new CellManager(new Point(j, ROW_NUMBER - i - 1), td, null);\r\n            const index = Point.xyToIndex(j, ROW_NUMBER - i - 1);\r\n            boardManager.set(index, cell);\r\n        }\r\n    }\r\n    const tr = createTr(tbody);\r\n    tr.classList.add(TR_PIECE_SHADOW_CLASS_NAME);\r\n    const tdShadow = createTd(tr);\r\n\r\n    const trPlayerContainer = createTr(tbody);\r\n    trPlayerContainer.classList.add('tr-player');\r\n    trPlayerContainer.style.height = `${graveyardContainerHeight / 3}`;\r\n\r\n    const tdPlayerContainer = createTd(trPlayerContainer);\r\n    tdPlayerContainer.classList.add('player');\r\n    tdPlayerContainer.addEventListener('mousewheel', function (e: any) {\r\n        this.scrollLeft -= (e.wheelDelta);\r\n        e.preventDefault();\r\n    }, false);\r\n    tdPlayerContainer.colSpan = 8;\r\n\r\n    const trGraveyardContainer = createTr(tbody);\r\n    trGraveyardContainer.classList.add('tr-graveyard');\r\n    trGraveyardContainer.style.height = `${graveyardContainerHeight}`;\r\n\r\n    const tdGraveyardContainer = createTd(trGraveyardContainer);\r\n    tdGraveyardContainer.classList.add('graveyard');\r\n    tdGraveyardContainer.addEventListener('mousewheel', function (e: any) {\r\n        this.scrollLeft -= (e.wheelDelta);\r\n        e.preventDefault();\r\n    }, false);\r\n    tdGraveyardContainer.colSpan = 8;\r\n\r\n    const div = document.createElement('div');\r\n    div.style.overflowX = 'scroll';\r\n    div.style.overflowY = 'hidden';\r\n\r\n    tdGraveyardContainer.appendChild(div);\r\n    const tableGraveyard = createTable(div);\r\n    tableGraveyard.classList.add(GRAVEYARD_CLASS_NAME);\r\n    tableGraveyard.style.width = `${graveyardWidth}`;\r\n    tableGraveyard.style.height = `${cellWidth}`;\r\n    tableGraveyard.style.boxShadow = `inset 0 0 ${width / 60}px #000000`;\r\n\r\n    const tbodyGraveyard = createTbody(tableGraveyard);\r\n    const trGraveyard = createTr(tbodyGraveyard);\r\n    trGraveyard.classList.add(TR_PIECE_CLASS_NAME);\r\n    trGraveyard.style.width = `${graveyardWidth}`;\r\n\r\n    for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\r\n        const tdGraveyard = createTd(trGraveyard);\r\n        const cell = new CellManager(new Point(i, 0), tdGraveyard, null, true);\r\n        graveyardManager.push(cell);\r\n    }\r\n\r\n    return {\r\n        domRootBoard: table,\r\n        domGraveyard: tableGraveyard,\r\n        playerContainer: tdPlayerContainer,\r\n        tdShadow,\r\n    };\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","export function randomString(length = 8) {\r\n    let result = '';\r\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    const charactersLength = characters.length;\r\n    for (let i = 0; i < length; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    }\r\n    return result;\r\n};\r\n\r\nconst _idList: string[] = [];\r\nexport function genId() {\r\n    let id = randomString(8);\r\n    while (~_idList.indexOf(id)) {\r\n        id = randomString(4);\r\n    }\r\n    _idList.push(id);\r\n    return id;\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","const move = require('../../public/assets/Move.mp3').default;\r\nconst capture = require('../../public/assets/Capture.mp3').default;\r\nconst check = require('../../public/assets/Check.mp3').default;\r\n\r\nexport default {\r\n    move,\r\n    capture,\r\n    check,\r\n};\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","export const BORDER_WIDTH = 1;\r\nexport const MIN_CELL_WIDTH = 5;\r\nexport const TD_GRAVEYARD_NUMBER = 30;\r\nexport const TABLE_CLASS = 'khmer-chess-board';\r\nexport const CSS_P2P = 'p2p';\r\nexport const CSS_TABLE_SELECTOR = `table.${TABLE_CLASS}`;\r\nexport const SELECTED_CLASS_NAME = 'selected';\r\nexport const CAN_MOVE_CLASS_NAME = 'can-move';\r\nexport const MOVED_CLASS_NAME = 'moved';\r\nexport const ATTACKED_CLASS_NAME = 'attacked';\r\nexport const TURN_CLASS_NAME = 'turn';\r\nexport const GRAVEYARD_CLASS_NAME = 'tb-graveyard';\r\nexport const TR_PIECE_CLASS_NAME = 'tr-piece';\r\nexport const TR_PIECE_SHADOW_CLASS_NAME = 'tr-piece-shadow';\r\nexport const PIECE_CLASS_NAME = 'piece';\r\nexport const POPUP_CLASS_NAME = 'popup';\r\nexport const GRAVEYARD_NOTE_PREFIX_CLASS = 'note-gy';\r\nexport const BOARD_NOTE_V_PREFIX_CLASS = 'note-board-v';\r\nexport const BOARD_NOTE_H_PREFIX_CLASS = 'note-board-h';\r\nexport const FLIPPED_CLASS = 'flipped';\r\nexport const CSS_PSEUDO_HIGHLIGHT = '::after';\r\nexport const CSS_PSEUDO_PIECE = '';\r\nexport const CSS_PSEUDO_NOTE = '::before';\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import {\r\n   PIECE_COLOR_BLACK,\r\n   PIECE_COLOR_WHITE,\r\n   PIECE_TYPE_BOAT,\r\n   PIECE_TYPE_TRANSFORM_FISH,\r\n   PIECE_TYPE_GENERAL,\r\n   PIECE_TYPE_QUEEN,\r\n   PIECE_TYPE_KING,\r\n   PIECE_TYPE_HORSE,\r\n   PIECE_TYPE_FISH,\r\n} from 'khmer-chess';\r\nimport {\r\n   boatSVG,\r\n   fishSVG,\r\n   generalSVG,\r\n   horseSVG,\r\n   kingSVG,\r\n   queenSVG,\r\n   transformFishSVG,\r\n} from 'k4us-share/types';\r\n\r\nexport const WOOD_COLORS = {\r\n   WHITE: '#ffffff',\r\n   BLACK: '#422007',\r\n};\r\n\r\nconst filterId = 'drop-shadow';\r\nconst SVG_FILTER = `<defs>\r\n<filter id=\"${filterId}\" height=\"130%\">\r\n  <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>\r\n  <feOffset dx=\"5\" dy=\"5\" result=\"offsetblur\"/>\r\n  <feMerge>\r\n    <feMergeNode/>\r\n    <feMergeNode in=\"SourceGraphic\"/>\r\n  </feMerge>\r\n</filter>\r\n</defs>`;\r\n\r\nboatSVG.init();\r\nhorseSVG.init();\r\ngeneralSVG.init();\r\nkingSVG.init();\r\nqueenSVG.init();\r\nfishSVG.init();\r\ntransformFishSVG.init();\r\n\r\nexport const PIECES_SVG = {\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_BOAT}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n    d=\"${boatSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_HORSE}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n    d=\"${horseSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_GENERAL}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n    d=\"${generalSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_KING}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n    d=\"${kingSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_QUEEN}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n    d=\"${queenSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_FISH}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n    d=\"${fishSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_WHITE}${PIECE_TYPE_TRANSFORM_FISH}`]: `\r\n    ${SVG_FILTER}\r\n     <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\"\r\n     d=\"${transformFishSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_BOAT}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${boatSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_HORSE}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${horseSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_GENERAL}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${generalSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_KING}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${kingSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_QUEEN}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${queenSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_FISH}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${fishSVG.pathData[0]}\" />\r\n `,\r\n   [`${PIECE_COLOR_BLACK}${PIECE_TYPE_TRANSFORM_FISH}`]: `\r\n    ${SVG_FILTER}\r\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\"\r\n    d=\"${transformFishSVG.pathData[0]}\" />\r\n `,\r\n};\r\n\r\nexport const svgCSS = {\r\n   attacked: (color?: string) => `path {\r\n      stroke: red;\r\n      stroke-width: 1px;\r\n      stroke-linejoin: round;\r\n      animation-name: attacking;\r\n      animation-duration: 1s;\r\n      animation-iteration-count: infinite;\r\n   }\r\n   @keyframes attacking {\r\n      0% {\r\n         stroke-width: 20px;\r\n      }\r\n      50% {\r\n         stroke-width: 1px;\r\n      }\r\n      100% {\r\n         stroke-width: 20px;\r\n      }\r\n   }`,\r\n   notAttacked: (color?: string) => `path {\r\n   }`,\r\n   turn: (color?: string) => `path {\r\n      stroke: #3d8a365f;\r\n      stroke-width: 10px;\r\n      stroke-linejoin: round;\r\n   }\r\n   `,\r\n   selected: (color?: string) => 'background: radial-gradient(#ff00f577, #3d8a3677) !important;',\r\n   moved: (color?: string) => 'background: radial-gradient(#c0aeee99, #94e9d788) !important;',\r\n   canMove: (color?: string) => 'background: radial-gradient(#ff00f500, #3d8a3677) !important;',\r\n};\r\n\r\ntype NoteText = {\r\n   x: number,\r\n   y: number,\r\n   t: string\r\n}\r\nexport function genBackgroundNote(tObjects: Array<NoteText>, cellWidth: number, fSize: number) {\r\n   const text = tObjects.map((obj) => {\r\n      return `<text x='${obj.x}' y='${obj.y}' fill='grey' font-size='${fSize}'>${obj.t}</text>`;\r\n   }).join('');\r\n   const svg = `<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='${cellWidth}px' width='${cellWidth}px'>\r\n      ${text}\r\n   </svg>`;\r\n   return `url(\"data:image/svg+xml;utf8,${encodeURIComponent(svg)}\")`;\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n **/","import config from '../package.json';\r\nimport { VERTICAL_NOTE_LETTERS, VERTICAL_NOTE_LETTERS_ENGLISH } from './brain/constant';\r\nimport KPGN from './kpgn/KPGN';\r\nimport Move from './kpgn/Move';\r\nimport asciiTable from './other/table';\r\nimport { PieceIndex } from './ren';\r\nimport Point from './ren/Point';\r\nimport REN from './ren/REN';\r\n\r\nexport default class KhmerChess {\r\n    static title = config.name;\r\n    static version = config.version;\r\n    kpgn: KPGN;\r\n    constructor(renStr?: string) {\r\n        const ren = REN.fromString(renStr);\r\n        this.kpgn = new KPGN(ren);\r\n    }\r\n\r\n    loadKpng(option: object) {\r\n        this.kpgn.fromJson(option);\r\n    }\r\n\r\n    resetBoard() {\r\n        this.kpgn.ren = REN.fromString();\r\n    }\r\n\r\n    getCanMoves(): PieceIndex[] {\r\n        const pieceIndices = this.kpgn.ren.genAllCanMoves();\r\n        return pieceIndices;\r\n    }\r\n    getCanMovePointsByPoint(point: Point): Point[] {\r\n        const canMovePoints = this.kpgn.ren.getCanMovePointsByPoint(point);\r\n        return canMovePoints;\r\n    }\r\n\r\n    validateRENStr(renStr: string) {\r\n        try {\r\n            REN.fromString(renStr);\r\n            return { valid: true, error_number: 0, error: 'No errors.' };\r\n        } catch (error) {\r\n            return { valid: false, error_number: 1, error: error.message };\r\n        }\r\n    }\r\n\r\n    getRENStr() {\r\n        return this.kpgn.ren.toString();\r\n    }\r\n\r\n    get piecesInBoardMultiArray() {\r\n        return this.kpgn.ren.board.piecesMultiArray;\r\n    }\r\n\r\n    get piecesInBoard() {\r\n        return this.kpgn.ren.board.pieces;\r\n    }\r\n\r\n    get piecesInGraveyard() {\r\n        return this.kpgn.ren.graveyard.pieces;\r\n    }\r\n\r\n    // Khmer Portable Game Notation <file-name>.kpgn.json\r\n    getKPGN() {\r\n        return this.kpgn.toJson();\r\n    }\r\n\r\n    loadKpgn(kpgnJosn: any, options: any) {\r\n        this.kpgn = new KPGN(this.kpgn.ren);\r\n    }\r\n\r\n    drawAscii() {\r\n        return asciiTable(this.kpgn.ren);\r\n    }\r\n\r\n    get turn() {\r\n        return this.kpgn.ren.turn;\r\n    }\r\n\r\n    set turn(turn: string) {\r\n        this.kpgn.ren.turn = turn;\r\n    }\r\n\r\n    move(moveFromIndex: number, moveToIndex: number): Move | null {\r\n        const move = this.kpgn.ren.move(moveFromIndex, moveToIndex);\r\n        this.kpgn.addMove(move);\r\n        return move;\r\n    }\r\n\r\n    /**\r\n     * Move all pieces to graveyard except kings\r\n     * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\r\n     */\r\n    clearBoard() {\r\n        this.kpgn.ren = REN.fromString('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\r\n    }\r\n\r\n    getHistories() {\r\n        return this.kpgn.moves;\r\n    }\r\n\r\n    static toKhmerNum(englishNum: number) {\r\n        const str = `${englishNum}`;\r\n        const result = str.split('').map((c) => {\r\n            return VERTICAL_NOTE_LETTERS[VERTICAL_NOTE_LETTERS_ENGLISH.indexOf(c)];\r\n        }).join('');\r\n        return result;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import { HORIZONTAL_CODE_LETTERS } from './constant';\r\nimport jsis from './jsis';\r\n\r\nexport default class HVPont {\r\n    h: string;\r\n    v: number;\r\n    get x() {\r\n        return HORIZONTAL_CODE_LETTERS.indexOf(this.h);\r\n    }\r\n    get y() {\r\n        return this.v - 1;\r\n    }\r\n    get indexCode() {\r\n        return `${this.h}${this.v}`;\r\n    }\r\n    constructor(h: string, v?: string | number) {\r\n        if (jsis.isUndefined(v)) {\r\n            h = h[0];\r\n            v = h[1];\r\n        }\r\n        this.h = h;\r\n        this.v = Number(v);\r\n    }\r\n\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import Piece from '../ren/Piece';\r\nimport PieceIndex from '../ren/PieceIndex';\r\nimport Point from '../ren/Point';\r\nimport boardHelper from './boardHelper';\r\nimport { PIECE_COLOR_BLACK, PIECE_COLOR_WHITE } from './constant';\r\n// abcdecbaooooooooffffffffoooooooooooooooommmmmmmmoooooooohijlkjih\r\nexport type OptionsType = {\r\n    piecesString: string;\r\n    currentTurn: string;\r\n    isQueenMoved: boolean;\r\n    isKingMoved: boolean;\r\n    genCanMove: boolean;\r\n    genCanMoveForAnother: boolean;\r\n};\r\nexport type CalCountPropsType = {\r\n    color: string,\r\n    piecesString: string;\r\n    force: boolean;\r\n};\r\nexport default class MoveHelper implements OptionsType {\r\n    piecesString: string;\r\n    currentTurn: string;\r\n    isQueenMoved: boolean;\r\n    isKingMoved: boolean;\r\n    genCanMove: boolean;\r\n    genCanMoveForAnother: boolean;\r\n\r\n    whiteMoves: PieceIndex[];\r\n    blackMoves: PieceIndex[];\r\n    whiteKingInDanger: Point[] | null;\r\n    whiteKingWillInDanger: Point[] | null;\r\n    blackKingInDanger: Point[] | null;\r\n    blackKingWillInDanger: Point[] | null;\r\n    winColor: string | null;\r\n    stuckColor: string | null;\r\n\r\n    get isWhiteTurn() {\r\n        return Piece.isWhiteColor(this.currentTurn);\r\n    }\r\n    init(option: OptionsType) {\r\n        this.piecesString = option.piecesString;\r\n        this.currentTurn = option.currentTurn;\r\n        this.isQueenMoved = option.isQueenMoved;\r\n        this.isKingMoved = option.isKingMoved;\r\n\r\n        this.genCanMove = option.genCanMove;\r\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\r\n\r\n        this.whiteMoves = [];\r\n        this.blackMoves = [];\r\n\r\n        this.whiteKingInDanger = null;\r\n        this.whiteKingWillInDanger = null;\r\n        this.blackKingInDanger = null;\r\n        this.blackKingWillInDanger = null;\r\n\r\n        this.winColor = null;\r\n        this.stuckColor = null;\r\n    }\r\n\r\n    generateCanMoves() {\r\n        const filter = boardHelper.filterPieceInBoard(this.piecesString);\r\n        this.whiteMoves = filter.whitePieces;\r\n        this.blackMoves = filter.blackPieces;\r\n        const genMoves = (pieceIndices: PieceIndex[]) => {\r\n            pieceIndices.forEach((pieceIndex) => {\r\n                let isHaveMoved = this.isKingMoved;\r\n                if (pieceIndex.piece !== null) {\r\n                    if (pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing) {\r\n                        isHaveMoved = pieceIndex.piece.isTypeQueen ? this.isQueenMoved : false;\r\n                    }\r\n                    const canMovePoints = this.genCanMovePointsByPiecePoint(\r\n                        pieceIndex.point,\r\n                        pieceIndex.piece,\r\n                        this.piecesString,\r\n                        isHaveMoved\r\n                    );\r\n                    pieceIndex.canMovePoints = canMovePoints;\r\n                }\r\n            });\r\n        };\r\n        genMoves(this.whiteMoves);\r\n        genMoves(this.blackMoves);\r\n    }\r\n\r\n    cleanPieceNoMove() {\r\n        const cleanMoves = (pieces: any[]) => {\r\n            let isTrue = true;\r\n            while (isTrue) {\r\n                isTrue = false;\r\n                for (let i = 0; i < pieces.length; i++) {\r\n                    const piece = pieces[i];\r\n                    if (!piece.canMovePoints.length) {\r\n                        pieces.splice(i, 1);\r\n                        isTrue = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        cleanMoves(this.whiteMoves);\r\n        cleanMoves(this.blackMoves);\r\n    }\r\n\r\n    checkIfKingInDanger() {\r\n        this.whiteKingInDanger = boardHelper.getKingInDanger(\r\n            PIECE_COLOR_WHITE,\r\n            this.piecesString\r\n        );\r\n        this.whiteKingWillInDanger = boardHelper.getKingWillInDanger(\r\n            PIECE_COLOR_WHITE,\r\n            this.piecesString\r\n        );\r\n        this.blackKingInDanger = boardHelper.getKingInDanger(\r\n            PIECE_COLOR_BLACK,\r\n            this.piecesString\r\n        );\r\n        this.blackKingWillInDanger = boardHelper.getKingWillInDanger(\r\n            PIECE_COLOR_BLACK,\r\n            this.piecesString\r\n        );\r\n    }\r\n\r\n    genWinLost() {\r\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\r\n            this.winColor = PIECE_COLOR_BLACK;\r\n        } else if (this.blackKingInDanger && !this.blackMoves.length) {\r\n            this.winColor = PIECE_COLOR_WHITE;\r\n        }\r\n    }\r\n\r\n    getStuck() {\r\n        if (this.winColor) {\r\n            return;\r\n        }\r\n        if (this.isWhiteTurn && !this.whiteMoves.length) {\r\n            this.stuckColor = PIECE_COLOR_WHITE;\r\n        } else if (!this.isWhiteTurn && !this.blackMoves.length) {\r\n            this.stuckColor = PIECE_COLOR_BLACK;\r\n        }\r\n    }\r\n\r\n    calcCanMove(option: OptionsType) {\r\n        this.init(option);\r\n        this.generateCanMoves();\r\n        this.cleanPieceNoMove();\r\n        let moves: PieceIndex[] = [];\r\n        if (this.genCanMove) {\r\n            moves = this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\r\n        }\r\n        let anotherMoves: PieceIndex[] = [];\r\n        if (this.genCanMoveForAnother) {\r\n            anotherMoves = !this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\r\n        }\r\n        return {\r\n            moves,\r\n            anotherMoves,\r\n        };\r\n    }\r\n\r\n    calcState(option: OptionsType) {\r\n        this.init(option);\r\n        this.generateCanMoves();\r\n        this.cleanPieceNoMove();\r\n\r\n        this.checkIfKingInDanger();\r\n        this.genWinLost();\r\n        this.getStuck();\r\n        return {\r\n            blackKingInDanger: this.blackKingInDanger,\r\n            whiteKingInDanger: this.whiteKingInDanger,\r\n            blackKingWillInDanger: this.blackKingWillInDanger,\r\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\r\n            winColor: this.winColor,\r\n            stuckColor: this.stuckColor,\r\n        };\r\n    }\r\n\r\n    calCount({ color, piecesString, force }: CalCountPropsType) {\r\n        return boardHelper.checkCount(color, piecesString, force);\r\n    }\r\n\r\n    genCanMovePointsByPiecePoint(point: Point, piece: Piece,\r\n        piecesString: string, isHasMoved?: boolean) {\r\n        return boardHelper.genCanMovePointsByPiecePoint(\r\n            point.index,\r\n            piece,\r\n            piecesString,\r\n            isHasMoved\r\n        );\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import { Point } from '../ren';\r\nimport { ROW_LAST_INDEX } from './constant';\r\n\r\nexport default class Rectangle {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    constructor(x: number, y: number, width: number, height: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    isContainsPoint(point: Point) {\r\n        const { x, y } = point;\r\n        const isContainsPoint = this.x <= x &&\r\n            (this.x + this.width) >= x &&\r\n            this.y <= y &&\r\n            (this.y + this.height) >= y;\r\n        return isContainsPoint;\r\n    }\r\n\r\n    static isValidPoint(point: Point) {\r\n        return new Rectangle(0, 0, ROW_LAST_INDEX, ROW_LAST_INDEX).isContainsPoint(point);\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import jsis from './jsis';\r\nimport genMask from './genMask';\r\nimport {\r\n    PIECE_COLOR_WHITE,\r\n    PIECE_COLOR_BLACK,\r\n    EMPTY_PIECE,\r\n    ROW_NUMBER,\r\n    PIECE_TYPE_FISH,\r\n    PIECE_TYPE_BOAT,\r\n    PIECE_TYPE_GENERAL,\r\n    PIECE_TYPE_HORSE,\r\n    PIECE_TYPE_KING,\r\n    CELL_COUNT,\r\n} from './constant';\r\nimport Point from '../ren/Point';\r\nimport Piece from '../ren/Piece';\r\nimport Rectangle from './Rectangle';\r\nimport { PieceIndex } from '../ren';\r\n\r\nconst mask = genMask();\r\n\r\nexport class CountUpState {\r\n    countingToNumber: number;\r\n    countingNumber: number;\r\n    constructor(countingNumber: number, countingToNumber: number) {\r\n        this.countingNumber = countingNumber;\r\n        this.countingToNumber = countingToNumber;\r\n    }\r\n}\r\n\r\nclass BoardHelper {\r\n    getCharPieceFromString(piecesString: string, index: number) {\r\n        if (Point.isIndexInBoard(index) && piecesString.length === CELL_COUNT) {\r\n            return piecesString[index];\r\n        }\r\n        return EMPTY_PIECE;\r\n    }\r\n    getCharPieceInPos(index: number, piecesString: string) {\r\n        return this.getCharPieceFromString(piecesString, index);\r\n    }\r\n    getPieceByIndex(index: number, piecesString: string): {\r\n        isValidPiece: boolean, piece: Piece | null\r\n    } {\r\n        const charCode = this.getCharPieceInPos(index, piecesString);\r\n        return {\r\n            isValidPiece: Piece.isValidPiece(charCode),\r\n            piece: Piece.fromCharCode(charCode),\r\n        };\r\n    }\r\n    convertMask = (point1: Point, index: number, color: string) => {\r\n        const sign = Piece.isWhiteColor(color) ? 1 : -1;\r\n        const point2 = Point.fromIndex(index);\r\n        point1.x = point1.x * sign + point2.x;\r\n        point1.y = point1.y * sign + point2.y;\r\n        return Rectangle.isValidPoint(point1) ? point1.index : null;\r\n    };\r\n    getPieceCanMovePoses(index: number, piece: Piece) {\r\n        const pieceIndices: number[] = [];\r\n        mask[piece.type].forEach((_pos: number[]) => {\r\n            const newIndex = this.convertMask(new Point(_pos[0], _pos[1]), index, piece.color);\r\n            if (newIndex !== null) {\r\n                pieceIndices.push(newIndex);\r\n            }\r\n        });\r\n        return pieceIndices;\r\n    }\r\n    getPieceCanMovePosesValid(index: number, piece: Piece, piecesString: string) {\r\n        const _poses = this.getPieceCanMovePoses(index, piece);\r\n        const pieceIndices: number[] = [];\r\n        const n = _poses.length;\r\n        const thisPos = Point.fromIndex(index);\r\n        for (let i = 0; i < n; i++) {\r\n            let p: Point | null = Point.fromIndex(_poses[i]);\r\n            const distPiece = this.getPieceByIndex(p.index, piecesString);\r\n            if (distPiece.isValidPiece) {\r\n                if (distPiece.piece && piece.color === distPiece.piece.color ||\r\n                    (piece.isTypeFish && p.x === thisPos.x)) {\r\n                    p = null;\r\n                }\r\n            } else {\r\n                if (piece.isTypeFish && p.x !== thisPos.x) {\r\n                    p = null;\r\n                }\r\n            }\r\n            if (p !== null && piece.isTypeBoat) {\r\n                const _x = thisPos.x;\r\n                const _y = thisPos.y;\r\n                if (p.x === thisPos.x) {\r\n                    let _n = Math.abs(p.y - thisPos.y);\r\n                    const _s = thisPos.y < p.y ? 1 : -1;\r\n                    while (--_n > 0) {\r\n                        if (this.getPieceByIndex(Point.xyToIndex(_x, _y + _s * _n), piecesString).isValidPiece) {\r\n                            p = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                } else if (p.y === thisPos.y) {\r\n                    let _n = Math.abs(p.x - thisPos.x);\r\n                    const _s = thisPos.x < p.x ? 1 : -1;\r\n                    while (--_n > 0) {\r\n                        if (this.getPieceByIndex(Point.xyToIndex(_x + _s * _n, _y), piecesString).isValidPiece) {\r\n                            p = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!jsis.isNull(p)) {\r\n                pieceIndices.push(_poses[i]);\r\n            }\r\n        }\r\n        return pieceIndices;\r\n    }\r\n    replacePiecesStringAtIndex(piecesString: string, charCode: string, index: number) {\r\n        return piecesString.substring(0, index) + charCode + piecesString.substring(index + 1);\r\n    }\r\n    injectPiece(piecesString: string, index1: number, index2: number) {\r\n        const c = piecesString[index1];\r\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\r\n            return null;\r\n        }\r\n        piecesString = this.replacePiecesStringAtIndex(piecesString, EMPTY_PIECE, index1);\r\n        piecesString = this.replacePiecesStringAtIndex(piecesString, c, index2);\r\n        return piecesString;\r\n    }\r\n    getKingWillInDanger(color: string, piecesString: string) {\r\n        const kingPos = piecesString.indexOf(new Piece(PIECE_TYPE_KING, color).pieceCharCode);\r\n        const n = piecesString.length;\r\n        for (let i = 0; i < n; i++) {\r\n            const p = this.getPieceByIndex(i, piecesString);\r\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color &&\r\n                p.piece.isTypeBoat) {\r\n                const _poses = this.getPieceCanMovePoses(i, p.piece);\r\n                for (let j = 0; j < _poses.length; j++) {\r\n                    if (_poses[j] === kingPos) {\r\n                        return [Point.fromIndex(i), Point.fromIndex(kingPos)];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getKingInDanger(color: string, piecesString: string): Point[] | null {\r\n        const kingPos = piecesString.indexOf(new Piece(PIECE_TYPE_KING, color).pieceCharCode);\r\n        const n = piecesString.length;\r\n        for (let i = 0; i < n; i++) {\r\n            const p = this.getPieceByIndex(i, piecesString);\r\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color) {\r\n                const _poses = this.getPieceCanMovePosesValid(i, p.piece, piecesString);\r\n                for (let j = 0; j < _poses.length; j++) {\r\n                    if (_poses[j] === kingPos) {\r\n                        return [Point.fromIndex(i), Point.fromIndex(kingPos)];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    genCanMovePointsByPiecePoint(index: number, piece: Piece,\r\n        piecesString: string, isHasMoved?: boolean) {\r\n        const _poses = this.getPieceCanMovePosesValid(index, piece, piecesString);\r\n        const isHaveCaptured = this.isHaveCaptured(piecesString);\r\n        if (piece.isTypeKing) {\r\n            if (!isHaveCaptured && !isHasMoved) {\r\n                let p = this.convertMask(new Point(2, 1), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n                p = this.convertMask(new Point(-2, 1), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n            }\r\n        } else if (piece.isTypeQueen) {\r\n            if (!isHaveCaptured && !isHasMoved) {\r\n                const p = this.convertMask(new Point(-0, 2), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n            }\r\n        }\r\n        const n = _poses.length;\r\n        const points: Point[] = [];\r\n        for (let i = 0; i < n; i++) {\r\n            const str = this.injectPiece(piecesString, index, _poses[i]);\r\n            if (str !== null && this.getKingInDanger(piece.color, str) === null) {\r\n                points.push(Point.fromIndex(_poses[i]));\r\n            }\r\n        }\r\n        return points;\r\n    }\r\n    isCharPiecesInBoard(code: string, piecesString: string) {\r\n        return !!~piecesString.indexOf(code);\r\n    }\r\n    getPiecesInBoard(piecesString: string) {\r\n        return piecesString.split('').filter((charCode: string) => {\r\n            return Piece.isValidPiece(charCode);\r\n        });\r\n    }\r\n    isHaveCaptured(piecesString: string) {\r\n        return this.getPiecesInBoard(piecesString).length < ROW_NUMBER * 4;\r\n    }\r\n    filterPieceInBoard(piecesString: string) {\r\n        const whitePieces: PieceIndex[] = [];\r\n        const blackPieces: PieceIndex[] = [];\r\n        for (let i = 0; i < piecesString.length; i++) {\r\n            const charCode = piecesString[i];\r\n            if (Piece.isValidPiece(charCode)) {\r\n                const pieceIndex = new PieceIndex(Point.fromIndex(i), Piece.fromCharCode(charCode));\r\n                if (pieceIndex.piece !== null && pieceIndex.piece.isColorWhite) {\r\n                    whitePieces.push(pieceIndex);\r\n                } else {\r\n                    blackPieces.push(pieceIndex);\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            whitePieces,\r\n            blackPieces,\r\n        };\r\n    }\r\n    extractPiecesToArray(piecesString: string) {\r\n        const piecesStringArr = piecesString.split('');\r\n        const pieceAll: { [key: string]: string[] } = {\r\n            [PIECE_COLOR_BLACK]: [],\r\n            [PIECE_COLOR_WHITE]: [],\r\n        };\r\n        piecesStringArr.forEach((charCode: string) => {\r\n            if (charCode === EMPTY_PIECE) {\r\n                return;\r\n            }\r\n            const piece = Piece.fromCharCode(charCode);\r\n            if (piece) {\r\n                pieceAll[piece.color].push(piece.type);\r\n            }\r\n        });\r\n        return pieceAll;\r\n    }\r\n    isStateCount(c: string, piecesString: string) {\r\n        const allPieces = this.extractPiecesToArray(piecesString);\r\n        return allPieces[c].length === 1;\r\n    }\r\n    checkCountable(color: string, piecesString: string) {\r\n        const pieceAll = this.extractPiecesToArray(piecesString);\r\n        const weaker = pieceAll[color];\r\n        const stronger = pieceAll[Piece.oppositeColor(color)];\r\n        return weaker.length <= 2 && stronger.length >= 2;\r\n    }\r\n    checkCount(color: string, piecesString: string, force: boolean): CountUpState | null {\r\n        const countChar = (str: string[], c: string) => {\r\n            return str.join('').split(c).length - 1;\r\n        };\r\n        const charExist = (str: string[], c: string) => {\r\n            return !!~str.indexOf(c);\r\n        };\r\n\r\n        const pieceAll = this.extractPiecesToArray(piecesString);\r\n        const weaker = pieceAll[color];\r\n        const stronger = pieceAll[Piece.oppositeColor(color)];\r\n        if (weaker.length === 1 && stronger.length > 1) {\r\n            if (!charExist(stronger, PIECE_TYPE_FISH)) {\r\n                let count = 64;\r\n                const toukCount = countChar(stronger, PIECE_TYPE_BOAT);\r\n                if (toukCount) {\r\n                    count = toukCount > 1 ? 8 : 16;\r\n                } else if (countChar(stronger, PIECE_TYPE_GENERAL) > 1) {\r\n                    count = 22;\r\n                } else if (countChar(stronger, PIECE_TYPE_HORSE) > 1) {\r\n                    count = 32;\r\n                } else if (countChar(stronger, PIECE_TYPE_GENERAL)) {\r\n                    count = 44;\r\n                }\r\n                // FIXME: when touk 2 and stronger.length > 8 => start > count\r\n                let start = stronger.length;\r\n                if (start > 4) {\r\n                    start = 4;\r\n                }\r\n                return new CountUpState(start, count);\r\n            }\r\n            return new CountUpState(0, 64);\r\n        } else if (force && this.checkCountable(color, piecesString)) {\r\n            return new CountUpState(0, 64);\r\n        }\r\n        return null;\r\n    }\r\n    isUpgradable(piece: Piece, point: Point) {\r\n        if (piece.isTypeFish) {\r\n            if (piece.isColorBlack && point.y <= 2) {\r\n                return true;\r\n            }\r\n            if (piece.isColorWhite && point.y >= 5) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n};\r\n\r\nexport default new BoardHelper();\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export const PIECE_COLOR_WHITE = 'w';\r\nexport const PIECE_COLOR_BLACK = 'b';\r\nexport const COLOR_NAMES: { [key: string]: string } = {\r\n    [PIECE_COLOR_BLACK]: '',\r\n    [PIECE_COLOR_WHITE]: '',\r\n};\r\nexport const COLOR_NAMES_ENGLISH: { [key: string]: string } = {\r\n    [PIECE_COLOR_BLACK]: 'black',\r\n    [PIECE_COLOR_WHITE]: 'white',\r\n};\r\n\r\nexport const PIECE_TYPE_BOAT = 'b'; // Boat\r\nexport const PIECE_TYPE_HORSE = 'h'; // Horse\r\nexport const PIECE_TYPE_GENERAL = 'g'; // General\r\nexport const PIECE_TYPE_KING = 'k'; // King\r\nexport const PIECE_TYPE_QUEEN = 'q'; // Queen\r\nexport const PIECE_TYPE_FISH = 'f'; // Fish\r\nexport const PIECE_TYPE_TRANSFORM_FISH = 't'; // Transform fish\r\nexport const PIECE_NAMES: { [key: string]: string } = {\r\n    [PIECE_TYPE_BOAT]: '',\r\n    [PIECE_TYPE_HORSE]: '',\r\n    [PIECE_TYPE_GENERAL]: '',\r\n    [PIECE_TYPE_KING]: '',\r\n    [PIECE_TYPE_QUEEN]: '',\r\n    [PIECE_TYPE_FISH]: '',\r\n    [PIECE_TYPE_TRANSFORM_FISH]: '',\r\n};\r\nexport const PIECE_NAMES_ENGLISH: { [key: string]: string } = {\r\n    [PIECE_TYPE_BOAT]: 'boat',\r\n    [PIECE_TYPE_HORSE]: 'horse',\r\n    [PIECE_TYPE_GENERAL]: 'general',\r\n    [PIECE_TYPE_KING]: 'king',\r\n    [PIECE_TYPE_QUEEN]: 'queen',\r\n    [PIECE_TYPE_FISH]: 'fish',\r\n    [PIECE_TYPE_TRANSFORM_FISH]: 'transformed-fish',\r\n};\r\nexport const EMPTY_PIECE = '.';\r\nexport const PIECE_COLOR_EMPTY = '.';\r\nexport const BOARD_SEPARATOR = '/';\r\n\r\nexport const ROW_NUMBER = 8;\r\nexport const ROW_FIRST_INDEX = 0;\r\nexport const ROW_LAST_INDEX = 7;\r\nexport const CELL_COUNT = ROW_NUMBER * ROW_NUMBER;\r\n\r\nexport const HORIZONTAL_CODE_LETTERS = 'abcdefgh';\r\nexport const HORIZONTAL_NOTE_LETTERS = ['', '', '', '', '', '', '', ''];\r\nexport const VERTICAL_NOTE_LETTERS = ['','', '', '', '', '', '', '', '', ''];\r\nexport const HORIZONTAL_NOTE_LETTERS_ENGLISH = 'abcdefgh';\r\nexport const VERTICAL_NOTE_LETTERS_ENGLISH = Array.from({ length: 10 }, (_, i) => `${i}`);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import {\r\n    PIECE_TYPE_BOAT,\r\n    PIECE_TYPE_HORSE,\r\n    PIECE_TYPE_KING,\r\n    PIECE_TYPE_GENERAL,\r\n    PIECE_TYPE_FISH,\r\n    PIECE_TYPE_TRANSFORM_FISH,\r\n    PIECE_TYPE_QUEEN,\r\n} from './constant';\r\n\r\nexport default function genMask() {\r\n    const mask: { [key: string]: number[][] } = {};\r\n    mask[PIECE_TYPE_BOAT] = [\r\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\r\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\r\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\r\n    ];\r\n    mask[PIECE_TYPE_HORSE] = [\r\n        [-1, -2],\r\n        [1, -2],\r\n        [-2, -1],\r\n        [2, -1],\r\n        [-1, 2],\r\n        [1, 2],\r\n        [-2, 1],\r\n        [2, 1],\r\n    ];\r\n    mask[PIECE_TYPE_QUEEN] = [\r\n        [-1, -1],\r\n        [1, -1],\r\n        [-1, 1],\r\n        [1, 1],\r\n    ];\r\n    mask[PIECE_TYPE_GENERAL] = mask[PIECE_TYPE_QUEEN].concat([\r\n        [0, 1],\r\n    ]);\r\n    mask[PIECE_TYPE_KING] = mask[PIECE_TYPE_GENERAL].concat([\r\n        [0, -1],\r\n        [1, 0],\r\n        [-1, 0],\r\n    ]);\r\n    mask[PIECE_TYPE_FISH] = [\r\n        [0, 1],\r\n        [-1, 1],\r\n        [1, 1],\r\n    ];\r\n    mask[PIECE_TYPE_TRANSFORM_FISH] = mask[PIECE_TYPE_QUEEN];\r\n    return mask;\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export { default as Rectangle } from './Rectangle';\r\nexport { default as boardHelper } from './boardHelper';\r\nexport { default as genMask } from './genMask';\r\nexport { default as jsis } from './jsis';\r\nexport { default as HVPont } from './HVPont';\r\nexport { default as MoveHelper } from './MoveHelper';\r\nexport { OptionsType, CalCountPropsType } from './MoveHelper';\r\nexport * from './constant';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","const jsis = {\r\n    isValid(v: any) {\r\n        return !this.isNull(v) && !this.isUndefined(v);\r\n    },\r\n    isNull(v: any) {\r\n        return v === null;\r\n    },\r\n    isUndefined(v: any) {\r\n        return typeof v === 'undefined';\r\n    },\r\n    isString(str: any) {\r\n        return this.isValid(str) && typeof str === 'string';\r\n    },\r\n    isNotEmpty(str: string) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return this.isValidString(str) && str != '';\r\n    },\r\n    isNumber(n: any) {\r\n        return this.isValid(n) && typeof n === 'number';\r\n    },\r\n    isStringNumber(n: string) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return this.isString(n) && n != '' && !isNaN(Number(n));\r\n    },\r\n    isArray(arr: any) {\r\n        return this.isValid(arr) && arr instanceof Array;\r\n    },\r\n    isFunction(f: any) {\r\n        return this.isValid(f) && typeof f === 'function';\r\n    },\r\n    isObject(o: any) {\r\n        return this.isValid(o) && o instanceof Object;\r\n    },\r\n    isBoolean(b: any) {\r\n        return this.isValid(b) && typeof b === 'boolean';\r\n    },\r\n    isTrue(b: any) {\r\n        return this.isValidBoolean(b) && b;\r\n    },\r\n    isFalse(b: any) {\r\n        return this.isValidBoolean(b) && !b;\r\n    },\r\n    isPoint(p: { x: any; y: any; }) {\r\n        const isPoint = this.isValid(p) &&\r\n            this.isValidObject(p) &&\r\n            this.isValidNumber(p.x) &&\r\n            this.isValidNumber(p.y);\r\n        return isPoint;\r\n    },\r\n    isSize(size: { width: any; height: any; }) {\r\n        const isSize = this.isValid(size) &&\r\n            this.isValidObject(size) &&\r\n            this.isValidNumber(size.width) &&\r\n            this.isValidNumber(size.height);\r\n        return isSize;\r\n    },\r\n    isOdd(n: number) {\r\n        return !!(n % 2);\r\n    },\r\n    isEven(n: any) {\r\n        return !this.isOdd(n);\r\n    },\r\n    isUpperCase(str: string) {\r\n        return str === str.toUpperCase();\r\n    },\r\n};\r\n\r\nexport default jsis;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export * from './brain';\r\nexport * from './kpgn';\r\nexport * from './ren';\r\nexport * from './other';\r\nexport { default as KhmerChess } from './KhmerChess';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","\r\nimport Piece from '../ren/Piece';\r\nimport Point from '../ren/Point';\r\n\r\nexport type CapturedPropType = {\r\n    piece: Piece;\r\n    fromBoardPoint: Point;\r\n    toGraveyardPoint: Point;\r\n};\r\nexport default class Captured implements CapturedPropType {\r\n    piece: Piece;\r\n    fromBoardPoint: Point;\r\n    toGraveyardPoint: Point;\r\n    constructor({ piece, fromBoardPoint: fromBoardPoint, toGraveyardPoint: toGraveyardPoint }: CapturedPropType) {\r\n        this.piece = piece;\r\n        this.fromBoardPoint = fromBoardPoint;\r\n        this.toGraveyardPoint = toGraveyardPoint;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import REN from '../ren/REN';\r\nimport Move from './Move';\r\nimport Player from './Player';\r\nimport Result from './Result';\r\nimport Timer from './Timer';\r\nimport type { Option as TimeOption } from './Timer';\r\nimport type { Option as ResultOption } from './Result';\r\nimport type { Option as PlayerOption } from './Player';\r\nimport base64Helper from '../other/base64Helper';\r\n\r\nexport type Option = {\r\n    event?: string;\r\n    date?: string;\r\n    location?: string;\r\n    players?: {\r\n        white: PlayerOption;\r\n        black: PlayerOption;\r\n    };\r\n    result?: {\r\n        last: {\r\n            whiteWin: boolean;\r\n            blackWin: boolean;\r\n        };\r\n        white: ResultOption;\r\n    };\r\n    moves?: string[];\r\n    ren?: string;\r\n    timer?: TimeOption;\r\n};\r\n\r\nexport default class KPGN {\r\n    event: string = '';\r\n    date: Date | null = null;\r\n    location: string = '';\r\n    players = {\r\n        white: new Player({}),\r\n        black: new Player({}),\r\n    };\r\n    result = {\r\n        last: {\r\n            whiteWin: false,\r\n            blackWin: false,\r\n        },\r\n        white: new Result({}),\r\n    };\r\n\r\n    moves: Move[];\r\n    ren: REN;\r\n    timer: Timer = new Timer({});\r\n\r\n    constructor(ren: REN) {\r\n        this.ren = ren;\r\n        this.moves = [];\r\n    }\r\n\r\n    get isCanMoveNext() {\r\n        return this.latestMove.isCanMoveNext && this.ren.isCanMoveNext;\r\n    }\r\n\r\n    get latestMove() {\r\n        return this.moves[this.moves.length - 1] || null;\r\n    }\r\n\r\n    addMove(move: Move | null) {\r\n        if (move) {\r\n            this.moves.push(move);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getMove(index: number): Move | null {\r\n        return this.moves[index] || null;\r\n    }\r\n\r\n    loadRENStr(renStr?: string) {\r\n        this.ren = REN.fromString(renStr);\r\n        if (this.latestMove) {\r\n            this.ren.syncWithMove(this.latestMove);\r\n        }\r\n    }\r\n\r\n    loadMovesStrings(moves: string[]) {\r\n        let currentRen = this.ren;\r\n        this.moves = moves.reverse().map((moveStr): Move | never => {\r\n            const move = Move.fromString(moveStr, currentRen);\r\n            if (move === null) {\r\n                throw new Error('Invalid move string');\r\n            }\r\n            currentRen = currentRen.backRen(move);\r\n            return move;\r\n        }).reverse();\r\n        if (this.latestMove) {\r\n            this.ren.syncWithMove(this.latestMove);\r\n        }\r\n    }\r\n\r\n    fromJson(option: Option) {\r\n        try {\r\n            const { ren, moves, timer, result,\r\n                players, location, date, event } = option;\r\n\r\n            this.event = event || this.event;\r\n            this.date = date ? new Date(date) : this.date;\r\n            this.location = location || this.location;\r\n            if (players) {\r\n                this.players = {\r\n                    white: new Player(players.white),\r\n                    black: new Player(players.black),\r\n                };\r\n            }\r\n            if (result) {\r\n                this.result = {\r\n                    last: result.last,\r\n                    white: new Result(result.white),\r\n                };\r\n            }\r\n            this.ren = REN.fromString(ren || '');\r\n            this.loadMovesStrings(moves || []);\r\n            this.timer = new Timer(timer || {});\r\n            return true;\r\n        } catch (error) {\r\n            console.log(error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    toJson() {\r\n        let renStr = this.ren.toString();\r\n        if (this.latestMove) {\r\n            renStr = this.latestMove.renStr;\r\n        }\r\n        return {\r\n            event: this.event,\r\n            date: this.date ? this.date.toString() : '',\r\n            location: this.location,\r\n            players: {\r\n                white: this.players.white.toJson(),\r\n                black: this.players.black.toJson(),\r\n            },\r\n            result: {\r\n                last: {\r\n                    whiteWin: this.result.last.whiteWin,\r\n                    blackWin: this.result.last.blackWin,\r\n                },\r\n                white: this.result.white.toJson(),\r\n            },\r\n            timer: this.timer.toJson(),\r\n            moves: this.moves.map((m) => m.toString()),\r\n            ren: renStr,\r\n        };\r\n    }\r\n\r\n    fromBase64(str: string) {\r\n        const json = JSON.parse(base64Helper.decode(str));\r\n        return this.fromJson(json);\r\n    }\r\n    toBase64() {\r\n        const jsStr = JSON.stringify(this.toJson());\r\n        return base64Helper.encode(jsStr);\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","\r\nimport { boardHelper } from '../brain';\r\nimport { KqJumped, PieceIndex, REN } from '../ren';\r\nimport {\r\n    PIECE_FLAG_JUMP,\r\n    PIECE_FLAG_KILL,\r\n    PIECE_FLAG_START_COUNTING,\r\n    PIECE_FLAG_UPGRADE,\r\n} from '../ren/constant';\r\nimport Piece from '../ren/Piece';\r\nimport Point from '../ren/Point';\r\nimport Captured from './Captured';\r\n\r\nexport type Option = {\r\n    piece: Piece;\r\n    moveFrom: Point;\r\n    moveTo: Point;\r\n    isUpgrading?: boolean;\r\n    captured?: Captured;\r\n};\r\nexport default class Move {\r\n    renStr: string;\r\n    boardStatus: {\r\n        attacker: PieceIndex | null,\r\n        winColor: string | null,\r\n        stuckColor: string | null,\r\n        drawCountColor: string | null,\r\n    } = {\r\n            attacker: null,\r\n            winColor: null,\r\n            stuckColor: null,\r\n            drawCountColor: null,\r\n        };\r\n    isStartCounting = false;\r\n    kqJumping: KqJumped\r\n    piece: Piece;\r\n    moveFrom: Point;\r\n    moveTo: Point;\r\n    isUpgrading: boolean;\r\n    captured: Captured | null;\r\n    constructor({ piece, moveFrom, moveTo,\r\n        isUpgrading, captured,\r\n    }: Option) {\r\n        this.piece = piece;\r\n        this.moveFrom = moveFrom;\r\n        this.moveTo = moveTo;\r\n        this.isUpgrading = !!isUpgrading;\r\n        this.captured = captured || null;\r\n        if (boardHelper.isUpgradable(piece, moveTo)) {\r\n            this.isUpgrading = true;\r\n            piece.upgrade();\r\n        }\r\n        this.kqJumping = new KqJumped();\r\n    }\r\n\r\n    setRen(ren: REN) {\r\n        ren.checkBoardStatus(this);\r\n        ren.kqJumped.checkKQMoved(this);\r\n        ren.checkCountStatus(this);\r\n    }\r\n    syncRen(ren: REN) {\r\n        this.renStr = ren.toString();\r\n    }\r\n\r\n    get isCanMoveNext() {\r\n        return !(this.boardStatus.drawCountColor || this.boardStatus.winColor || this.boardStatus.stuckColor);\r\n    }\r\n\r\n    get isWhiteKingJumping() {\r\n        return !!this.kqJumping.whiteKing;\r\n    }\r\n    get isWhiteQueenJumping() {\r\n        return !!this.kqJumping.whiteQueen;\r\n    }\r\n    get isBlackKingJumping() {\r\n        return !!this.kqJumping.blackKing;\r\n    }\r\n    get isBlackQueenJumping() {\r\n        return !!this.kqJumping.blackQueen;\r\n    }\r\n\r\n    get attacker() {\r\n        return this.boardStatus.attacker || null;\r\n    }\r\n\r\n    get winColor() {\r\n        return this.boardStatus.winColor || null;\r\n    }\r\n\r\n    get stuckColor() {\r\n        return this.boardStatus.stuckColor || null;\r\n    }\r\n\r\n    get drawCountColor() {\r\n        return this.boardStatus.drawCountColor || null;\r\n    }\r\n\r\n    get isDraw() {\r\n        return this.stuckColor || this.drawCountColor;\r\n    }\r\n\r\n    get isGameOver() {\r\n        return this.winColor || this.isDraw;\r\n    }\r\n\r\n    static fromString(str: string, ren: REN) {\r\n        const piece = Piece.fromCharCode(str[0]);\r\n        if (piece === null) {\r\n            return null;\r\n        }\r\n        const moveFrom = Point.fromIndexCode(str.substr(1, 2));\r\n        const moveTo = Point.fromIndexCode(str.substr(3, 2));\r\n        const move = new Move({\r\n            piece,\r\n            moveFrom,\r\n            moveTo,\r\n        });\r\n        const killIndex = str.indexOf(PIECE_FLAG_KILL);\r\n        if (!!~killIndex) {\r\n            const match = str.substr(killIndex + 1).match(/^(\\d+)/);\r\n            if (match === null) {\r\n                return null;\r\n            }\r\n            const gyIndex = Number(match[1]);\r\n            const capturedPiece = ren.graveyard.get(gyIndex);\r\n            if (!capturedPiece) {\r\n                throw new Error('Invalid captured index');\r\n            }\r\n            move.captured = new Captured({\r\n                fromBoardPoint: moveTo,\r\n                toGraveyardPoint: Point.fromIndexGraveyardIndex(gyIndex),\r\n                piece: capturedPiece,\r\n            });\r\n\r\n        }\r\n        const jumpingIndex = str.indexOf(PIECE_FLAG_JUMP);\r\n        if (!!~jumpingIndex) {\r\n            const match = str.substr(jumpingIndex + 1).match(/^(\\d+)/);\r\n            if (match === null) {\r\n                return null;\r\n            }\r\n            const n = Number(match[1]);\r\n            move.kqJumping = KqJumped.fromNumber(n);\r\n        }\r\n        const startCountingIndex = str.indexOf(PIECE_FLAG_START_COUNTING);\r\n        if (!!~startCountingIndex) {\r\n            move.isStartCounting = true;\r\n        }\r\n        move.setRen(ren);\r\n        return move;\r\n    }\r\n    toString() {\r\n        const pCode = this.piece.pieceCharCode;\r\n        const fIndexCode = this.moveFrom.indexCode;\r\n        const tIndexCode = this.moveTo.indexCode;\r\n        let flags = '';\r\n        if (this.captured) {\r\n            flags += PIECE_FLAG_KILL + this.captured.toGraveyardPoint.index;\r\n\r\n        }\r\n        if (this.kqJumping.isJumped) {\r\n            flags += PIECE_FLAG_JUMP + this.kqJumping.toNumber();\r\n        }\r\n        if (this.isUpgrading) {\r\n            flags += PIECE_FLAG_UPGRADE;\r\n        }\r\n        if (this.isStartCounting) {\r\n            flags += PIECE_FLAG_START_COUNTING;\r\n        }\r\n        return `${pCode}${fIndexCode}${tIndexCode}${flags}`;\r\n    }\r\n\r\n    getJumpingMessage(isEnglish?: boolean) {\r\n        let jump = '';\r\n        if (isEnglish) {\r\n            if (this.isWhiteKingJumping) {\r\n                jump += ' white king jumping';\r\n            }\r\n            if (this.isWhiteQueenJumping) {\r\n                jump += ' white queen jumping';\r\n            }\r\n            if (this.isBlackKingJumping) {\r\n                jump += ' black king jumping';\r\n            }\r\n            if (this.isBlackQueenJumping) {\r\n                jump += ' black queen jumping';\r\n            }\r\n        } else {\r\n            if (this.isWhiteKingJumping) {\r\n                jump += ' ';\r\n            }\r\n            if (this.isWhiteQueenJumping) {\r\n                jump += ' ';\r\n            }\r\n            if (this.isBlackKingJumping) {\r\n                jump += ' ';\r\n            }\r\n            if (this.isBlackQueenJumping) {\r\n                jump += ' ';\r\n            }\r\n        }\r\n        return jump;\r\n    }\r\n    getMessage(isEnglish?: boolean) {\r\n        if (isEnglish) {\r\n            let captured = '';\r\n            if (this.captured) {\r\n                captured = ` captures ${this.captured.piece.titleEnglish}`;\r\n            }\r\n            const upgrade = this.isUpgrading ? ' transforms' : '';\r\n            const jump = this.getJumpingMessage(isEnglish);\r\n            return `${this.piece.titleEnglish} moved from ${this.moveFrom.titleEnglish} to ${this.moveTo.titleEnglish}${upgrade}${captured} ${jump}`;\r\n        } else {\r\n            let captured = '';\r\n            if (this.captured) {\r\n                captured = ` ${this.captured.piece.title}`;\r\n            }\r\n            const upgrade = this.isUpgrading ? ' ' : '';\r\n            const jump = this.getJumpingMessage(isEnglish);\r\n            return `${this.piece.title}  ${this.moveFrom.title}  ${this.moveTo.title}${upgrade}${captured} ${jump}`;\r\n        }\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export type Option = {\r\n    id?: string;\r\n    name?: string;\r\n};\r\nexport default class Player {\r\n    name: string | null;\r\n    id: string | null;\r\n    constructor({ id, name }: Option) {\r\n        this.id = id || '';\r\n        this.name = name || '';\r\n    }\r\n\r\n    toJson() {\r\n        return {\r\n            id: this.id,\r\n            name: this.name,\r\n        };\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export type Option = {\r\n    win?: number;\r\n    draw?: number;\r\n    lost?: number;\r\n};\r\nexport default class Result {\r\n    win: number;\r\n    draw: number;\r\n    lost: number;\r\n    constructor({ win, draw, lost }: Option) {\r\n        this.win = win || 0;\r\n        this.draw = draw || 0;\r\n        this.lost = lost || 0;\r\n    }\r\n\r\n    toJson() {\r\n        return {\r\n            win: this.win,\r\n            draw: this.draw,\r\n            lost: this.lost,\r\n        };\r\n    }\r\n}\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export type Option = {\r\n    totalSecond?: number;\r\n    bonusTime?: number;\r\n    currentWhite?: number;\r\n    currentBlack?: number;\r\n};\r\nexport default class Timer {\r\n    bonusTime: number;\r\n    totalSecond: number;\r\n    currentWhite: number;\r\n    currentBlack: number;\r\n    constructor({ totalSecond, bonusTime, currentWhite, currentBlack }: Option) {\r\n        this.bonusTime = bonusTime || 0;\r\n        this.totalSecond = totalSecond || 0;\r\n        this.currentWhite = currentWhite || 0;\r\n        this.currentBlack = currentBlack || 0;\r\n    }\r\n\r\n    fromJson() {\r\n\r\n    }\r\n\r\n    toJson() {\r\n        return {\r\n            totalSecond: this.totalSecond,\r\n            bonusTime: this.bonusTime,\r\n            currentWhite: this.currentWhite,\r\n            currentBlack: this.currentBlack,\r\n        };\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export { default as KPGN } from './KPGN';\r\nexport { default as Move } from './Move';\r\nexport type { Option as MoveOption } from './Move';\r\nexport { default as Captured } from './Captured';\r\nexport { CapturedPropType } from './Captured';\r\nexport { default as Player } from './Player';\r\nexport { default as Result } from './Result';\r\nexport { default as Timer } from './Timer';\r\nexport type { Option as KPGNOption } from './KPGN';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export type ListenerType<T> = (data: T) => any;\r\n\r\nexport default class EventHandler {\r\n    _onEventListeners: { [key: string]: any } = {};\r\n    _propEvent: any = [];\r\n    events: any;\r\n    _isLockProp: boolean;\r\n    constructor(options: { events: any }) {\r\n        this._onEventListeners = {};\r\n        this._propEvent = [];\r\n        this.events = options.events;\r\n    }\r\n\r\n    _checkPropEvent() {\r\n        if (this._isLockProp) {\r\n            return;\r\n        }\r\n        while (this._propEvent.length) {\r\n            const event = this._propEvent.shift();\r\n            this._checkOnEvent(event.name, event.data);\r\n        }\r\n    }\r\n\r\n    _addPropEvent(event: string, data?: any) {\r\n        this._propEvent.push({\r\n            name: event,\r\n            data,\r\n        });\r\n        this._checkPropEvent();\r\n    }\r\n\r\n    _guardEventName(eventName?: string) {\r\n        if (!eventName) {\r\n            throw new Error('invalid event name');\r\n        }\r\n    }\r\n\r\n    _checkOnEvent(eventName: string, data?: any) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        this._onEventListeners[eventName].forEach((listener: ListenerType<any>) => {\r\n            listener(data);\r\n        });\r\n    }\r\n\r\n    _addOnEventListener(eventName: string, listener: ListenerType<any>) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        this._onEventListeners[eventName].push(listener);\r\n    }\r\n\r\n    _removeOnEventListener(eventName: string, listener: ListenerType<any>) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        const index = this._onEventListeners[eventName].indexOf(listener);\r\n        ~index && this._onEventListeners[eventName].splice(index, 1);\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","// https://stackoverflow.com/questions/246801/how-can-you-encode-a-string-to-base64-in-javascript\r\n/**\r\n*\r\n*  Base64 encode / decode\r\n*  http://www.webtoolkit.info/\r\n*\r\n**/\r\nvar Base64 = {\r\n\r\n    // private property\r\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\r\n\r\n    // public method for encoding\r\n    encode: function (input: string) {\r\n        var output = '';\r\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n\r\n        input = Base64._utf8_encode(input);\r\n\r\n        while (i < input.length) {\r\n\r\n            chr1 = input.charCodeAt(i++);\r\n            chr2 = input.charCodeAt(i++);\r\n            chr3 = input.charCodeAt(i++);\r\n\r\n            enc1 = chr1 >> 2;\r\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n            enc4 = chr3 & 63;\r\n\r\n            if (isNaN(chr2)) {\r\n                enc3 = enc4 = 64;\r\n            } else if (isNaN(chr3)) {\r\n                enc4 = 64;\r\n            }\r\n\r\n            output = output +\r\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n        }\r\n        return output;\r\n    },\r\n\r\n    // public method for decoding\r\n    decode: function (input: string) {\r\n        var output = '';\r\n        var chr1, chr2, chr3;\r\n        var enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\r\n\r\n        while (i < input.length) {\r\n\r\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\r\n\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n            output = output + String.fromCharCode(chr1);\r\n\r\n            if (enc3 != 64) {\r\n                output = output + String.fromCharCode(chr2);\r\n            }\r\n            if (enc4 != 64) {\r\n                output = output + String.fromCharCode(chr3);\r\n            }\r\n        }\r\n\r\n        output = Base64._utf8_decode(output);\r\n\r\n        return output;\r\n    },\r\n\r\n    // private method for UTF-8 encoding\r\n    _utf8_encode: function (string: string) {\r\n        string = string.replace(/\\r\\n/g, '\\n');\r\n        var utftext = '';\r\n\r\n        for (var n = 0; n < string.length; n++) {\r\n\r\n            var c = string.charCodeAt(n);\r\n\r\n            if (c < 128) {\r\n                utftext += String.fromCharCode(c);\r\n            }\r\n            else if ((c > 127) && (c < 2048)) {\r\n                utftext += String.fromCharCode((c >> 6) | 192);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n            else {\r\n                utftext += String.fromCharCode((c >> 12) | 224);\r\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n        }\r\n        return utftext;\r\n    },\r\n\r\n    // private method for UTF-8 decoding\r\n    _utf8_decode: function (utftext: string) {\r\n        var string = '';\r\n        var i = 0;\r\n        var c, c1, c2 = 0;\r\n        c = c1 = c2 = 0;\r\n\r\n        while (i < utftext.length) {\r\n\r\n            c = utftext.charCodeAt(i);\r\n\r\n            if (c < 128) {\r\n                string += String.fromCharCode(c);\r\n                i++;\r\n            }\r\n            else if ((c > 191) && (c < 224)) {\r\n                c1 = utftext.charCodeAt(i + 1);\r\n                string += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\r\n                i += 2;\r\n            }\r\n            else {\r\n                c1 = utftext.charCodeAt(i + 1);\r\n                c2 = utftext.charCodeAt(i + 2);\r\n                string += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\r\n                i += 3;\r\n            }\r\n        }\r\n        return string;\r\n    },\r\n};\r\n\r\nexport default Base64;","export { default as EventHandler } from './EventHandler';\r\nexport { ListenerType } from './EventHandler';\r\nexport { default as table } from './table';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import REN from '../ren/REN';\r\n\r\nexport default function asciiTable(ren: REN) {\r\n  const arr = ren.board.piecesMultiArray;\r\n  const str = '  ';\r\n  const result = arr.reverse().reduce((s, subArr, i) => {\r\n    const rs = subArr.map((p) => ` ${p ? p.pieceCharCode : ' '} `).join('');\r\n    const bottom = i === arr.length - 1 ? '' : '';\r\n    s += `\r\n${8 - i} ${rs}\r\n  ${bottom}`;\r\n    return s;\r\n  }, str);\r\n  const gyTStr = ren.graveyard.pieces.map(() => '').join('');\r\n  const gyStr = ren.graveyard.pieces.map((p) => ` ${p ? p.pieceCharCode : ' '} `).join('');\r\n  const gyBStr = ren.graveyard.pieces.map(() => '').join('');\r\n  const graveyardStr = `  ${gyTStr}\r\n  ${gyStr}\r\n  ${gyBStr}`;\r\n  return `${result}\r\n    a   b   c   d   e   f   g   h\r\n${graveyardStr}`;\r\n}\r\n\r\n/*\r\n  \r\n8              k          \r\n  \r\n7                         \r\n  \r\n6                         \r\n  \r\n5                         \r\n  \r\n4                         \r\n  \r\n3                         \r\n  \r\n2                         \r\n  \r\n1           K             \r\n  \r\n    a   b   c   d   e   f   g   h\r\n  \r\n   b  h  g  q  g  h  b  f  f  f  f  f  f  f  f  F  F  F  F  F  F  F  F  B  H  G  Q  G  H  B \r\n  \r\n */\r\n\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import Piece from './Piece';\r\nimport PieceIndex from './PieceIndex';\r\nimport { DEFAULT_BOARD_STR } from './constant';\r\nimport { BOARD_SEPARATOR, CELL_COUNT, EMPTY_PIECE, ROW_NUMBER } from '../brain/constant';\r\nimport Point from './Point';\r\n\r\n/**\r\n * BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\r\n */\r\n\r\nexport default class Board {\r\n    pieceIndices = Array.from({\r\n        length: CELL_COUNT,\r\n    }, (_, i) => {\r\n        const point = Point.fromIndex(i);\r\n        return new PieceIndex(point, null);\r\n    });\r\n\r\n    constructor(boardStr?: string) {\r\n        if (!boardStr) {\r\n            boardStr = DEFAULT_BOARD_STR;\r\n        }\r\n        const newBoardStr = this.extract(boardStr).replace(/\\//g, '');\r\n        if (newBoardStr.length < CELL_COUNT ||\r\n            !Piece.isValidPiecesString(newBoardStr)) {\r\n            throw new Error(`Invalid board string ${boardStr}`);\r\n        }\r\n        this.pieceIndices = newBoardStr.split('').map((charCode: string, i: number) => {\r\n            const point = Point.fromIndex(i);\r\n            return new PieceIndex(point, charCode === EMPTY_PIECE ? null : Piece.fromCharCode(charCode));\r\n        });\r\n    }\r\n\r\n    get piecesMultiArray() {\r\n        const arr: Piece[][] = [[], [], [], [], [], [], [], []];\r\n        this.pieceIndices.forEach((pieceIndex) => {\r\n            if (pieceIndex.piece !== null) {\r\n                arr[pieceIndex.point.y][pieceIndex.point.x] = pieceIndex.piece;\r\n            }\r\n        });\r\n        return arr;\r\n    }\r\n\r\n    get pieces() {\r\n        return this.pieceIndices.map((pieceIndex) => {\r\n            return pieceIndex.piece;\r\n        });\r\n    }\r\n\r\n    get whiteKing() {\r\n        return this.pieceIndices.find((pieceIndex) => {\r\n            return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorWhite;\r\n        });\r\n    }\r\n\r\n    get blackKing() {\r\n        return this.pieceIndices.find((pieceIndex) => {\r\n            return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorBlack;\r\n        });\r\n    }\r\n\r\n    getKing(color: string) {\r\n        return Piece.isWhiteColor(color) ? this.whiteKing : this.blackKing;\r\n    }\r\n\r\n    compress(str: string) {\r\n        const reg = new RegExp(`(\\\\${EMPTY_PIECE}+)`, 'g');\r\n        return str.replace(reg, ($1: any) => $1.length);\r\n    }\r\n\r\n    extract(str: string) {\r\n        return str.replace(/(\\d+)/g, ($1: any) => {\r\n            // $1 == 3 => '...', bh6 => 'bh......'\r\n            return Array.from({\r\n                length: $1,\r\n            }, () => EMPTY_PIECE).join('');\r\n        });\r\n    }\r\n\r\n    toStringFull(pieceIndices: PieceIndex[] = this.pieceIndices) {\r\n        const str = pieceIndices.map((pieceIndex, i) => {\r\n            const p = pieceIndex.toPieceCharCode();\r\n            if (i && i % ROW_NUMBER === 0 && i !== CELL_COUNT) {\r\n                return `${BOARD_SEPARATOR}${p}`;\r\n            }\r\n            return p;\r\n        }).join('');\r\n        return str;\r\n    }\r\n    toStringFullNoSeparate() {\r\n        let str = this.toStringFull();\r\n        str = str.replace(/\\//g, '');\r\n        return str;\r\n    }\r\n\r\n    toString(pieceIndices?: PieceIndex[]) {\r\n        let str = this.toStringFull(pieceIndices);\r\n        str = this.compress(str);\r\n        return str;\r\n    }\r\n\r\n    getPieceAtIndex(index: number): Piece | null {\r\n        return this.pieceIndices[index].piece;\r\n    }\r\n\r\n    setPieceAtIndex(index: number, piece: Piece | null) {\r\n        this.pieceIndices[index].piece = piece;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import { PIECE_COLOR_BLACK, PIECE_COLOR_WHITE } from '../brain';\r\nimport { NOT_SET } from './constant';\r\n\r\n// 23.-\r\nexport default class CountUp {\r\n    countingToNumber: number | null = null;\r\n    countingNumber: number | null = null;\r\n    isCountingUp = false;\r\n    color: string | null = null;\r\n\r\n    get isWhite() {\r\n        return this.color === PIECE_COLOR_WHITE;\r\n    }\r\n    get isBlack() {\r\n        return this.color === PIECE_COLOR_BLACK;\r\n    }\r\n    get isWhiteCounting() {\r\n        return this.isCounting && this.isWhite;\r\n    }\r\n    get isBlackCounting() {\r\n        return this.isCounting && !this.isWhite;\r\n    }\r\n    get isCounting() {\r\n        return this.countingToNumber !== null;\r\n    }\r\n    get isCountingOut() {\r\n        if (!this.isCounting || this.countingNumber === null ||\r\n            this.countingToNumber === null) {\r\n            return false;\r\n        }\r\n        return this.countingNumber >= this.countingToNumber;\r\n    }\r\n\r\n    set(color: string, countingToNumber: number, countingNumber: number) {\r\n        this.color = color;\r\n        this.countingToNumber = countingToNumber;\r\n        this.countingNumber = countingNumber;\r\n    }\r\n\r\n    clear() {\r\n        this.color = null;\r\n        this.countingToNumber = null;\r\n        this.countingNumber = null;\r\n    }\r\n\r\n    checkUp(color: string) {\r\n        if (this.countingNumber !== null && color === this.color) {\r\n            this.countingNumber++;\r\n            this.isCountingUp = true;\r\n        } else {\r\n            this.isCountingUp = false;\r\n        }\r\n    }\r\n\r\n    static fromString(countUpStr: string) {\r\n        if (!countUpStr) {\r\n            countUpStr = `${NOT_SET}.${NOT_SET}@${NOT_SET}`;\r\n        }\r\n        const countUp = new CountUp();\r\n        const countingUp = countUpStr.split('@');\r\n        if (countingUp[1] !== NOT_SET) {\r\n            countUp.countingToNumber = Number(countingUp[1]);\r\n        }\r\n        const countingUpWB = countingUp[0].split('.');\r\n        if (countingUpWB[0] !== NOT_SET) {\r\n            countUp.color = PIECE_COLOR_WHITE;\r\n            countUp.countingNumber = Number(countingUpWB[0]);\r\n        }\r\n        if (countingUpWB[1] !== NOT_SET) {\r\n            countUp.color = PIECE_COLOR_BLACK;\r\n            countUp.countingNumber = Number(countingUpWB[1]);\r\n        }\r\n        return countUp;\r\n    }\r\n\r\n    toString() {\r\n        const whiteCountingDow = this.isCounting && this.isWhite ? this.countingNumber : NOT_SET;\r\n        const blackCountingDow = this.isCounting && !this.isWhite ? this.countingNumber : NOT_SET;\r\n        let str = `${whiteCountingDow}`;\r\n        str += `.${blackCountingDow}`;\r\n        str += `@${this.isCounting ? this.countingToNumber : NOT_SET}`;\r\n        return str;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import Piece from './Piece';\r\n\r\nexport default class Graveyard {\r\n    pieces: Piece[] = [];\r\n    get lastIndex() {\r\n        return this.pieces.length - 1;\r\n    }\r\n    get(index: number) {\r\n        return this.pieces[index];\r\n    }\r\n    removeAtIndex(index: number) {\r\n        if (!!this.get(index)) {\r\n            this.pieces.splice(index, 1);\r\n        }\r\n        return true;\r\n    }\r\n    constructor(graveyardStr?: string) {\r\n        if (graveyardStr) {\r\n            if (graveyardStr.length > 30 ||\r\n                !Piece.isValidPiecesString(graveyardStr, true)) {\r\n                throw new Error(`Invalid graveyard string ${graveyardStr}`);\r\n            }\r\n            this.pieces = graveyardStr.split('').map((charCode, i) => {\r\n                const p = Piece.fromCharCode(charCode);\r\n                return p;\r\n            }).filter((piece) => {\r\n                return piece !== null;\r\n            }) as Piece[];\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        return this.pieces.map((p) => {\r\n            return p.pieceCharCode;\r\n        }).join('');\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import { PIECE_TYPE_KING } from '../brain/constant';\r\nimport { NOT_SET } from './constant';\r\nimport Piece from './Piece';\r\n\r\n/**\r\n * King has attacked, this will effect jumping\r\n */\r\nexport default class KAttacked {\r\n    whiteKing = false;\r\n    blackKing = false;\r\n    constructor(kAttackedStr?: string) {\r\n        if (kAttackedStr) {\r\n            this.whiteKing = !!~kAttackedStr.indexOf(Piece.toWhiteCharCode(PIECE_TYPE_KING));\r\n            this.blackKing = !!~kAttackedStr.indexOf(PIECE_TYPE_KING);\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        let str = `${this.whiteKing ? Piece.toWhiteCharCode(PIECE_TYPE_KING) : NOT_SET}`;\r\n        str += `${this.blackKing ? PIECE_TYPE_KING : NOT_SET}`;\r\n        return str;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import { PIECE_TYPE_KING, PIECE_TYPE_QUEEN } from '../brain/constant';\r\nimport { Move } from '../kpgn';\r\nimport { NOT_SET } from './constant';\r\nimport Piece from './Piece';\r\n\r\n/**\r\n * King or Queen has jumped, the will effect jumping\r\n */\r\nexport default class KqJumped {\r\n    whiteKing = false;\r\n    whiteQueen = false;\r\n    blackKing = false;\r\n    blackQueen = false;\r\n    keyCodes: { [key: string]: string } = {\r\n        blackKing: Piece.toWhiteCharCode(PIECE_TYPE_QUEEN),\r\n        whiteKing: Piece.toWhiteCharCode(PIECE_TYPE_KING),\r\n        whiteQueen: PIECE_TYPE_KING,\r\n        blackQueen: PIECE_TYPE_QUEEN,\r\n    };\r\n    codeKeys: { [key: string]: string } = {\r\n        [Piece.toWhiteCharCode(PIECE_TYPE_QUEEN)]: 'blackKing: ',\r\n        [Piece.toWhiteCharCode(PIECE_TYPE_KING)]: 'whiteKing: ',\r\n        [PIECE_TYPE_KING]: 'whiteQueen: ',\r\n        [PIECE_TYPE_QUEEN]: 'blackQueen: ',\r\n    };\r\n    constructor(kqJumpedStr?: string) {\r\n        if (kqJumpedStr) {\r\n            this.whiteKing = !!~kqJumpedStr.indexOf(Piece.toWhiteCharCode(PIECE_TYPE_KING));\r\n            this.whiteQueen = !!~kqJumpedStr.indexOf(Piece.toWhiteCharCode(PIECE_TYPE_QUEEN));\r\n            this.blackKing = !!~kqJumpedStr.indexOf(PIECE_TYPE_KING);\r\n            this.blackQueen = !!~kqJumpedStr.indexOf(PIECE_TYPE_QUEEN);\r\n        }\r\n    }\r\n\r\n    get isJumped() {\r\n        return this.whiteKing || this.whiteQueen || this.blackKing || this.blackQueen;\r\n    }\r\n\r\n    setProp(key: string, value: boolean) {\r\n        (this as any)[key] = value;\r\n    }\r\n    applyJumping(propKey: string, move: Move) {\r\n        if (!(this as any)[propKey]) {\r\n            move.kqJumping.setProp(propKey, true);\r\n            this.setProp(propKey, true);\r\n        }\r\n    }\r\n\r\n    checkKQMoved(move: Move) {\r\n        if (move.attacker || move.captured) {\r\n            this.applyJumping('whiteKing', move);\r\n            this.applyJumping('blackKing', move);\r\n            this.applyJumping('whiteQueen', move);\r\n            this.applyJumping('blackQueen', move);\r\n        }\r\n        const piece = move.piece;\r\n        if (piece.isTypeKing) {\r\n            if (piece.isColorWhite) {\r\n                this.applyJumping('whiteKing', move);\r\n            } else {\r\n                this.applyJumping('blackKing', move);\r\n            }\r\n        } else if (piece.isTypeQueen) {\r\n            if (piece.isColorWhite) {\r\n                this.applyJumping('whiteQueen', move);\r\n            } else {\r\n                this.applyJumping('blackQueen', move);\r\n            }\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        let str = `${this.whiteKing ? Piece.toWhiteCharCode(PIECE_TYPE_KING) : NOT_SET}`;\r\n        str += `${this.whiteQueen ? Piece.toWhiteCharCode(PIECE_TYPE_QUEEN) : NOT_SET}`;\r\n        str += `${this.blackKing ? PIECE_TYPE_KING : NOT_SET}`;\r\n        str += `${this.blackQueen ? PIECE_TYPE_QUEEN : NOT_SET}`;\r\n        return str;\r\n    }\r\n\r\n    toNumber() {\r\n        let str = `${this.whiteKing ? 1 : 0}`;\r\n        str += `${this.whiteQueen ? 1 : 0}`;\r\n        str += `${this.blackKing ? 1 : 0}`;\r\n        str += `${this.blackQueen ? 1 : 0}`;\r\n        return parseInt(str, 2);\r\n    }\r\n    public static fromNumber(n: number) {\r\n        const b = ('0000' + Number(n).toString(2)).substr(-4);\r\n        const kqJumped = new KqJumped();\r\n        kqJumped.whiteKing = b[0] === '1';\r\n        kqJumped.whiteQueen = b[1] === '1';\r\n        kqJumped.blackKing = b[2] === '1';\r\n        kqJumped.blackQueen = b[3] === '1';\r\n        return kqJumped;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import {\r\n    PIECE_COLOR_BLACK,\r\n    PIECE_COLOR_WHITE,\r\n    PIECE_TYPE_TRANSFORM_FISH,\r\n    PIECE_TYPE_FISH,\r\n    PIECE_TYPE_BOAT,\r\n    PIECE_TYPE_HORSE,\r\n    PIECE_TYPE_GENERAL,\r\n    PIECE_TYPE_KING,\r\n    PIECE_TYPE_QUEEN,\r\n    EMPTY_PIECE,\r\n    BOARD_SEPARATOR,\r\n    PIECE_NAMES,\r\n    COLOR_NAMES,\r\n    PIECE_NAMES_ENGLISH,\r\n    COLOR_NAMES_ENGLISH,\r\n} from '../brain/constant';\r\nimport jsis from '../brain/jsis';\r\n\r\nexport default class Piece {\r\n    type: string;\r\n    color: string;\r\n    get colorOpponent() {\r\n        return Piece.oppositeColor(this.color);\r\n    }\r\n    get pieceCharCode() {\r\n        if (this.isColorWhite) {\r\n            return this.pieceCharCodeWhite;\r\n        }\r\n        return this.type;\r\n    }\r\n    get pieceCharCodeWhite() {\r\n        return Piece.toWhiteCharCode(this.type);\r\n    }\r\n\r\n    get title() {\r\n        return `${PIECE_NAMES[this.type]}${COLOR_NAMES[this.color]}`;\r\n    }\r\n    get titleEnglish() {\r\n        return `${COLOR_NAMES_ENGLISH[this.color]}-${PIECE_NAMES_ENGLISH[this.type]}`;\r\n    }\r\n    _isTypeEqual(type: string) {\r\n        return this.type === type;\r\n    }\r\n    get isTypeKing() {\r\n        return this._isTypeEqual(PIECE_TYPE_KING);\r\n    }\r\n    get isTypeQueen() {\r\n        return this._isTypeEqual(PIECE_TYPE_QUEEN);\r\n    }\r\n    get isTypeBoat() {\r\n        return this._isTypeEqual(PIECE_TYPE_BOAT);\r\n    }\r\n    get isTypeHorse() {\r\n        return this._isTypeEqual(PIECE_TYPE_HORSE);\r\n    }\r\n    get isTypeGeneral() {\r\n        return this._isTypeEqual(PIECE_TYPE_GENERAL);\r\n    }\r\n    get isTypeFish() {\r\n        return this._isTypeEqual(PIECE_TYPE_FISH);\r\n    }\r\n    get isTypeTransformedFish() {\r\n        return this._isTypeEqual(PIECE_TYPE_TRANSFORM_FISH);\r\n    }\r\n    get isColorBlack() {\r\n        return Piece.isBlackColor(this.color);\r\n    }\r\n    get isColorWhite() {\r\n        return Piece.isWhiteColor(this.color);\r\n    }\r\n\r\n\r\n    constructor(type: string, color: string) {\r\n        this.type = Piece.toNormalCharCode(type);\r\n        this.color = color;\r\n    }\r\n\r\n    static fromCharCode(charCode: string) {\r\n        if (!Piece.isValidPiece(charCode)) {\r\n            return null;\r\n        }\r\n        const color = Piece.isWhiteCharCode(charCode) ? PIECE_COLOR_WHITE : PIECE_COLOR_BLACK;\r\n        const type = Piece.toNormalCharCode(charCode);\r\n        return new Piece(type, color);\r\n    }\r\n\r\n    get originPiece(): Piece {\r\n        if (this.isTypeTransformedFish) {\r\n            return new Piece(PIECE_TYPE_FISH, this.color);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    static get pieceChars() {\r\n        return [\r\n            PIECE_TYPE_BOAT,\r\n            PIECE_TYPE_HORSE,\r\n            PIECE_TYPE_GENERAL,\r\n            PIECE_TYPE_KING,\r\n            PIECE_TYPE_QUEEN,\r\n            PIECE_TYPE_FISH,\r\n            PIECE_TYPE_TRANSFORM_FISH,\r\n        ];\r\n    }\r\n    static get colorChars() {\r\n        return [\r\n            PIECE_COLOR_WHITE,\r\n            PIECE_COLOR_BLACK,\r\n        ];\r\n    }\r\n\r\n\r\n    static toWhiteCharCode(charCode: string) {\r\n        return charCode.toUpperCase();\r\n    }\r\n    static isWhiteCharCode(charCode: string) {\r\n        return jsis.isUpperCase(charCode);\r\n    }\r\n    static toBlackCharCode(charCode: string) {\r\n        return charCode.toLowerCase();\r\n    }\r\n    static toNormalCharCode(charCode: string) {\r\n        return Piece.toBlackCharCode(charCode);\r\n    }\r\n\r\n    static isValidPiece(charCode: string) {\r\n        return charCode !== EMPTY_PIECE;\r\n    }\r\n    static isWhiteColor(color: string) {\r\n        return color === PIECE_COLOR_WHITE;\r\n    }\r\n    static isBlackColor(color: string) {\r\n        return color === PIECE_COLOR_BLACK;\r\n    }\r\n    static oppositeColor(color: any) {\r\n        return Piece.isWhiteColor(color) ? PIECE_COLOR_BLACK : PIECE_COLOR_WHITE;\r\n    }\r\n\r\n    static isValidPiecesString(str: string, onlyPiece?: boolean) {\r\n        const ruler = onlyPiece ? allPiecesString.filter((c: string) => {\r\n            return !~[EMPTY_PIECE, BOARD_SEPARATOR].indexOf(c);\r\n        }) : allPiecesString;\r\n        return !str.split('').some((c: string) => {\r\n            return !~ruler.indexOf(c);\r\n        });\r\n    }\r\n\r\n    upgrade() {\r\n        if (this.isTypeFish) {\r\n            this.type = PIECE_TYPE_TRANSFORM_FISH;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    downgrade() {\r\n        if (this.isTypeTransformedFish) {\r\n            this.type = PIECE_TYPE_FISH;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    clone():Piece {\r\n        return Piece.fromCharCode(this.pieceCharCode) as Piece;\r\n    }\r\n}\r\n\r\nconst allPiecesString: string[] = [\r\n    ...Piece.pieceChars,\r\n    ...Piece.pieceChars.map((pieceChar: string) => {\r\n        return Piece.toWhiteCharCode(pieceChar);\r\n    }),\r\n    EMPTY_PIECE,\r\n    BOARD_SEPARATOR,\r\n];\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import { EMPTY_PIECE } from '../brain/constant';\r\nimport Piece from './Piece';\r\nimport Point from './Point';\r\n\r\nexport default class PieceIndex {\r\n    point: Point;\r\n    piece: Piece | null;\r\n    canMovePoints: Point[] = [];\r\n    constructor(point: Point, piece: Piece | null) {\r\n        this.point = point;\r\n        this.piece = piece;\r\n    }\r\n\r\n    toCode() {\r\n        return this.piece != null ? `${this.piece.pieceCharCode}${this.point.indexCode}` : null;\r\n    }\r\n\r\n    toPieceCharCode() {\r\n        return this.piece !== null ? this.piece.pieceCharCode : EMPTY_PIECE;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","\r\nimport {\r\n    CELL_COUNT,\r\n    HORIZONTAL_CODE_LETTERS,\r\n    HORIZONTAL_NOTE_LETTERS,\r\n    ROW_NUMBER,\r\n    VERTICAL_NOTE_LETTERS,\r\n} from '../brain/constant';\r\n\r\nexport default class Point {\r\n    x: number;\r\n    y: number;\r\n    get index() {\r\n        return Point.xyToIndex(this.x, this.y);\r\n    }\r\n    get graveyardIndex() {\r\n        return this.x;\r\n    }\r\n    get indexCode() {\r\n        return `${this.h}${this.v}`;\r\n    }\r\n    get title() {\r\n        return `${HORIZONTAL_NOTE_LETTERS[this.x]}${VERTICAL_NOTE_LETTERS[this.y]}`;\r\n    }\r\n    get titleEnglish() {\r\n        return this.indexCode;\r\n    }\r\n    get h() {\r\n        return HORIZONTAL_CODE_LETTERS[this.x];\r\n    }\r\n    get v() {\r\n        return this.y + 1;\r\n    }\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    static xyToIndex(x: number, y: number) {\r\n        return y * ROW_NUMBER + x;\r\n    }\r\n    static indexCodeToXY(indexCode: string) {\r\n        const x = HORIZONTAL_CODE_LETTERS.indexOf(indexCode[0]);\r\n        const y = Number(indexCode[1]) - 1;\r\n        return { x, y };\r\n    }\r\n    static indexCodeToIndex(indexCode: string) {\r\n        const { x, y } = Point.indexCodeToXY(indexCode);\r\n        return Point.xyToIndex(x, y);\r\n    }\r\n    static fromIndexCode(indexCode: string) {\r\n        const { x, y } = Point.indexCodeToXY(indexCode);\r\n        return new Point(x, y);\r\n    }\r\n    static indexToXY(index: number) {\r\n        const x = index % ROW_NUMBER;\r\n        const y = Math.floor(index / ROW_NUMBER);\r\n        return { x, y };\r\n    }\r\n    static fromIndex(index: number) {\r\n        const { x, y } = Point.indexToXY(index);\r\n        return new Point(x, y);\r\n    }\r\n    static fromIndexGraveyardIndex(index: number) {\r\n        return new Point(index, 0);\r\n    }\r\n    static isIndexInBoard(index: number) {\r\n        return index >= 0 && index <= CELL_COUNT - 1;\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","import Board from './Board';\r\nimport KqJumped from './KqJumped';\r\nimport KAttacked from './KAttacked';\r\nimport CountUp from './CountUp';\r\nimport Graveyard from './Graveyard';\r\nimport {\r\n    DEFAULT_BOARD_STR,\r\n    STRING_COUNT,\r\n} from './constant';\r\nimport { Captured } from '../kpgn';\r\nimport Move from '../kpgn/Move';\r\nimport Point from './Point';\r\nimport Piece from './Piece';\r\nimport { PieceIndex } from '.';\r\nimport MoveHelper from '../brain/MoveHelper';\r\nimport { PIECE_COLOR_WHITE } from '../brain/constant';\r\n\r\n/**\r\n * Raksa-Eng Notation\r\n * ren: <pieces on board> <turn w|b> <king&queen moved ----|SNsn> <king attack --|Kk> <countUp -.-|-.4> <pieces in graveyard>\r\n */\r\nexport type RENPropType = {\r\n    boardStr: string;\r\n    turnStr: string;\r\n    kqJumpedStr: string;\r\n    kAttackedStr: string;\r\n    countUpStr: string;\r\n    graveyardStr: string;\r\n}\r\nexport default class REN {\r\n    board: Board;\r\n    turn: string;\r\n    kqJumped: KqJumped;\r\n    kAttacked: KAttacked;\r\n    countUp: CountUp;\r\n    graveyard: Graveyard;\r\n    moveHelper: MoveHelper;\r\n    constructor(renProps: RENPropType) {\r\n        this.moveHelper = new MoveHelper();\r\n        this.init(renProps);\r\n    }\r\n\r\n    init({\r\n        boardStr,\r\n        turnStr,\r\n        kqJumpedStr,\r\n        kAttackedStr,\r\n        countUpStr: countUpStr,\r\n        graveyardStr }: RENPropType) {\r\n        // TODO: improve by moving to fromString()\r\n        this.board = new Board(boardStr);\r\n        this.turn = turnStr || PIECE_COLOR_WHITE;\r\n        this.kqJumped = new KqJumped(kqJumpedStr);\r\n        this.kAttacked = new KAttacked(kAttackedStr);\r\n        this.countUp = CountUp.fromString(countUpStr);\r\n        this.graveyard = new Graveyard(graveyardStr);\r\n        const invalidPiecesString = this.isInvalidPieceCount();\r\n        if (invalidPiecesString) {\r\n            let msg = `Invalid piece string board:${boardStr}`;\r\n            msg += `, graveyard:${graveyardStr}, count:${invalidPiecesString}`;\r\n            throw new Error(msg);\r\n        }\r\n        this.moveHelper = new MoveHelper();\r\n    }\r\n\r\n    isInvalidPieceCount() {\r\n        const pieces = this.board.pieceIndices.map((pos) => {\r\n            return pos.piece;\r\n        }).filter((p) => {\r\n            return p !== null;\r\n        }).concat(this.graveyard.pieces).map((p: Piece) => {\r\n            return p.originPiece;\r\n        });\r\n        const piecesCount = pieces.reduce((obj: any, p) => {\r\n            obj[p.pieceCharCode] = obj[p.pieceCharCode] || 0;\r\n            obj[p.pieceCharCode]++;\r\n            return obj;\r\n        }, {});\r\n        const str = Object.keys(piecesCount).map((k) => {\r\n            return `${k}${piecesCount[k]}`;\r\n        }).sort().join('');\r\n        if (str === STRING_COUNT) {\r\n            return false;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    backRen(move: Move) {\r\n        const ren = REN.fromString(this.toString());\r\n        ren.moveBack(move);\r\n        return ren;\r\n    }\r\n\r\n    get isCanMoveNext() {\r\n        return !this.countUp.isCountingOut;\r\n    }\r\n\r\n    move(moveFromIndex: number, moveToIndex: number): Move | null {\r\n        if (!this.isCanMoveNext) {\r\n            return null;\r\n        }\r\n        const piece = this.board.getPieceAtIndex(moveFromIndex);\r\n        if (!piece) {\r\n            return null;\r\n        }\r\n        this.board.setPieceAtIndex(moveFromIndex, null);\r\n        const move = new Move({\r\n            moveFrom: Point.fromIndex(moveFromIndex),\r\n            moveTo: Point.fromIndex(moveToIndex),\r\n            piece: piece.clone(),\r\n        });\r\n        if (move.isUpgrading) {\r\n            piece.upgrade();\r\n        }\r\n        const targetPiece = this.board.getPieceAtIndex(moveToIndex);\r\n        if (targetPiece) {\r\n            this.graveyard.pieces.push(targetPiece);\r\n            move.captured = new Captured({\r\n                fromBoardPoint: Point.fromIndex(moveToIndex),\r\n                toGraveyardPoint: Point.fromIndex(this.graveyard.lastIndex),\r\n                piece: targetPiece,\r\n            });\r\n        }\r\n        this.board.setPieceAtIndex(moveToIndex, piece);\r\n        this.turn = Piece.oppositeColor(piece.color);\r\n        move.setRen(this);\r\n        return move;\r\n    }\r\n\r\n    moveBack(move: Move) {\r\n        const movedToIndex = move.moveTo.index;\r\n        const movedFromIndex = move.moveFrom.index;\r\n        const piece = this.board.getPieceAtIndex(movedToIndex);\r\n        this.board.setPieceAtIndex(movedToIndex, null);\r\n        if (!piece) {\r\n            return false;\r\n        }\r\n        this.board.setPieceAtIndex(movedFromIndex, piece);\r\n        if (move.captured) {\r\n            const movedToGYIndex = move.captured.toGraveyardPoint.index;\r\n            const capturedPiece = this.graveyard.get(movedToGYIndex);\r\n            this.board.setPieceAtIndex(movedToIndex, capturedPiece);\r\n            this.graveyard.removeAtIndex(movedToGYIndex);\r\n        }\r\n        if (move.kqJumping.whiteKing) {\r\n            this.kqJumped.whiteKing = false;\r\n        }\r\n        if (move.kqJumping.whiteQueen) {\r\n            this.kqJumped.whiteQueen = false;\r\n        }\r\n        if (move.kqJumping.blackKing) {\r\n            this.kqJumped.blackKing = false;\r\n        }\r\n        if (move.kqJumping.blackQueen) {\r\n            this.kqJumped.blackQueen = false;\r\n        }\r\n        if (this.countUp) {\r\n            this.countUp.clear();\r\n        }\r\n        this.turn = piece.color;\r\n        return true;\r\n    }\r\n\r\n    static fromString(renStr?: string) {\r\n        if (!renStr) {\r\n            renStr = DEFAULT_BOARD_STR;\r\n        }\r\n        const renArr = renStr.split(' ');\r\n        return new REN({\r\n            boardStr: renArr[0],\r\n            turnStr: renArr[1],\r\n            kqJumpedStr: renArr[2],\r\n            kAttackedStr: renArr[3],\r\n            countUpStr: renArr[4],\r\n            graveyardStr: renArr[5],\r\n        });\r\n    }\r\n\r\n    toString() {\r\n        let str = this.board.toString();\r\n        str += ` ${this.turn.toString()}`;\r\n        str += ` ${this.kqJumped.toString()}`;\r\n        str += ` ${this.kAttacked.toString()}`;\r\n        str += ` ${this.countUp.toString()}`;\r\n        str += ` ${this.graveyard.toString()}`;\r\n        return str;\r\n    }\r\n\r\n    get isQueenMoved() {\r\n        const isQueenMoved = Piece.isWhiteColor(this.turn) && this.kqJumped.whiteQueen ||\r\n            Piece.isBlackColor(this.turn) && this.kqJumped.blackQueen;\r\n        return isQueenMoved;\r\n    }\r\n    get isKingMoved() {\r\n        const isKingMoved = Piece.isWhiteColor(this.turn) && this.kqJumped.whiteKing ||\r\n            Piece.isBlackColor(this.turn) && this.kqJumped.blackKing;\r\n        return isKingMoved;\r\n    }\r\n    genAllCanMoves(): PieceIndex[] {\r\n        const canMoves = this.moveHelper.calcCanMove({\r\n            piecesString: this.board.toStringFullNoSeparate(),\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: true,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        return canMoves.moves;\r\n    }\r\n    isHasMoved(piece: Piece) {\r\n        let isHasMoved = false;\r\n        if ((this.kqJumped.blackKing && piece.isColorBlack && piece.isTypeKing) ||\r\n            (this.kqJumped.whiteKing && piece.isColorWhite && piece.isTypeKing) ||\r\n            (this.kqJumped.blackQueen && piece.isColorBlack && piece.isTypeQueen) ||\r\n            (this.kqJumped.whiteQueen && piece.isColorWhite && piece.isTypeQueen)) {\r\n            isHasMoved = true;\r\n        }\r\n        return isHasMoved;\r\n    }\r\n    getCanMovePointsByPoint(point: Point): Point[] {\r\n        const piece = this.board.getPieceAtIndex(point.index);\r\n        if (piece === null) {\r\n            return [];\r\n        }\r\n        return this.moveHelper.genCanMovePointsByPiecePoint(point, piece,\r\n            this.board.toStringFullNoSeparate(), this.isHasMoved(piece));\r\n    }\r\n\r\n    checkBoardStatus(move: Move, force?: boolean) {\r\n        const piecesString = this.board.toStringFullNoSeparate();\r\n        // TODO: optimize by specific color\r\n        const state = this.moveHelper.calcState({\r\n            piecesString,\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: false,\r\n            genCanMoveForAnother: false,\r\n        });\r\n\r\n        const kingInDanger = state.blackKingInDanger || state.whiteKingInDanger;\r\n        if (kingInDanger) {\r\n            const pieceIndex = kingInDanger.map((point) => {\r\n                return new PieceIndex(point, this.board.getPieceAtIndex(point.index));\r\n            }).filter((pieceIndex) => {\r\n                return pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing;\r\n            })[0];\r\n            move.boardStatus.attacker = pieceIndex;\r\n        }\r\n        move.boardStatus.winColor = state.winColor;\r\n        move.boardStatus.stuckColor = state.stuckColor;\r\n    }\r\n\r\n    checkCountStatus(move: Move, force?: boolean) {\r\n        if (move.isCanMoveNext) {\r\n            const piecesString = this.board.toStringFullNoSeparate();\r\n            if (this.countUp.isCounting) {\r\n                move.isStartCounting = false;\r\n                this.countUp.checkUp(move.piece.color);\r\n                if (this.countUp.isCountingOut) {\r\n                    move.boardStatus.drawCountColor = this.countUp.color;\r\n                }\r\n            } else {\r\n                const color = Piece.oppositeColor(move.piece.color);\r\n                const countState = this.moveHelper.calCount({\r\n                    color: Piece.oppositeColor(move.piece.color),\r\n                    piecesString,\r\n                    force: !!force,\r\n                });\r\n                if (countState) {\r\n                    this.countUp.set(color, countState.countingToNumber, countState.countingNumber);\r\n                    move.isStartCounting = true;\r\n                }\r\n            }\r\n        }\r\n        move.syncRen(this);\r\n    }\r\n\r\n    getWinColor(): string | null {\r\n        const state = this.moveHelper.calcState({\r\n            piecesString: this.board.toStringFullNoSeparate(),\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: false,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        return state.winColor;\r\n    }\r\n    syncWithMove(move: Move) {\r\n        if (move) {\r\n            const countUp = this.countUp;\r\n            if (countUp.isCounting && this.turn !== countUp.color && !move.isStartCounting) {\r\n                countUp.isCountingUp = true;\r\n            }\r\n        }\r\n    }\r\n}\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\r\nexport const STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\r\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\r\nexport const DEFAULT_BOARD_STR = 'BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb';\r\nexport const NOT_SET = '-';\r\nexport const PIECE_FLAG_KILL = '<';\r\nexport const PIECE_FLAG_JUMP = '^';\r\nexport const PIECE_FLAG_UPGRADE = '*';\r\nexport const PIECE_FLAG_START_COUNTING = '#';\r\nexport const EVENT_FLAG_ATTACK = 'attack';\r\nexport const EVENT_FLAG_WIN = 'win';\r\nexport const EVENT_FLAG_DRAW = 'draw';\r\nexport const EVENT_FLAG_START_COUNTING = 'start-counting';\r\nexport const EVENT_FLAG_COUNTING_UP = 'counting-up';\r\nexport const EVENT_FLAG_COUNT_UP_OUT = 'count-up-out';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","export { default as Board } from './Board';\r\nexport { default as CountUp } from './CountUp';\r\nexport { default as Graveyard } from './Graveyard';\r\nexport { default as KAttacked } from './KAttacked';\r\nexport { default as KqJumped } from './KqJumped';\r\nexport { default as Piece } from './Piece';\r\nexport { default as PieceIndex } from './PieceIndex';\r\nexport { default as REN } from './REN';\r\nexport { RENPropType } from './REN';\r\nexport { default as Point } from './Point';\r\nexport * from './constant';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(4117);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","isobject","val","Array","isArray","isObjectObject","o","prototype","toString","call","isarray","arr","hasValues","noZero","undefined","hasOwnProperty","toString$1","join","hasValue","prop","b","c","segs","split","len","slice","getValue","unsetValue","TypeError","last","pop","shift","omitDeep","ctor","constructor","prot","j","isBuffer_1","isBuffer","readFloatLE","isSlowBuffer","_isBuffer","toString$2","kindOf","Boolean","String","Number","Function","RegExp","Date","type","createCommonjsModule","fn","renameKeys","rename","res","window","deepRenameKeys","renameDeep","cb","Error","eventemitter3","has","prefix","Events","EE","context","once","this","EventEmitter","_events","_eventsCount","create","__proto__","eventNames","events","name","names","concat","listeners","event","exists","evt","available","l","ee","emit","a1","a2","a3","a4","a5","args","removeListener","on","listener","removeAllListeners","off","addListener","setMaxListeners","prefixed","_defineProperty$1","noop","State","data","cdata","tagBegin","tagName","tagEnd","attributeNameStart","attributeName","attributeNameEnd","attributeValueBegin","attributeValue","Action","lt","gt","space","equal","quote","slash","char","error","Type","text","openTag","closeTag","charToAction","lexer","options","_State$data","_State$tagBegin","_State$tagName","_State$tagEnd","_State$attributeNameS","_State$attributeName","_State$attributeNameE","_State$attributeValue","_State$attributeValue2","_lexer$stateMachine","assign","debug","state","attrName","attrValue","isClosing","openingQuote","console","log","stateMachine","trim","substr","step","actions","getAction","write","str","Type$1","NodeType","createNode","params","parent","attributes","children","reader_1","xml","reader","stream","parentNodes","doneEvent","tagPrefix","emitTopLevelOnly","lexer$1","rootNode","current","handleLexerData","node","reset","parse","create$1","ast","parseInput","input","parsed","hasMoreChildren","reduce","acc","_ref","removeDoctype","replace","wrapInput","removeAttrs","camelize","notCamelcase","toCamelCase","all","letter","toUpperCase","test","escapeText","escapeAttr","attr","svgsonSync","_ref$transformNode","transformNode","_ref$camelcase","camelcase","n","applyTransformNode","map","applyFilters","cleanInput","wrap","_len","_key","Promise","resolve","reject","e","parseSync","stringify","_ref$transformAttr","transformAttr","escape","_ref$selfClose","selfClose","attrStr","king","queen","general","horse","boat","fish","transformFish","svg","init","svgsonInstant","element","d","kingSVG","SVGManager","queenSVG","generalSVG","horseSVG","boatSVG","fishSVG","transformFishSVG","_cellManagers","from","CELL_COUNT","_","dom","document","createElement","Point","fromIndex","isUpsideDown","boardStatusEventController","boardEventController","setProps","khmerChessBoard","khmerChess","selectCell","cell","click","selectedCell","selectedCells","select","deselected","isCanMove","attemptMove","isCanSelect","selected","attachClickEvent","setOnClick","bind","detachClickEvent","removeOnClick","set","get","index","getKing","color","pieceIndex","kpgn","ren","board","point","getByIndexCode","indexCode","indexCodeToIndex","getByXY","x","y","xyToIndex","flip","_applyFlip","backupPiecesList","clone","backupSelectedList","clearSelectedCells","removePiecesFromCells","applyFlippingFlag","clonedCell","setPiece","piece","turn","isSelected","isMoved","isAttacked","isTurning","find","pieceIndices","piecesInBoard","PieceIndex","clearCanMoveCells","canMoveCells","clearCanMoved","highlightMovedCells","fromCell","toCell","moved","clearMovedCells","movedCells","clearMoved","clearAttackCells","attackedCells","attack","enableTurnCells","pieceInTurnCells","clearTurnCells","turnCells","removePiece","setFlipped","setCellNote","ROW_NUMBER","addClassName","BOARD_NOTE_H_PREFIX_CLASS","isEnglish","enClass","BOARD_NOTE_V_PREFIX_CLASS","clearCellNote","removeClassName","renderKhmerChessPieces","domRootBoard","classList","contains","CSS_P2P","setP2P","remove","add","takeTurn","changeTurn","checkBoardEvent","addBoardStatusEventListener","removeBoardStatusEventListener","forceCount","move","playManager","currentMove","countUp","isCounting","colorOpponent","checkCountStatus","render","isStartCounting","container","isGraveyard","containerDom","removePieceClasses","PIECE_CLASS_NAME","Piece","colorChars","pieceChars","className","hasClassName","SELECTED_CLASS_NAME","getCanMovePointsByPoint","CAN_MOVE_CLASS_NAME","MOVED_CLASS_NAME","TURN_CLASS_NAME","attacked","ATTACKED_CLASS_NAME","onclick","FLIPPED_CLASS","xy","indexToXY","div","CellManager","scrollIntoView","behavior","block","inline","movePieceTo","movePieceToGraveyard","deadPiece","movePieceFromGraveyard","raisePiece","setCanMove","upgrade","downgrade","_cells","setDom","domGraveyard","TD_GRAVEYARD_NUMBER","GRAVEYARD_NOTE_PREFIX_CLASS","applyPiecesFromKhmerChess","piecesInGraveyard","KhmerChess","title","version","KhmerChessBoard","setOptions","graveyardManager","boardManager","soundManager","messageManager","pieceShadowManager","width","minWidth","addOnCellSelectedEventListener","canMovePoints","addOnCellDeselectedEventListener","addOnAttemptMoveEventListener","toIndex","next","turning","setFullScreen","isFullScreen","table","POPUP_CLASS_NAME","style","top","left","transform","zIndex","scaleFit","getScaleFit","getBoundingClientRect","addAllDomCss","uniqueClassName","playerContainer","tdShadow","setTdShadow","applyPieces","draw","setLocale","locale","locales","LOCALE_ENGLISH","LOCALE_KHMER","indexOf","loadKpng","kpng","fromBase64","fromJson","resetCurrentIndex","highlightCurrentMove","pause","loadRen","renStr","loadRENStr","removeAllDomElements","querySelectorAll","parentElement","removeChild","removeAllDomCss","destroy","info","PIECE_COLOR_WHITE","PIECE_COLOR_BLACK","COLOR_NAMES","COLOR_NAMES_ENGLISH","PIECE_TYPE_BOAT","PIECE_TYPE_HORSE","PIECE_TYPE_GENERAL","PIECE_TYPE_KING","PIECE_TYPE_QUEEN","PIECE_TYPE_FISH","PIECE_TYPE_TRANSFORM_FISH","PIECE_NAMES","PIECE_NAMES_ENGLISH","EMPTY_PIECE","PIECE_COLOR_EMPTY","BOARD_SEPARATOR","ROW_FIRST_INDEX","ROW_LAST_INDEX","HORIZONTAL_CODE_LETTERS","HORIZONTAL_NOTE_LETTERS","VERTICAL_NOTE_LETTERS","HORIZONTAL_NOTE_LETTERS_ENGLISH","VERTICAL_NOTE_LETTERS_ENGLISH","KhmerChessProps","containerClassName","messageClassName","logEnabled","enableLog","disableLog","message","optionalParams","css","showMessage","domContainer","display","domMessage","innerHTML","hide","bc","appendChild","height","divMessage","containerSelector","renData","onClick","span","indexSpan","innerText","toKhmerNum","infoSpan","isCurrent","_width","genId","btr","vw","Math","max","documentElement","clientWidth","innerWidth","vh","clientHeight","innerHeight","borderWidth","cellWidth","MIN_CELL_WIDTH","BORDER_WIDTH","_quickMove","pending","resolvers","callbacks","quickMove","enable","finishAnimations","tdShadowDown","tdShadowDom","movingPiece","callback","pice","animate","fromBc","toBc","option","opacity","cancel","removePendingCallback","_resolve","addPendingCallback","setTimeout","onfinish","oncancel","clearTimeout","resolveAnimation","renDataList","currentIndex","playEventController","moves","movesLength","renderMoveData","moveData","getMessage","containerWidth","tbody","tr","tdHistory","btn","backBtnDom","playBtnDom","pauseBtnDom","nextBtnDom","btnListen","back","play","latestMove","undo","isCanUndo","offTurning","isCanNext","isCanPlay","toggle","isPlaying","disabled","isCanBack","loadCurrentRen","getMove","applyMoveBack","applyMove","finish","moveFrom","moveTo","isUpgrading","playMove","captured","fromBoardPoint","toGraveyardPoint","playCapture","lastFromCell","lastToCell","attacker","capture","check","isEnable","disable","_addSound","src","sound","setAttribute","body","flag","SoundManager","MOVE_FLAG","CAPTURE_FLAG","CHECK_FLAG","playCheck","CLICK","BoardManagerEventController","SELECTED","ATTEMPT_MOVE","CHANGE_TURN","_addPropEvent","DESELECTED","addOnCellClickEventListener","_addOnEventListener","removeOnCellClickEventListener","_removeOnEventListener","removeOnCellSelectedEventListener","removeOnCellDeselectedEventListener","removeOnAttemptMoveEventListener","addOnChangeTurnEventListener","removeOnChangeTurnEventListener","EventHandler","countingToNumber","countingNumber","actorPieceIndex","isWhite","isAttacking","isWin","isDraw","isCannotMove","isCountingUp","isCountUpOut","EVENT_FLAG_WIN","EVENT_FLAG_ATTACK","EVENT_FLAG_START_COUNTING","applyCount","EVENT_FLAG_COUNTING_UP","EVENT_FLAG_COUNT_UP_OUT","EVENT_FLAG_DRAW","tran","pTitle","titleEnglish","BoardStatusEvent","EVENT","BoardStatusEventController","STATUS_EVENT","fireEvent","boardEvent","REN","fromString","syncWithMove","winColor","stuckColor","isCountingOut","PlayManagerEventController","BLACK","PAUSE","NEXT","PLAY","addOnDataClickEventListener","removeOnDataClickEventListener","addOnBackEventListener","removeOnBackEventListener","addOnPlayEventListener","removeOnPlayEventListener","addOnPauseEventListener","removeOnPauseEventListener","addOnNextEventListener","removeOnNextEventListener","piecesImageBackground","selector","moreBG","moreCss","attackedSVG","svgCSS","PIECES_SVG","TR_PIECE_CLASS_NAME","CSS_PSEUDO_PIECE","encodeURIComponent","notAttackedSVG","notAttacked","TR_PIECE_SHADOW_CLASS_NAME","pieceFontSize","CSS_TABLE_SELECTOR","p2pSelector","GRAVEYARD_CLASS_NAME","CSS_PSEUDO_HIGHLIGHT","canMove","tranIndex","horizontalLetters","fSize","genBackgroundNote","t","CSS_PSEUDO_NOTE","hx","vy","bgImg","head","getElementsByTagName","createTextNode","graveyardContainerHeight","graveyardWidth","createTable","createTbody","createTr","createTd","td","TABLE_CLASS","trPlayerContainer","tdPlayerContainer","addEventListener","scrollLeft","preventDefault","colSpan","trGraveyardContainer","tdGraveyardContainer","overflowX","overflowY","tableGraveyard","boxShadow","trGraveyard","tdGraveyard","randomString","result","characters","charactersLength","charAt","floor","random","_idList","id","WOOD_COLORS","WHITE","filterId","SVG_FILTER","pathData","tObjects","resetBoard","getCanMoves","genAllCanMoves","validateRENStr","valid","error_number","getRENStr","piecesMultiArray","pieces","graveyard","getKPGN","toJson","loadKpgn","kpgnJosn","drawAscii","moveFromIndex","moveToIndex","addMove","clearBoard","getHistories","englishNum","h","v","isUndefined","isWhiteColor","currentTurn","piecesString","isQueenMoved","isKingMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","generateCanMoves","filterPieceInBoard","whitePieces","blackPieces","genMoves","isHaveMoved","isTypeKing","isTypeQueen","genCanMovePointsByPiecePoint","cleanPieceNoMove","cleanMoves","isTrue","splice","checkIfKingInDanger","getKingInDanger","getKingWillInDanger","genWinLost","getStuck","isWhiteTurn","calcCanMove","anotherMoves","calcState","calCount","force","checkCount","isHasMoved","isContainsPoint","isValidPoint","Rectangle","mask","CountUpState","convertMask","point1","sign","point2","getCharPieceFromString","isIndexInBoard","getCharPieceInPos","getPieceByIndex","charCode","isValidPiece","fromCharCode","getPieceCanMovePoses","_pos","newIndex","getPieceCanMovePosesValid","_poses","thisPos","p","distPiece","isTypeFish","isTypeBoat","_x","_y","_n","abs","_s","isNull","replacePiecesStringAtIndex","substring","injectPiece","index1","index2","isCharPiecesInBoard","kingPos","pieceCharCode","isHaveCaptured","points","code","getPiecesInBoard","isColorWhite","extractPiecesToArray","piecesStringArr","pieceAll","isStateCount","checkCountable","weaker","stronger","oppositeColor","countChar","count","toukCount","start","isUpgradable","isColorBlack","BoardHelper","default","jsis","isValid","isString","isNotEmpty","isValidString","isNumber","isStringNumber","isNaN","isFunction","f","isObject","isBoolean","isValidBoolean","isFalse","isPoint","isValidObject","isValidNumber","isSize","size","isOdd","isEven","isUpperCase","date","location","players","white","black","whiteWin","blackWin","timer","isCanMoveNext","loadMovesStrings","currentRen","reverse","moveStr","backRen","m","json","JSON","decode","toBase64","jsStr","encode","boardStatus","drawCountColor","boardHelper","kqJumping","KqJumped","setRen","checkBoardStatus","kqJumped","checkKQMoved","syncRen","whiteKing","whiteQueen","blackKing","blackQueen","fromIndexCode","Move","killIndex","PIECE_FLAG_KILL","match","gyIndex","capturedPiece","fromIndexGraveyardIndex","jumpingIndex","PIECE_FLAG_JUMP","fromNumber","PIECE_FLAG_START_COUNTING","pCode","fIndexCode","tIndexCode","flags","isJumped","toNumber","PIECE_FLAG_UPGRADE","getJumpingMessage","jump","isWhiteKingJumping","isWhiteQueenJumping","isBlackKingJumping","isBlackQueenJumping","win","lost","totalSecond","bonusTime","currentWhite","currentBlack","_onEventListeners","_propEvent","_checkPropEvent","_isLockProp","_checkOnEvent","_guardEventName","eventName","Base64","_keyStr","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","_utf8_decode","string","utftext","c1","c2","s","subArr","boardStr","DEFAULT_BOARD_STR","newBoardStr","extract","isValidPiecesString","compress","reg","$1","toStringFull","toPieceCharCode","toStringFullNoSeparate","getPieceAtIndex","setPieceAtIndex","clear","checkUp","countUpStr","NOT_SET","CountUp","countingUp","countingUpWB","graveyardStr","removeAtIndex","kAttackedStr","toWhiteCharCode","kqJumpedStr","keyCodes","codeKeys","setProp","applyJumping","propKey","parseInt","toNormalCharCode","pieceCharCodeWhite","_isTypeEqual","isBlackColor","isWhiteCharCode","isTypeTransformedFish","toBlackCharCode","toLowerCase","onlyPiece","ruler","allPiecesString","some","pieceChar","toCode","indexCodeToXY","renProps","moveHelper","turnStr","kAttacked","invalidPiecesString","isInvalidPieceCount","msg","piecesCount","pos","originPiece","k","sort","STRING_COUNT","moveBack","targetPiece","Captured","lastIndex","movedToIndex","movedFromIndex","movedToGYIndex","renArr","kingInDanger","countState","getWinColor","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","g","globalThis","scriptUrl","importScripts","currentScript","scripts"],"sourceRoot":""}