{"version":3,"sources":["webpack://khmer-chess-board/webpack/universalModuleDefinition","webpack://khmer-chess-board/./index.js","webpack://khmer-chess-board/./src/BoardManager.js","webpack://khmer-chess-board/./src/GraveyardManager.js","webpack://khmer-chess-board/./src/SoundManager.js","webpack://khmer-chess-board/./src/SquarePiece.js","webpack://khmer-chess-board/./src/audio.js","webpack://khmer-chess-board/./src/constance.js","webpack://khmer-chess-board/./src/index.js","webpack://khmer-chess-board/./src/svg.js","webpack://khmer-chess-board/../khmer-chess/index.js","webpack://khmer-chess-board/../khmer-chess/src/KPGN.js","webpack://khmer-chess-board/../khmer-chess/src/KhmerChess.js","webpack://khmer-chess-board/../khmer-chess/src/REN.js","webpack://khmer-chess-board/../khmer-chess/src/board-helper.js","webpack://khmer-chess-board/../khmer-chess/src/gen-mask.js","webpack://khmer-chess-board/../khmer-chess/src/jsis.js","webpack://khmer-chess-board/../khmer-chess/src/move-helper.js","webpack://khmer-chess-board/../khmer-chess/src/ren-helper.js","webpack://khmer-chess-board/webpack/bootstrap","webpack://khmer-chess-board/webpack/startup"],"names":["root","factory","exports","module","define","amd","a","i","self","GraveyardManager","require","addCss","drawBoard","config","khmerChess","SoundManager","BoardManager","constance","BORDER_WIDTH","MIN_SQUARE_WIDTH","TD_GRAVEYARD_NUMBER","KhmerChess","Piece","boardHelper","KhmerChessBoard","options","width","container","Error","this","minWidth","ROW_NUMBER","boardManager","setOptions","graveyardManager","call","setNote","renderKhmerChess","renStr","load","get","removePiece","graveyard","forEach","p","setPiece","type","color","board","arr","j","square","name","version","console","log","squareWidth","squarePiece","squares","index","code","indexCodeToPos","x","y","nerdXyToPos","isUpsideDown","propArr","map","s","getProperties","clear","reverse","setProperties","clearNote","setOnClick","isSelected","unselect","select","sqWidth","fSize","getByXY","addNote","t","HORIZONTAL_NOTE_LETTERS","VERTICAL_NOTE_LETTERS","push","AUDIO","isEnable","move","parentElement","removeChild","capture","check","_addSound","src","sound","document","createElement","setAttribute","style","display","body","appendChild","flag","MOVE_FLAG","play","CAPTURE_FLAG","CHECK_FLAG","SELECTED_CLASS_NAME","PIECE_CLASS_NAME","addBackgroundNote","SquarePiece","piece","isGraveyard","xyToIndexCode","drawPiece","classList","remove","add","contains","className","prop","listener","onclick","tObjects","backgroundImage","TABLE_CLASS","PIECES_SVG","pieceFontSize","highlightPseudo","piecePseudo","css","getColorArray","getPieceCharArray","encodeURIComponent","head","getElementsByTagName","styleSheet","cssText","createTextNode","createTable","parent","table","createTbody","tbody","createTr","tr","createTd","td","put","graveyardContainerHeight","height","trGraveyardContainer","tdGraveyardContainer","addEventListener","e","scrollLeft","wheelDelta","preventDefault","overflowX","overflowY","colSpan","padding","boxShadow","tableGraveyard","graveyardWidth","trGraveyard","tdGraveyard","isNumber","WOOD_COLORS","filterId","SVG_FILTER","PIECE_COLOR_WHITE","PIECE_TYPE_TOUK","PIECE_TYPE_SES","PIECE_TYPE_KOL","PIECE_TYPE_SDECH","PIECE_TYPE_NEANG","PIECE_TYPE_TREY","PIECE_TYPE_BORK","PIECE_COLOR_BLACK","target","bgImg","obj","isNaN","Number","REN","renHelper","KPGN","Player","id","Result","win","draw","lost","Move","from","to","jump","Timer","totalSecond","currentWhite","currentBlack","kpgnJson","white","black","last","whiteWin","blackWin","event","date","location","players","toJson","result","moves","m","ren","toString","timer","MoveHelper","toRen","renInstance","valid","error_number","error","message","toMultiArray","pieces","kpgnInstance","kpgnJosn","reduce","subArr","rs","join","bottom","length","gyTStr","gyStr","gyBStr","graveyardStr","turn","squareId","jsis","DEFAULT_BOARD_STR","NOT_SET","c","isUndefined","toWhitePiece","isUpperCase","toLowerCase","isWhite","Pos","h","v","HORIZONTAL_CODE_LETTERS","indexOf","toPString","isNull","EMPTY_PIECE","Board","boardStr","Array","getSubBoardNumber","_","codeP","numToCodeP","newBoardStr","extract","replace","isValidPiecesString","poses","split","pos","str","reg","RegExp","$1","BOARD_SEPARATOR","toStringFull","compress","KqMoved","kqMovedStr","bh","whiteKing","whiteQueen","blackKing","blackQueen","KAttacked","kAttackedStr","CountDown","countdownStr","newCountdownStr","isStringNumber","Graveyard","turnStr","kqMoved","countdown","invalidPiecesString","isInvalidPieceCount","piecesCount","filter","concat","toOrigin","Object","keys","k","sort","kAttacked","genMask","Rectangle","point","allPiecesString","ROW_FIRST_INDEX","ROW_LAST_INDEX","mask","onlyPiece","ruler","some","toUpperCase","isValidPosXY","rect","isContainsPoint","isValidPiece","isBlack","res","nerdPosToXY","Math","floor","pointToIndexCode","posToIndexCode","isPosInBoard","posInBoard","getCharPieceFromString","piecesString","charAt","getPieceProperties","pieceHash","PIECE_COLOR_EMPTY","getCharPieceInPos","getPieceInPos","isString","pr","convertMask","sign","getPieceCanMovePoses","_pos","getPieceCanMovePosesValid","distPiece","_poses","n","thisPos","_x","_y","_n","_s","abs","replacePiecesString","substring","injectPiece","pos1","pos2","isCharPiecesInBoard","getPieceCode","val","getKingWillInDanger","kingPos","numToCode","getKingInDanger","number","generatePosesCanMove","isHaveMoved","isHaveCaptured","getPiecesInBoard","filterPieceInBoard","whitePieces","blackPieces","extractPiecesToArray","pieceAll","isStateCount","checkCountable","weaker","stronger","oppositeColor","checkCount","force","countChar","count","toukCount","getHashKey","key","getPieceKeyByProp","prop1","getPieceKeyByName","isValid","isNotEmpty","isValidString","isArray","isFunction","f","isObject","o","isBoolean","b","isTrue","isValidBoolean","isFalse","isPoint","isValidObject","isValidNumber","isSize","size","isOdd","isEven","option","currentTurn","isNeangMoved","isSdechMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","winColor","stuckColor","genMoves","isSdech","isNeang","canMoveIndexes","cleanMoves","splice","init","generateCanMoves","cleanPieceNoMove","anotherMoves","checkIfKingInDanger","genWinLost","getStuck","blackCountable","whiteCountable","countingBlack","countingWhite","fen","fenArr","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__"],"mappings":"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","file":"khmer-chess-board.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n/*\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\n8 ┃   ┃   ┃   ┃   ┃ k ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n7 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n6 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n5 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n4 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n3 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n2 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n1 ┃   ┃   ┃   ┃ K ┃   ┃   ┃   ┃   ┃\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\n    a   b   c   d   e   f   g   h\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\n  ┃ b ┃ h ┃ g ┃ q ┃ g ┃ h ┃ b ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ B ┃ H ┃ G ┃ Q ┃ G ┃ H ┃ B ┃\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\n */\n'use strict';\n\nconst { GraveyardManager } = require('./src/GraveyardManager');\nconst {\n    addCss,\n    drawBoard,\n} = require('./src/index');\nconst config = require('./package.json');\nconst khmerChess = require('khmer-chess');\nconst { SoundManager } = require('./src/SoundManager');\nconst { BoardManager } = require('./src/BoardManager');\nconst constance = require('./src/constance');\n\nconst {\n    BORDER_WIDTH,\n    MIN_SQUARE_WIDTH,\n    TD_GRAVEYARD_NUMBER,\n} = constance;\n\nconst { KhmerChess, Piece, boardHelper } = khmerChess;\n\nclass KhmerChessBoard {\n    static name = config.name;\n    static version = config.version;\n    options = {\n        width: 500,\n    };\n    container = null;\n    graveyardManager = new GraveyardManager();\n    boardManager = new BoardManager();\n    soundManager = new SoundManager();\n    khmerChess = new KhmerChess();\n    constructor(options = {}) {\n        if (!options.container) {\n            throw new Error('Container is required!');\n        }\n        this.container = options.container;\n\n        const minWidth = (boardHelper.ROW_NUMBER - 1) * BORDER_WIDTH + boardHelper.ROW_NUMBER * MIN_SQUARE_WIDTH;\n        if (options.width < minWidth) {\n            throw new Error(`Board width must more than ${minWidth}`);\n        }\n        if (options.width) {\n            this.options.width = options.width;\n        }\n        if (options.width) {\n            this.options.width = options.width;\n        }\n\n        this.boardManager.setOptions(this.options);\n        this.graveyardManager.setOptions(this.options);\n\n        addCss.call(this);\n        drawBoard.call(this);\n        this.boardManager.setNote();\n        this.graveyardManager.setNote();\n        this.renderKhmerChess();\n    }\n\n    loadRen(renStr) {\n        this.khmerChess.load(renStr);\n        this.renderKhmerChess();\n    }\n    renderKhmerChess() {\n        for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\n            const square = this.graveyardManager.get(i);\n            square.removePiece();\n        }\n        this.khmerChess.graveyard().forEach((p, i) => {\n            const square = this.graveyardManager.get(i);\n            square.setPiece(new Piece(p.type, p.color));\n        });\n        this.khmerChess.board().forEach((arr, i) => {\n            arr.forEach((p, j) => {\n                const square = this.boardManager.get(i * boardHelper.ROW_NUMBER + j);\n                square.removePiece();\n                if (p) {\n                    square.setPiece(new Piece(p.type, p.color));\n                }\n            });\n        });\n    }\n}\n\nconsole.log(KhmerChess.name, KhmerChess.version);\nconsole.log(KhmerChessBoard.name, KhmerChessBoard.version);\n\nmodule.exports = { KhmerChessBoard, GraveyardManager, ...khmerChess, ...constance };","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst boardHelper = require('khmer-chess/src/board-helper');\nconst { squareWidth } = require('./svg');\n\nclass BoardManager {\n    squares = [];\n    options = {};\n    isUpsideDown = false;\n    setOptions(options) {\n        this.options = options;\n    }\n    put(i, squarePiece) {\n        this.squares[i] = squarePiece;\n    }\n    get(index) {\n        return this.squares[index];\n    }\n    getByIndexCode(code) {\n        const index = boardHelper.indexCodeToPos(code);\n        return this.get(index);\n    }\n    getByXY(x, y) {\n        const index = boardHelper.nerdXyToPos(x, y);\n        return this.get(index);\n    }\n    flip() {\n        this.isUpsideDown = !this.isUpsideDown;\n        const propArr = this.squares.map((s) => {\n            return s.getProperties();\n        });\n        this.squares.forEach((s) => {\n            return s.clear();\n        });\n        this.squares = this.squares.reverse();\n        this.squares.forEach((s, i) => {\n            return s.setProperties(propArr[i]);\n        });\n        this.clearNote();\n        this.setNote();\n    }\n    enableSelect() {\n        this.squares.forEach((s) => {\n            return s.setOnClick(() => {\n                s.isSelected() ? s.unselect() : s.select();\n            });\n        });\n    }\n    clearNote() {\n        this.squares.forEach((s) => {\n            s.clearNote();\n        });\n    }\n    setNote() {\n        const sqWidth = squareWidth(this.options.width);\n        const fSize = 15 * this.options.width / 600;\n\n        for (let i = 0; i < boardHelper.ROW_NUMBER; i++) {\n            const x = i;\n            const y = this.isUpsideDown ? boardHelper.ROW_NUMBER - 1 : 0;\n            const square = this.getByXY(x, y);\n            square.addNote([{\n                x: sqWidth / 2 - sqWidth / 10,\n                y: sqWidth,\n                t: boardHelper.HORIZONTAL_NOTE_LETTERS[x]\n            }]);\n        }\n        for (let j = 0; j < boardHelper.ROW_NUMBER; j++) {\n            const x = this.isUpsideDown ? boardHelper.ROW_NUMBER - 1 : 0;\n            const y = j;\n            const square = this.getByXY(x, y);\n            square.addNote([{\n                x: 0,\n                y: sqWidth / 2 + sqWidth / 10,\n                t: boardHelper.VERTICAL_NOTE_LETTERS[y]\n            }], sqWidth, fSize);\n        }\n        const x = this.isUpsideDown ? boardHelper.ROW_NUMBER - 1 : 0;\n        const y = this.isUpsideDown ? boardHelper.ROW_NUMBER - 1 : 0;\n        const square = this.getByXY(x, y);\n        square.addNote([\n            {\n                x: sqWidth / 2 - sqWidth / 10,\n                y: sqWidth,\n                t: boardHelper.HORIZONTAL_NOTE_LETTERS[x]\n            }, {\n                x: 0,\n                y: sqWidth / 2 + sqWidth / 10,\n                t: boardHelper.VERTICAL_NOTE_LETTERS[y]\n            }\n        ], sqWidth, fSize);\n    }\n}\n\nmodule.exports = { BoardManager };","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst { TD_GRAVEYARD_NUMBER } = require(\"./constance\");\nconst { squareWidth } = require('./svg');\n\nclass GraveyardManager {\n    squares = [];\n    options = {};\n    setOptions(options) {\n        this.options = options;\n    }\n    push(squarePiece) {\n        this.squares.push(squarePiece);\n    }\n    get(index) {\n        return this.squares[index];\n    }\n    setNote() {\n        const sqWidth = squareWidth(this.options.width);\n        const fSize = 15 * this.options.width / 600;\n\n        for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\n            const square = this.get(i);\n            square.addNote([{\n                x: sqWidth / 2 - sqWidth / 10,\n                y: sqWidth,\n                t: i + 1\n            }], sqWidth, fSize);\n        }\n    }\n}\n\nmodule.exports = { GraveyardManager };","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst { AUDIO } = require('./audio');\n\nclass SoundManager {\n    static MOVE_FLAG = 'm';\n    static CAPTURE_FLAG = 'ct';\n    static CHECK_FLAG = 'c';\n    move = null;\n    capture = null;\n    check = null;\n    isEnable = false;\n    disable() {\n        this.isEnable = false;\n        if (this.move) {\n            this.move.parentElement.removeChild(this.move);\n            this.move = null;\n        }\n        if (this.capture) {\n            this.capture.parentElement.removeChild(this.capture);\n            this.capture = null;\n        }\n        if (this.check) {\n            this.check.parentElement.removeChild(this.check);\n            this.check = null;\n        }\n        console.log('Sound is disabled');\n    }\n    enable() {\n        this.isEnable = true;\n        this.move = this._addSound(AUDIO.move);\n        this.capture = this._addSound(AUDIO.capture);\n        this.check = this._addSound(AUDIO.check);\n        console.log('Sound is enabled');\n    }\n    _addSound(src) {\n        const sound = document.createElement('audio');\n        sound.src = src;\n        sound.setAttribute('preload', 'auto');\n        sound.setAttribute('controls', 'none');\n        sound.style.display = 'none';\n        document.body.appendChild(sound);\n        return sound;\n    }\n    play(flag) {\n        if (!this.isEnable) {\n            console.log('Sound is disable');\n            return;\n        }\n        switch (flag) {\n            case SoundManager.MOVE_FLAG:\n                this.move && this.move.play();\n                break;\n            case SoundManager.CAPTURE_FLAG:\n                this.capture && this.capture.play();\n                break;\n            case SoundManager.CHECK_FLAG:\n                this.check && this.check.play();\n                break;\n            default:\n                console.log('Invalid sound flag');\n        }\n    }\n    playMove(){\n        this.play(SoundManager.MOVE_FLAG);\n    }\n    playCapture(){\n        this.play(SoundManager.CAPTURE_FLAG);\n    }\n    playCheck(){\n        this.play(SoundManager.CHECK_FLAG);\n    }\n}\n\nmodule.exports = { SoundManager };","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst { boardHelper } = require('khmer-chess');\nconst { SELECTED_CLASS_NAME, PIECE_CLASS_NAME } = require('./constance');\nconst { addBackgroundNote } = require('./svg');\n\nclass SquarePiece {\n    x = 0;\n    y = 0;\n    get index() {\n        return boardHelper.nerdXyToPos(this.x, this.y);\n    }\n    get indexCode() {\n        return boardHelper.xyToIndexCode(this.x, this.y);\n    }\n    isGraveyard = false;\n    container = document.createElement('td');\n    piece = null;\n    constructor(x, y, container, piece, isGraveyard) {\n        this.x = x;\n        this.y = y;\n        this.container = container;\n        this.setPiece(piece);\n        this.isGraveyard = isGraveyard;\n    }\n    removePiece() {\n        this.setPiece(null);\n    }\n    setPiece(piece) {\n        this.piece = piece;\n        this.drawPiece();\n    }\n    drawPiece() {\n        const classList = this.container.classList;\n        classList.remove(PIECE_CLASS_NAME);\n        if (this.piece) {\n            classList.add(PIECE_CLASS_NAME);\n            classList.add(`type-${this.piece.type}`);\n            classList.add(`color-${this.piece.color}`);\n        }\n    }\n    select() {\n        this.container.classList.add(SELECTED_CLASS_NAME);\n    }\n    unselect() {\n        this.container.classList.remove(SELECTED_CLASS_NAME);\n    }\n    isSelected() {\n        return this.container.classList.contains(SELECTED_CLASS_NAME);\n    }\n    getProperties() {\n        return {\n            className: this.container.className,\n        };\n    }\n    clear() {\n        this.container.className = '';\n    }\n    setProperties(prop) {\n        this.container.className = prop.className;\n    }\n    setOnClick(listener) {\n        this.container.onclick = listener;\n    }\n    removeOnClick() {\n        this.container.onclick = null;\n    }\n    addNote(tObjects, squareWidth, fSize) {\n        addBackgroundNote(this.container, tObjects, squareWidth, fSize);\n    }\n    clearNote() {\n        this.container.style.backgroundImage = '';\n    }\n}\n\nmodule.exports = { SquarePiece };","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst AUDIO = {\n   move: 'data:audio/mpeg;base64,SUQzAwAAAAA8HFRZRVIAAAAGAAAAMjAxOABUREFUAAAABgAAADAyMTEAVElNRQAAAAYAAAAxNjQ0AFBSSVYAABXiAABYTVAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwMzAyLCAyMDE3LzAzLzAyLTE2OjU5OjM4ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpiZXh0PSJodHRwOi8vbnMuYWRvYmUuY29tL2J3Zi9iZXh0LzEuMC8iCiAgICB4bWxuczpjcmVhdG9yQXRvbT0iaHR0cDovL25zLmFkb2JlLmNvbS9jcmVhdG9yQXRvbS8xLjAvIgogICAgeG1sbnM6eG1wRE09Imh0dHA6Ly9ucy5hZG9iZS5jb20veG1wLzEuMC9EeW5hbWljTWVkaWEvIgogICB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIEF1ZGl0aW9uIENDIDIwMTcuMSAoV2luZG93cykiCiAgIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTExLTAyVDE2OjQ0OjE2KzAzOjAwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTExLTAyVDE2OjQ4OjUyKzAzOjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0xMS0wMlQxNjo0ODo1MiswMzowMCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkY2I5MDA5MS1kZTg2LTlmNDQtYjc1Ni1hZGU2ZWU5ZjkwODgiCiAgIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ZGNiOTAwOTEtZGU4Ni05ZjQ0LWI3NTYtYWRlNmVlOWY5MDg4IgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Zjc3OTNjY2YtMzhhMy05NjQ3LWFhZTUtYTBhZjk1YWM4N2JlIgogICBkYzpmb3JtYXQ9ImF1ZGlvL21wZWciCiAgIGJleHQ6b3JpZ2luYXRpb25EYXRlPSIyMDE4LTExLTAyIgogICBiZXh0Om9yaWdpbmF0aW9uVGltZT0iMTY6NDU6MjYiCiAgIGJleHQ6dGltZVJlZmVyZW5jZT0iMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmY3NzkzY2NmLTM4YTMtOTY0Ny1hYWU1LWEwYWY5NWFjODdiZSIKICAgICAgc3RFdnQ6d2hlbj0iMjAxOC0xMS0wMlQxNjo0NDoxNyswMzowMCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgQXVkaXRpb24gQ0MgMjAxNy4xIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iL21ldGFkYXRhIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwZTZjYjE1LTg4ODEtOTg0NS05NzUyLTZkODlhNTI4MzUwMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAxOC0xMS0wMlQxNjo0ODo1MiswMzowMCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgQXVkaXRpb24gQ0MgMjAxNy4xIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iL21ldGFkYXRhIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIKICAgICAgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi94bWwgdG8gYXVkaW8vbXBlZyIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjOGEyN2I3Yi1iMjgyLTQxNDQtOTQ3ZS05MjUzYWMyOTQ4YzgiCiAgICAgIHN0RXZ0OndoZW49IjIwMTgtMTEtMDJUMTY6NDg6NTIrMDM6MDAiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIEF1ZGl0aW9uIENDIDIwMTcuMSAoV2luZG93cykiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIgogICAgICBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3htbCB0byBhdWRpby9tcGVnIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmRjYjkwMDkxLWRlODYtOWY0NC1iNzU2LWFkZTZlZTlmOTA4OCIKICAgICAgc3RFdnQ6d2hlbj0iMjAxOC0xMS0wMlQxNjo0ODo1MiswMzowMCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgQXVkaXRpb24gQ0MgMjAxNy4xIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgIDx4bXBNTTpEZXJpdmVkRnJvbQogICAgc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpjOGEyN2I3Yi1iMjgyLTQxNDQtOTQ3ZS05MjUzYWMyOTQ4YzgiCiAgICBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmM4YTI3YjdiLWIyODItNDE0NC05NDdlLTkyNTNhYzI5NDhjOCIKICAgIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmNzc5M2NjZi0zOGEzLTk2NDctYWFlNS1hMGFmOTVhYzg3YmUiLz4KICAgPGNyZWF0b3JBdG9tOndpbmRvd3NBdG9tCiAgICBjcmVhdG9yQXRvbTpleHRlbnNpb249Ii5zZXN4IgogICAgY3JlYXRvckF0b206aW52b2NhdGlvbkZsYWdzPSItRU8iCiAgICBjcmVhdG9yQXRvbTp1bmNQcm9qZWN0UGF0aD0iQzpcVXNlcnNc0JjQvNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xEb2N1bWVudHNcQWRvYmVcQXVkaXRpb25cMTAuMFx3ZXJoZ0Vcd2VyaGdFLnNlc3giLz4KICAgPGNyZWF0b3JBdG9tOm1hY0F0b20KICAgIGNyZWF0b3JBdG9tOmFwcGxpY2F0aW9uQ29kZT0iMTA5NzA4OTM5NyIKICAgIGNyZWF0b3JBdG9tOmludm9jYXRpb25BcHBsZUV2ZW50PSIxMTY0MjAxODQyIi8+CiAgIDx4bXBETTpUcmFja3M+CiAgICA8cmRmOkJhZz4KICAgICA8cmRmOmxpCiAgICAgIHhtcERNOnRyYWNrTmFtZT0iQ3VlUG9pbnQgTWFya2VycyIKICAgICAgeG1wRE06dHJhY2tUeXBlPSJDdWUiCiAgICAgIHhtcERNOmZyYW1lUmF0ZT0iZjQ4MDAwIi8+CiAgICAgPHJkZjpsaQogICAgICB4bXBETTp0cmFja05hbWU9IkNEIFRyYWNrIE1hcmtlcnMiCiAgICAgIHhtcERNOnRyYWNrVHlwZT0iVHJhY2siCiAgICAgIHhtcERNOmZyYW1lUmF0ZT0iZjQ4MDAwIi8+CiAgICAgPHJkZjpsaQogICAgICB4bXBETTp0cmFja05hbWU9IlN1YmNsaXAgTWFya2VycyIKICAgICAgeG1wRE06dHJhY2tUeXBlPSJJbk91dCIKICAgICAgeG1wRE06ZnJhbWVSYXRlPSJmNDgwMDAiLz4KICAgIDwvcmRmOkJhZz4KICAgPC94bXBETTpUcmFja3M+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5DAAAAScN0hNayAAgcU6is48AIQBZVFqoyotNYxx4zxAgFmrinVsnLRgBgff+fm+b82DQhmkhpDgCQKGmJGnlgdkRpANZXfB7KFiSZrDiWM9SiMRi9UsYYYYYYYd/8P/ffzzz/9YfnSWOZ56w5nSWOZ56ww3GKTmfcKSxukpOb7rDDdJh+f4YYbpLA1QIFDkQHCH5TwwUxA4MYYKOlHBjDBR0o45UGEJFQAVSSU0qpk6pQ4AmBRoPAtIxAYlsc8fR5MQmLDeYXJqbsTM2GgOGplYPmAAVBTRg3VECMl1HZ1iLIywjmVMWKjImNDOU15GqHWyglngarBri2N7/j59843Tfz8Yt/itZKxT06ygSpCQlDgLGBa5EBDpg17PUi2lFyLkK+qq+RkQLQEsQAAAuYAACkp1ySXW2yNuJGgIIGipqiqoKLFWGbCgmNrDOIxkBQnWWkWyLTAgZqaaAoKpIr6RWac+MHhYIGK8kbLmmIKzWMgUxnAgs06nf2w4S7or+Oq1rHn/9Wl5//lvH/5/445Zd/eqamtbxx1WyQITsH/+5DANgAQMK9HvYwAMAAAJcAAAASj0Gng0DIay3I6fwZd/8qHfOwaPcGg/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5DAuwAgYAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUQUcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyMDE4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==',\n   capture: 'data:audio/mpeg;base64,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',\n   check: 'data:audio/mpeg;base64,//uQBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOTlyAaoAAAAAAAAAABSAJAXwRgAAgAAABoZSdbEzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQBAAP8n1tPQADT0BLzWewAEnaSg2zAgANPQlCteBAAbOh/936//7n1+oWiOBgYtC/hfXd3gim8J3dz67i2QOLgt8uImieiFwDd///0Qun//PVEGKMemPBNGwgQQQIEAoJJYRvYIyeShORk6TIXFazCmf7UJ8hNX/1O+p5CEIQ8jBxdaEU6EIp2QjTnO5wMDF885gAQ3Q53+dlP/yE/zRz/ue7V75+c7RvhOdEAIBuSBOQoVaFDawBAxEjNiNf+XPb+L+shZJ1a87MhZWGSQg1VsXfIwyWLBbqwrrIXAuPkCTfZM5/TKmZL1qv2mihO5WxJzE2YSIFYEe28qKKJAUOoCwKYZaAgXDK5AoI21P/PL/+KfruaFsUplDZSBOhhgaxiDiCw4tL8BENsf1nFMDc84RnN5YRJ//7T058V7QT3QZsON9GTGJRHXOWSPXTGVFpsT0QoSpvF5VogEB0P0r6f/7279kdxbndHBIfKZpzkfYzlVUIZjyPeMc5XuehmSZka/oxa56yvOdzjK4KR1lj8iv6ewiQsJ6IFEOm2Si4//uSBCAP8jttQQACT0BbTagQBGz2CZGu/AANPQk2tp/AAaegBA4Q1FAVah/+f////////9+yM53/5nPyhGrG5cOhd54Pt2MzUKniDU8OxnBhZhBBg4pI/b8aPP6f/SJ5kz33grsLLbFXHmD6uF2aLPP2CkojPCWOtkMd4QpKpGPySdioVGrv//G/jf/DWKpQ7GbjM3ttqQYCdYusAjoUSfGoCsDBQFYxrq3VX9v/z5/s3SjGNSuNSjGrVQs5stjEhMkQqFSGKSKaQqOkt+0I0GisB//f///jHGOt8NSO0mb7hlLZmoCJCgJQ9qWzHw7CY1jec151SVV+HV////8c8cVRTQ0inHE0RMiInkKGMEMEUiIEiZr4IgBHwqSpComQxgAEfkZ//+X//MjMj1//////z+RkR+RklOG40hWTTSTq6uk01J5uSisiVWVWIRoZB4HhGw9lpVZccAALf/////////1CwqyKinFRb9QsKs9YqKiwkf+KpkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7kgRAj/HFbC4QAU9CHiAGogACb4AAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo='\n};\n\nmodule.exports = { AUDIO };\n","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst BORDER_WIDTH = 1\nconst MIN_SQUARE_WIDTH = 5\nconst TD_GRAVEYARD_NUMBER = 30;\nconst TABLE_CLASS = 'khmer-chess-board';\nconst SELECTED_CLASS_NAME = 'selected';\nconst PIECE_CLASS_NAME = 'piece';\n\nmodule.exports = {\n    BORDER_WIDTH,\n    MIN_SQUARE_WIDTH,\n    TD_GRAVEYARD_NUMBER,\n    TABLE_CLASS,\n    SELECTED_CLASS_NAME,\n    PIECE_CLASS_NAME,\n};","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst { boardHelper } = require('khmer-chess');\nconst { SquarePiece } = require('./SquarePiece');\nconst { PIECES_SVG, squareWidth } = require('./svg');\nconst {\n    BORDER_WIDTH,\n    TD_GRAVEYARD_NUMBER,\n    TABLE_CLASS,\n    SELECTED_CLASS_NAME,\n    PIECE_CLASS_NAME\n} = require('./constance');\n\nfunction addCss() {\n    const width = this.options.width;\n    const sqWidth = squareWidth(width);\n    const pieceFontSize = width / 12;\n    const highlightPseudo = 'after';\n    const piecePseudo = 'before';\n\n    let css = `\n        table.${TABLE_CLASS}  {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            width: ${width}px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: white;\n        }\n        table.${TABLE_CLASS} td table {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: white;\n        }\n        table.${TABLE_CLASS} tr {\n            width: ${width}px;\n            height: ${sqWidth}px;\n        }\n        table.${TABLE_CLASS} td {\n            user-select: none;\n            background-color: #f4d1a6;\n            border: 1px solid white;\n            padding: 0px;\n            margin: 0px;\n            max-width: ${sqWidth}px;\n            max-height: ${sqWidth}px;\n            background-repeat: no-repeat;\n            cursor: pointer;\n        }\n        table.${TABLE_CLASS} td, table.${TABLE_CLASS} td::${highlightPseudo},\n        table.${TABLE_CLASS} td::${piecePseudo} {\n            font-size: ${pieceFontSize}px;\n        }\n        table.${TABLE_CLASS} td::${highlightPseudo} {\n            opacity: 0.4;\n        }\n        table.${TABLE_CLASS} td::${piecePseudo} {\n            float: left;\n        }\n        table.${TABLE_CLASS} td:not(.graveyard)::${highlightPseudo},\n        table.${TABLE_CLASS} td:not(.graveyard)::${piecePseudo} {\n            width: ${sqWidth}px;\n            height: ${sqWidth}px;\n            background-size: ${sqWidth}px ${sqWidth}px;\n            display: block;\n            content: ' ';\n        }\n        table.${TABLE_CLASS} td.${SELECTED_CLASS_NAME}::${highlightPseudo} {\n            background: radial-gradient(#f4d1a6, #e66465) !important;\n        }\n    `;\n    boardHelper.getColorArray().forEach((color) => {\n        boardHelper.getPieceCharArray().forEach((type) => {\n            css += `\n              table.${TABLE_CLASS} td.${PIECE_CLASS_NAME}.type-${type}.color-${color}::${piecePseudo} {\n                  background-image: url('data:image/svg+xml;utf8,${encodeURIComponent(PIECES_SVG[color + type])}');\n              }\n                `;\n        });\n    });\n\n    const head = document.head || document.getElementsByTagName('head')[0];\n    const style = document.createElement('style');\n    head.appendChild(style);\n\n    style.type = 'text/css';\n    if (style.styleSheet) {\n        // This is required for IE8 and below.\n        style.styleSheet.cssText = css;\n    } else {\n        style.appendChild(document.createTextNode(css));\n    }\n}\n\nfunction drawBoard() {\n    const sqWidth = squareWidth(this.options.width);\n\n    const createTable = (parent = this.container) => {\n        const table = document.createElement('table');\n        table.classList.add(TABLE_CLASS);\n        parent.appendChild(table);\n        return table;\n    }\n    const createTbody = (parent) => {\n        const tbody = document.createElement('tbody');\n        parent.appendChild(tbody);\n        return tbody;\n    }\n    const createTr = (parent) => {\n        const tr = document.createElement('tr');\n        parent.appendChild(tr);\n        return tr;\n    }\n    const createTd = (parent) => {\n        const td = document.createElement('td');\n        parent.appendChild(td);\n        return td;\n    }\n\n    const table = createTable();\n    const tbody = createTbody(table);\n\n    for (let i = 0; i < boardHelper.ROW_NUMBER; i++) {\n        const tr = createTr(tbody);\n        for (let j = 0; j < boardHelper.ROW_NUMBER; j++) {\n            const td = createTd(tr);\n            const squarePiece = new SquarePiece(j, boardHelper.ROW_NUMBER - i - 1, td, null);\n            const index = boardHelper.nerdXyToPos(j, boardHelper.ROW_NUMBER - i - 1);\n            this.boardManager.put(index, squarePiece);\n        }\n    }\n\n    const graveyardContainerHeight = sqWidth + 10 * BORDER_WIDTH;\n    table.style.height = this.options.width + graveyardContainerHeight;\n    const trGraveyardContainer = createTr(tbody);\n    trGraveyardContainer.style.height = graveyardContainerHeight;\n    const tdGraveyardContainer = createTd(trGraveyardContainer);\n    tdGraveyardContainer.classList.add('graveyard');\n    tdGraveyardContainer.addEventListener('mousewheel', function (e) {\n        this.scrollLeft -= (e.wheelDelta);\n        e.preventDefault();\n    }, false);\n    tdGraveyardContainer.style.width = this.options.width;\n    tdGraveyardContainer.style.height = graveyardContainerHeight;\n    tdGraveyardContainer.style.overflowX = 'scroll';\n    tdGraveyardContainer.style.overflowY = 'hidden';\n    tdGraveyardContainer.colSpan = 8;\n    tdGraveyardContainer.style.padding = 8 * BORDER_WIDTH * this.options.width / 600;\n    tdGraveyardContainer.style.boxShadow = `inset 0 0 ${this.options.width / 60}px #000000`;\n    const tableGraveyard = createTable(tdGraveyardContainer);\n    const graveyardWidth = BORDER_WIDTH * (TD_GRAVEYARD_NUMBER - 1) + sqWidth * TD_GRAVEYARD_NUMBER;\n    tableGraveyard.style.width = graveyardWidth;\n    tableGraveyard.style.height = sqWidth;\n    const tbodyGraveyard = createTbody(tableGraveyard);\n    const trGraveyard = createTr(tbodyGraveyard);\n    trGraveyard.style.width = graveyardWidth;\n\n    for (let i = 0; i < TD_GRAVEYARD_NUMBER; i++) {\n        const tdGraveyard = createTd(trGraveyard);\n        const squarePiece = new SquarePiece(i, 0, tdGraveyard, null, true);\n        this.graveyardManager.push(squarePiece);\n    }\n}\n\nmodule.exports = {\n    addCss,\n    drawBoard,\n};","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n'use strict';\n\nconst { boardHelper } = require('khmer-chess');\nconst { isNumber } = require('khmer-chess/src/jsis');\nconst { BORDER_WIDTH } = require('./constance');\n\nconst WOOD_COLORS = {\n   WHITE: '#ffffff',\n   BLACK: '#422007',\n}\n\nconst filterId = 'drop-shadow';\nconst SVG_FILTER = `<defs>\n<filter id=\"${filterId}\" height=\"130%\">\n  <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/> \n  <feOffset dx=\"5\" dy=\"5\" result=\"offsetblur\"/> \n  <feMerge> \n    <feMergeNode/>\n    <feMergeNode in=\"SourceGraphic\"/> \n  </feMerge>\n</filter>\n</defs>`;\nconst PIECES_SVG = {\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_TOUK}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_SES}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_KOL}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_SDECH}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_NEANG}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_TREY}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_WHITE}${boardHelper.PIECE_TYPE_BORK}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.WHITE}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_TOUK}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_SES}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_KOL}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_SDECH}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_NEANG}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_TREY}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n   [`${boardHelper.PIECE_COLOR_BLACK}${boardHelper.PIECE_TYPE_BORK}`]: `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n    ${SVG_FILTER}\n    <path fill=\"${WOOD_COLORS.BLACK}\" filter=\"url(#${filterId})\" \n d=\"M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z\" />\n </svg>\n `,\n};\n\nfunction addBackgroundNote(target, tObjects = [], squareWidth, fSize) {\n   let bgImg = `url(\"data:image/svg+xml;utf8,`;\n   bgImg += `<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='${squareWidth}px' width='${squareWidth}px'>`;\n\n   tObjects.forEach((obj) => {\n      bgImg += `<text x='${obj.x}' y='${obj.y}' `;\n      bgImg += `fill='white' font-size='${fSize}'>${obj.t}</text>`;\n   })\n\n   bgImg += `</svg>\")`;\n   target.style.backgroundImage = bgImg;\n}\n\nfunction squareWidth(width) {\n   if (isNaN(Number(width))) {\n      throw new Error('Invalid width');\n   }\n   const sqWidth = (width - (boardHelper.ROW_NUMBER - 1) * BORDER_WIDTH) / boardHelper.ROW_NUMBER;\n   return sqWidth;\n}\n\nmodule.exports = {\n   PIECES_SVG,\n   addBackgroundNote,\n   squareWidth,\n};","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst { KhmerChess } = require('./src/KhmerChess');\nconst boardHelper = require('./src/board-helper');\nconst REN = require('./src/REN');\nconst renHelper = require('./src/ren-helper');\nconst KPGN = require('./src/KPGN');\n\nmodule.exports = {\n  KhmerChess,\n  boardHelper,\n  ...REN,\n  renHelper,\n  KPGN,\n};","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst { REN } = require(\"./REN\");\n\nclass Player {\n    name = '';\n    id = '';\n    constructor(id = '', name = '') {\n        this.id = id;\n        this.name = name;\n    }\n    toJson() {\n        return {\n            id: this.id,\n            name: this.name\n        };\n    }\n}\nclass Result {\n    win = 0;\n    draw = 0;\n    lost = 0;\n    constructor(win = 0, draw = 0, lost = 0) {\n        this.win = win;\n        this.draw = draw;\n        this.lost = lost;\n    }\n    toJson() {\n        return {\n            win: this.win,\n            draw: this.draw,\n            lost: this.lost\n        };\n    }\n}\nclass Move {\n    from = '';\n    to = '';\n    jump = false;\n    capture = ''\n    constructor(from = '', to = '', jump = false, capture = '') {\n        this.from = from;\n        this.to = to;\n        this.jump = jump;\n        this.capture = capture;\n    }\n    toJson() {\n        return {\n            from: this.from,\n            to: this.to,\n            jump: this.jump,\n            capture: this.capture\n        };\n    }\n}\nclass Timer {\n    totalSecond = 0;\n    currentWhite = 0;\n    currentBlack = 0;\n    constructor(totalSecond = 0, currentWhite = 0, currentBlack = 0) {\n        this.totalSecond = totalSecond;\n        this.currentWhite = currentWhite;\n        this.currentBlack = currentBlack;\n    }\n    toJson() {\n        return {\n            totalSecond: this.totalSecond,\n            currentWhite: this.currentWhite,\n            currentBlack: this.currentBlack\n        };\n    }\n}\n\nclass KPGN {\n    event = '';\n    date = '';\n    location = '';\n    players = {\n        white: new Player(),\n        black: new Player(),\n    }\n    result = {\n        last: {\n            whiteWin: false,\n            blackWin: false\n        },\n        white: new Result()\n    };\n    moves = [new Move()];\n    ren = new REN();\n    timer = new Timer();\n    constructor(kpgnJson) {\n    }\n    toJson() {\n        return {\n            event: this.event,\n            date: this.date,\n            location: this.location,\n            players: {\n                white: this.players.white.toJson(),\n                black: this.players.black.toJson(),\n            },\n            result: {\n                last: {\n                    whiteWin: this.result.last.whiteWin,\n                    blackWin: this.result.last.blackWin\n                },\n                white: this.result.white.toJson()\n            },\n            moves: this.moves.map((m) => m.toJson()),\n            ren: this.ren.toString(),\n            timer: this.timer.toJson()\n        }\n    }\n}\n\nmodule.exports = {\n    KPGN,\n    Player,\n    Result,\n    Move,\n    Timer\n};\n","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst { KPGN } = require(\"./KPGN\");\nconst MoveHelper = require(\"./move-helper\");\nconst renHelper = require(\"./ren-helper\");\nconst config = require('../package.json');\n\nclass KhmerChess {\n  static name = config.name;\n  static version = config.version;\n  moveHelper = new MoveHelper();\n  renInstance = renHelper.toRen();\n  kpgnInstance = new KPGN();\n  constructor(renStr) {\n    this.renInstance = renHelper.toRen(renStr);\n  }\n  load(renStr) {\n    this.renInstance = renHelper.toRen(renStr);\n  }\n  reset() {\n    this.renInstance = renHelper.toRen();\n  }\n  /**\n   * Generate all available moves of current turn\n   */\n  moves() {\n    // TODO:\n    return [];\n  }\n  /**\n   * Is King is attacked (អុក), return under attack color\n   * \n   * return color|null\n   */\n  in_check() {\n    // TODO:\n    return null;\n  }\n  /**\n   * Is win, return lost color\n   * \n   * return color|null\n   */\n  in_checkmate() {\n    // TODO:\n    return null;\n  }\n  /**\n   * Is stuck (អាប់), return stuck color\n   * \n   * return color|null\n   */\n  in_stalemate() {\n    // TODO:\n    return null;\n  }\n  /**\n   * Is draw (ស្មើ)\n   * \n   * return boolean\n   */\n  in_draw() {\n    // TODO:\n    return false;\n  }\n  /**\n   * Is draw by counting over (ស្មើ​ដោយ​ការ​រាប់), return counter color\n   * \n   * return color|null\n   */\n  in_draw_count() {\n    // TODO:\n    return null;\n  }\n  /**\n   * Is game over, win|stuck|win-timeout|draw-count-over|win-resign\n   */\n  game_over() {\n    // TODO:\n    return false;\n  }\n  validate_ren(renStr) {\n    try {\n      renHelper.toRen(renStr);\n      return { valid: true, error_number: 0, error: 'No errors.' };\n    } catch (error) {\n      return { valid: false, error_number: 1, error: error.message };\n    }\n  }\n  ren() {\n    return this.renInstance.toString();\n  }\n  board() {\n    return this.renInstance.board.toMultiArray();\n  }\n  graveyard() {\n    return this.renInstance.graveyard.pieces;\n  }\n  // Khmer Portable Game Notation <file-name>.kpgn.json\n  kpgn() {\n    return this.kpgnInstance.toJson();\n  }\n  load_kpgn(kpgnJosn, options) {\n    this.kpgnInstance = new KPGN(kpgnJosn);\n  }\n  ascii() {\n    const arr = this.renInstance.board.toMultiArray();\n    let str = `  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓`;\n    const result = arr.reduce((s, subArr, i) => {\n      const rs = subArr.map((p) => ` ${p ? p.toString() : ' '} `).join('┃');\n      const bottom = i == arr.length - 1 ? '┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛' : '┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫';\n      s += `\n${8 - i} ┃${rs}┃\n  ${bottom}`;\n      return s;\n    }, str);\n    const gyTStr = this.renInstance.graveyard.pieces.map(() => '━━━').join('┳');\n    const gyStr = this.renInstance.graveyard.pieces.map((p) => ` ${p ? p.toString() : ' '} `).join('┃');\n    const gyBStr = this.renInstance.graveyard.pieces.map(() => '━━━').join('┻');\n    const graveyardStr = `  ┏${gyTStr}┓\n  ┃${gyStr}┃\n  ┗${gyBStr}┛`;\n    return `${result}\n    a   b   c   d   e   f   g   h\n${graveyardStr}`\n  }\n  turn() {\n    this.renInstance.turn;\n  }\n  /**\n   * Move piece regarding provided Move object\n   *\n   * @param Move move\n   */\n  move(move) {\n    // TODO:\n  }\n  /**\n   * Undo last move\n   * \n   * return {Piece, Move}|null\n   */\n  undo() {\n    // TODO:\n    return false;\n  }\n  /**\n   * Move all pieces to graveyard except kings\n   * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\n   */\n  clear() {\n    this.renInstance = renHelper.toRen('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\n  }\n  /**\n   * Move piece to square id location\n   *\n   * @param Piece piece\n   * @param String squareId\n   *\n   * return Piece|null\n   */\n  put(piece, squareId) {\n    // TODO: move piece to square id location\n    return null;\n  }\n  /**\n   * Get piece at square id location\n   *\n   * @param String squareId 'a1'\n   *\n   * return Piece|null\n   */\n  get(squareId) {\n    // TODO: get piece at square id location\n    return null;\n  }\n  /**\n   * Move piece to graveyard\n   *\n   * @param String squareId 'a1'\n   *\n   * return Piece|null\n   */\n  remove(squareId) {\n    // TODO: move piece to graveyard\n    return null;\n  }\n  history() {\n    return this.kpgnInstance.moves;\n  }\n  addUpdateRenderEventListener(listener) {\n    // TODO:\n  }\n  removeUpdateRenderEventListener(listener) {\n    // TODO:\n  }\n}\n\nmodule.exports = {\n  KhmerChess,\n};","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\nconst { PIECE_TYPE_BORK } = require(\"./board-helper\");\n/**\n * Raksa-Eng Notation\n * fen: <pieces on board> <turn w|b> <king&queen moved ----|SNsn> <king attack --|Kk> <countdown -.-|-.4> <pieces in graveyard>\n * e.g: bhgqkghb/8/ffffffff/8/8/FFFFFFFF/8/BHGKQGHB\n */\n\nconst boardHelper = require(\"./board-helper\");\nconst jsis = require(\"./jsis\");\n\n// bhgqkghb/8/ffffffff/8/8/FFFFFFFF/8/BHGKQGHB w ---- -- -.-\nconst DEFAULT_BOARD_STR = 'bhgqkghb/8/ffffffff/8/8/FFFFFFFF/8/BHGKQGHB';\nconst NOT_SET = '-';\nconst STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\n\nclass Piece {\n    type = boardHelper.PIECE_TYPE_TREY;\n    color = boardHelper.PIECE_COLOR_WHITE;\n    get pCode() {\n        if (this.color == boardHelper.PIECE_COLOR_WHITE) {\n            return boardHelper.toWhitePiece(this.type);\n        }\n        return this.type;\n    }\n    constructor(t, c) {\n        if (jsis.isUndefined(c)) {\n            if (jsis.isUndefined(t)) {\n                t = boardHelper.toWhitePiece(boardHelper.PIECE_TYPE_TREY);\n            }\n            if (jsis.isUpperCase(t)) {\n                c = boardHelper.PIECE_COLOR_WHITE;\n            } else {\n                c = boardHelper.PIECE_COLOR_BLACK;\n            }\n            t = t.toLowerCase();\n        }\n        this.type = t;\n        this.color = c;\n    }\n    toOrigin() {\n        if (this.type == PIECE_TYPE_BORK) {\n            return new Piece(this.color, boardHelper.PIECE_TYPE_TREY);\n        }\n        return this;\n    }\n    toString() {\n        let c = this.type;\n        if (boardHelper.isWhite(this.color)) {\n            c = boardHelper.toWhitePiece(c);\n        }\n        return c;\n    }\n}\nclass Pos {\n    h = 'a';\n    v = 1;\n    x = 0;\n    y = 0;\n    p = new Piece();\n    constructor(p, h, v) {\n        this.p = p\n        if (jsis.isUndefined(v)) {\n            v = h.v;\n            h = h.h;\n        }\n        this.h = h;\n        this.v = v;\n        this.x = boardHelper.HORIZONTAL_CODE_LETTERS.indexOf(this.h);\n        this.y = this.v - 1;\n    }\n    toString() {\n        return `${this.toPString()}${this.h}${this.v}`;\n    }\n    toPString() {\n        return jsis.isNull(this.p) ? boardHelper.EMPTY_PIECE : this.p.toString();\n    }\n}\n/**\n * bhgqkghb/8/ffffffff/8/8/FFFFFFFF/8/BHGKQGHB => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\n */\nclass Board {\n    poses = Array.from({\n        length: boardHelper.getSubBoardNumber(),\n    }, (_, i) => {\n        const codeP = boardHelper.numToCodeP(i);\n        return new Pos(null, codeP);\n    });\n    constructor(boardStr) {\n        if (jsis.isUndefined(boardStr)) {\n            boardStr = DEFAULT_BOARD_STR;\n        }\n        const newBoardStr = this.extract(boardStr).replace(/\\//g, '');\n        if (newBoardStr.length < boardHelper.getSubBoardNumber() ||\n            !boardHelper.isValidPiecesString(newBoardStr)) {\n            throw new Error(`Invalid board string ${boardStr}`);\n        }\n        this.poses = newBoardStr.split('').map((c, i) => {\n            const codeP = boardHelper.numToCodeP(i);\n            return new Pos(c == boardHelper.EMPTY_PIECE ? null : new Piece(c), codeP);\n        });\n    }\n    toMultiArray() {\n        const arr = [[], [], [], [], [], [], [], []];\n        this.poses.forEach((pos) => {\n            arr[pos.y][pos.x] = pos.p;\n        });\n        return arr;\n    }\n    compress(str) {\n        const reg = new RegExp(`(\\\\${boardHelper.EMPTY_PIECE}+)`, 'g');\n        return str.replace(reg, ($1) => $1.length);\n    }\n    extract(str) {\n        return str.replace(/(\\d+)/g, ($1) => {\n            // $1 == 3 => '...', bh6 => 'bh......'\n            return Array.from({\n                length: $1\n            }, () => boardHelper.EMPTY_PIECE).join('');\n        });\n    }\n    toStringFull() {\n        const str = this.poses.map((pos, i) => {\n            const p = pos.toPString();\n            if (i && i % 8 == 0 && i != boardHelper.getSubBoardNumber()) {\n                return `${boardHelper.BOARD_SEPARATOR}${p}`;\n            }\n            return p;\n        }).join('');\n        return str;\n    }\n    toString() {\n        let str = this.toStringFull();\n        str = this.compress(str);\n        return str;\n    }\n}\nclass KqMoved {\n    whiteKing = false;\n    whiteQueen = false;\n    blackKing = false;\n    blackQueen = false;\n    constructor(kqMovedStr = '') {\n        const bh = boardHelper;\n        this.whiteKing = !!~kqMovedStr.indexOf(bh.toWhitePiece(bh.PIECE_TYPE_SDECH));\n        this.whiteQueen = !!~kqMovedStr.indexOf(bh.toWhitePiece(bh.PIECE_TYPE_NEANG));\n        this.blackKing = !!~kqMovedStr.indexOf(bh.PIECE_TYPE_SDECH);\n        this.blackQueen = !!~kqMovedStr.indexOf(bh.PIECE_TYPE_NEANG);\n    }\n    toString() {\n        let str = `${this.whiteKing ? boardHelper.toWhitePiece(boardHelper.PIECE_TYPE_SDECH) : NOT_SET}`;\n        str += `${this.whiteQueen ? boardHelper.toWhitePiece(boardHelper.PIECE_TYPE_NEANG) : NOT_SET}`;\n        str += `${this.blackKing ? boardHelper.PIECE_TYPE_SDECH : NOT_SET}`;\n        str += `${this.blackQueen ? boardHelper.PIECE_TYPE_NEANG : NOT_SET}`;\n        return str;\n    }\n}\nclass KAttacked {\n    whiteKing = false;\n    blackKing = false;\n    constructor(kAttackedStr = '') {\n        const bh = boardHelper;\n        this.whiteKing = !!~kAttackedStr.indexOf(bh.toWhitePiece(bh.PIECE_TYPE_SDECH));\n        this.blackKing = !!~kAttackedStr.indexOf(bh.PIECE_TYPE_SDECH);\n    }\n    toString() {\n        let str = `${this.whiteKing ? boardHelper.toWhitePiece(boardHelper.PIECE_TYPE_SDECH) : NOT_SET}`;\n        str += `${this.blackKing ? boardHelper.PIECE_TYPE_SDECH : NOT_SET}`;\n        return str;\n    }\n}\n// 23.-\nclass CountDown {\n    white = null;\n    black = null;\n    constructor(countdownStr = '') {\n        const newCountdownStr = countdownStr.split('.');\n        this.white = jsis.isStringNumber(newCountdownStr[0]) ? Number(newCountdownStr[0]) : null;\n        this.black = jsis.isStringNumber(newCountdownStr[1]) ? Number(newCountdownStr[1]) : null;\n        if (!jsis.isNull(this.white) && !jsis.isNull(this.white)) {\n            throw new Error(`Invalid countdown string ${countdownStr}`);\n        }\n    }\n    toString() {\n        let str = `${jsis.isNull(this.white) ? NOT_SET : this.white}`;\n        str += `.${jsis.isNull(this.black) ? NOT_SET : this.black}`;\n        return str;\n    }\n}\nclass Graveyard {\n    pieces = [];\n    constructor(graveyardStr = '') {\n        if (graveyardStr.length > 30 ||\n            !boardHelper.isValidPiecesString(graveyardStr, true)) {\n            throw new Error(`Invalid graveyard string ${graveyardStr}`);\n        }\n        this.pieces = graveyardStr.split('').map((c, i) => {\n            const p = new Piece(c);\n            if (p.type == boardHelper.PIECE_TYPE_SDECH) {\n                throw new Error(`King cannot die graveyard:${graveyardStr}`);\n            }\n            return p;\n        });\n    }\n    toString() {\n        return this.pieces.map((p) => {\n            return p.toString();\n        }).join('');\n    }\n}\nclass REN {\n    board = new Board();\n    turn = boardHelper.PIECE_COLOR_WHITE;\n    kqMoved = new KqMoved();\n    kAttacked = new KAttacked();\n    countdown = new CountDown();\n    graveyard = new Graveyard();\n    constructor(boardStr, turnStr = boardHelper.PIECE_COLOR_WHITE,\n        kqMovedStr, kAttackedStr, countdownStr, graveyardStr) {\n        this.board = new Board(boardStr);\n        this.turn = turnStr;\n        this.kqMoved = new KqMoved(kqMovedStr);\n        this.kqMoved = new KAttacked(kAttackedStr);\n        this.countdown = new CountDown(countdownStr);\n        this.graveyard = new Graveyard(graveyardStr);\n        const invalidPiecesString = this.isInvalidPieceCount();\n        if (invalidPiecesString) {\n            throw new Error(`Invalid piece string board:${boardStr}, graveyard:${graveyardStr}, count:${invalidPiecesString}`);\n        }\n    }\n    isInvalidPieceCount() {\n        const pieces = this.board.poses.map((pos) => {\n            return pos.p;\n        }).filter((p) => {\n            return !jsis.isNull(p);\n        }).concat(this.graveyard.pieces).map((p) => {\n            return p.toOrigin();\n        });\n        const piecesCount = pieces.reduce((obj, p) => {\n            obj[p.toString()] = obj[p.toString()] || 0;\n            obj[p.toString()]++;\n            return obj;\n        }, {});\n        const str = Object.keys(piecesCount).map((k) => `${k}${piecesCount[k]}`).sort().join('');\n        if (str == STRING_COUNT) {\n            return false;\n        }\n        return str;\n    }\n    toString() {\n        let str = this.board.toString();\n        str += ` ${this.turn.toString()}`;\n        str += ` ${this.kqMoved.toString()}`;\n        str += ` ${this.kAttacked.toString()}`;\n        str += ` ${this.countdown.toString()}`;\n        str += ` ${this.graveyard.toString()}`;\n        return str;\n    }\n}\n\nmodule.exports = {\n    Piece,\n    Pos,\n    Board,\n    KqMoved,\n    CountDown,\n    Graveyard,\n    REN,\n    DEFAULT_BOARD_STR\n};","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst jsis = require(\"./jsis\");\nconst genMask = require(\"./gen-mask\");\n\nclass Rectangle {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    isContainsPoint(point) {\n        const { x, y } = point;\n        const isContainsPoint = this.x <= x &&\n            (this.x + this.width) >= x &&\n            this.y <= y &&\n            (this.y + this.height) >= y;\n        return isContainsPoint;\n    }\n}\nlet allPiecesString = null;\nconst boardHelper = {\n    HORIZONTAL_CODE_LETTERS: \"abcdefgh\",\n    HORIZONTAL_NOTE_LETTERS: \"abcdefgh\",\n    VERTICAL_NOTE_LETTERS: \"12345678\",\n\n    PIECE_COLOR_WHITE: \"w\",\n    PIECE_COLOR_BLACK: \"b\",\n\n    PIECE_TYPE_TOUK: \"b\", // Boat\n    PIECE_TYPE_SES: \"h\", // Horse\n    PIECE_TYPE_KOL: \"g\", // General\n    PIECE_TYPE_SDECH: \"k\", // King\n    PIECE_TYPE_NEANG: \"q\", // Queen\n    PIECE_TYPE_TREY: \"f\", // Fish\n    PIECE_TYPE_BORK: \"t\", // Transform fish\n    EMPTY_PIECE: \".\",\n    BOARD_SEPARATOR: \"/\",\n\n    ROW_NUMBER: 8,\n    ROW_FIRST_INDEX: 0,\n    ROW_LAST_INDEX: 7,\n\n    mask: null,\n\n    getPieceCharArray() {\n        return [\n            this.PIECE_TYPE_TOUK,\n            this.PIECE_TYPE_SES,\n            this.PIECE_TYPE_KOL,\n            this.PIECE_TYPE_SDECH,\n            this.PIECE_TYPE_NEANG,\n            this.PIECE_TYPE_TREY,\n            this.PIECE_TYPE_BORK,\n        ];\n    },\n    getColorArray() {\n        return [\n            this.PIECE_COLOR_WHITE,\n            this.PIECE_COLOR_BLACK,\n        ];\n    },\n    isValidPiecesString(str, onlyPiece) {\n        if (jsis.isNull(allPiecesString)) {\n            allPiecesString = [\n                ...this.getPieceCharArray(),\n                ...this.getPieceCharArray().map((c) => this.toWhitePiece(c)),\n                this.EMPTY_PIECE,\n                this.BOARD_SEPARATOR,\n            ]\n        }\n        const ruler = onlyPiece ? allPiecesString.filter((c) => {\n            return !~[this.EMPTY_PIECE, this.BOARD_SEPARATOR].indexOf(c);\n        }) : allPiecesString;\n        return !str.split('').some((c) => {\n            return !~ruler.indexOf(c);\n        });\n    },\n\n    toWhitePiece: (str) => str.toUpperCase(),\n\n    isValidPosXY(point, y) {\n        if (jsis.isUndefined(point)) {\n            return false;\n        }\n        if (!jsis.isUndefined(y)) {\n            point = this.p(point, y);\n        }\n        return !jsis.isUndefined(point.x) && !jsis.isUndefined(point.y) &&\n            this.rect(0, 0, this.ROW_LAST_INDEX, this.ROW_LAST_INDEX).isContainsPoint(point);\n    },\n    isValidPiece: (piece) => piece != boardHelper.EMPTY_PIECE,\n    isWhite: (c) => c === boardHelper.PIECE_COLOR_WHITE,\n    isBlack: (c) => c === boardHelper.PIECE_COLOR_BLACK,\n    codeP: (h, v) => ({ h, v }),\n    p: (x, y) => ({ x, y }),\n    res: (width, height) => ({ width, height }),\n    rect: (x, y, width, height) => new Rectangle(x, y, width, height),\n    getSubBoardNumber: () => boardHelper.ROW_NUMBER * boardHelper.ROW_NUMBER,\n    nerdPosToXY(p) {\n        if (jsis.isNumber(p.x) && jsis.isNumber(p.y)) {\n            return p;\n        }\n        if (jsis.isNumber(p)) {\n            const x = p % this.ROW_NUMBER;\n            const y = Math.floor(p / this.ROW_NUMBER);\n            return this.p(x, y);\n        }\n        return null;\n    },\n    nerdXyToPos(x, y) {\n        if (!jsis.isUndefined(y)) {\n            return x + y * this.ROW_NUMBER;\n        }\n        return x.x + x.y * this.ROW_NUMBER;\n    },\n    indexCodeToPos(code) {\n        const x = this.HORIZONTAL_CODE_LETTERS.indexOf(code[0]);\n        const y = Number(code[1]) - 1;\n        return this.nerdXyToPos(x, y);\n    },\n    pointToIndexCode(p) {\n        return `${this.HORIZONTAL_CODE_LETTERS[p.x]}${this.ROW_NUMBER + p.y}`\n    },\n    xyToIndexCode(x, y) {\n        return this.pointToIndexCode(this.p(x, y));\n    },\n    posToIndexCode(p) {\n        if (jsis.isNumber(p.x) && jsis.isNumber(p.y)) {\n            return this.pointToIndexCode(p);\n        }\n        if (jsis.isNumber(p)) {\n            const x = p % this.ROW_NUMBER;\n            const y = Math.floor(p / this.ROW_NUMBER);\n            return this.xyToIndexCode(x, y);\n        }\n        return null;\n    },\n    isPosInBoard(posInBoard) {\n        return jsis.isNumber(posInBoard) &&\n            posInBoard >= 0 && posInBoard <= this.getSubBoardNumber() - 1;\n    },\n    getCharPieceFromString(piecesString, posInBoard) {\n        if (this.isPosInBoard(posInBoard) && piecesString.length === this.getSubBoardNumber()) {\n            return piecesString.charAt(posInBoard);\n        }\n        return this.EMPTY_PIECE;\n    },\n    getPieceProperties(code) {\n        const h = this.pieceHash[code];\n        return {\n            color: h ? h[0] : this.PIECE_COLOR_EMPTY,\n            type: h ? h[1] : this.EMPTY_PIECE,\n        };\n    },\n    getCharPieceInPos(posInBoard, piecesString) {\n        return this.getCharPieceFromString(piecesString, posInBoard);\n    },\n    getPieceInPos(posInBoard, y, piecesString) {\n        if (jsis.isNumber(y)) {\n            posInBoard = this.nerdXyToPos(posInBoard, y);\n        } else if (jsis.isString(y)) {\n            piecesString = y;\n        }\n        const piece = this.getCharPieceInPos(posInBoard, piecesString);\n        let color = this.PIECE_COLOR_WHITE, type = this.PIECE_TYPE_TREY;\n        if (this.isValidPiece(piece)) {\n            const pr = this.getPieceProperties(piece);\n            color = pr.color;\n            type = pr.type;\n        }\n        return {\n            isValidPiece: this.isValidPiece(piece),\n            color: color,\n            type: type,\n        };\n    },\n    convertMask(p, pos, color) {\n        const sign = this.isWhite(color) ? 1 : -1;\n        pos = this.nerdPosToXY(pos);\n        p.x = p.x * sign + pos.x;\n        p.y = p.y * sign + pos.y;\n        return this.isValidPosXY(p) ? this.nerdXyToPos(p) : null;\n    },\n    getPieceCanMovePoses(type, pos, color) {\n        const poses = [];\n        this.mask = this.mask || genMask(this);\n        this.mask[type].forEach((_pos) => {\n            const p = this.convertMask(this.p(_pos[0], _pos[1]), pos, color);\n            if (!jsis.isNull(p)) {\n                poses.push(p);\n            }\n        });\n        return poses;\n    },\n    getPieceCanMovePosesValid(type, pos, color, piecesString) {\n        const _poses = this.getPieceCanMovePoses(type, pos, color);\n        let p, distPiece;\n        const poses = [];\n        const n = _poses.length, thisPos = this.nerdPosToXY(pos);\n        for (let i = 0; i < n; i++) {\n            p = this.nerdPosToXY(_poses[i]);\n            distPiece = this.getPieceInPos(p.x, p.y, piecesString);\n            if (distPiece.isValidPiece) {\n                if (color === distPiece.color ||\n                    type === this.PIECE_TYPE_TREY && p.x === thisPos.x) {\n                    p = null;\n                }\n            } else {\n                if (type === this.PIECE_TYPE_TREY && p.x != thisPos.x) {\n                    p = null;\n                }\n            }\n            if (!jsis.isNull(p) && type === this.PIECE_TYPE_TOUK) {\n                const _x = thisPos.x,\n                    _y = thisPos.y;\n                let _n, _s;\n                if (p.x === thisPos.x) {\n                    _n = Math.abs(p.y - thisPos.y);\n                    _s = thisPos.y < p.y ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceInPos(_x, _y + _s * _n, piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                } else if (p.y === thisPos.y) {\n                    _n = Math.abs(p.x - thisPos.x);\n                    _s = thisPos.x < p.x ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceInPos(_x + _s * _n, _y, piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (!jsis.isNull(p)) {\n                poses.push(_poses[i]);\n            }\n        }\n        return poses;\n    },\n    replacePiecesString(piecesString, c, p) {\n        return piecesString.substring(0, p) + c + piecesString.substring(p + 1);\n    },\n    injectPiece(piecesString, pos1, pos2) {\n        const c = piecesString.charAt(pos1);\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\n            return null;\n        }\n        piecesString = this.replacePiecesString(piecesString, this.EMPTY_PIECE, pos1);\n        piecesString = this.replacePiecesString(piecesString, c, pos2);\n        return piecesString;\n    },\n    getPieceCode(color, type) {\n        const val = color + type;\n        for (const k in this.pieceHash) {\n            if (val === this.pieceHash[k]) {\n                return k;\n            }\n        }\n        return this.EMPTY_PIECE;\n    },\n    getKingWillInDanger(color, piecesString) {\n        const kingPos = piecesString.indexOf(this.getPieceCode(color, this.PIECE_TYPE_SDECH));\n        const n = piecesString.length;\n        let _poses, p, j;\n        for (let i = 0; i < n; i++) {\n            p = this.getPieceInPos(i, piecesString);\n            if (p.isValidPiece && p.color != color && p.type === this.PIECE_TYPE_TOUK) {\n                _poses = this.getPieceCanMovePoses(p.type, i, p.color, piecesString);\n                for (j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [this.numToCode(i), this.numToCode(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    },\n    getKingInDanger(color, piecesString) {\n        const kingPos = piecesString.indexOf(this.getPieceCode(color, this.PIECE_TYPE_SDECH));\n        const n = piecesString.length;\n        let _poses, p, j;\n        for (let i = 0; i < n; i++) {\n            p = this.getPieceInPos(i, piecesString);\n            if (p.isValidPiece && p.color != color) {\n                _poses = this.getPieceCanMovePosesValid(p.type, i, p.color, piecesString);\n                for (j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [this.numToCode(i), this.numToCode(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    },\n    numToCodeP(number) {\n        return this.codeP(this.HORIZONTAL_CODE_LETTERS[number % 8], ((number / 8 | 0) + 1));\n    },\n    numToCode(number) {\n        const codeP = this.numToCodeP(number);\n        return `${codeP.h}${codeP.v}`;\n    },\n    generatePosesCanMove(type, pos, color, piecesString, isHaveMoved) {\n        let p;\n        const _poses = this.getPieceCanMovePosesValid(type, pos, color, piecesString);\n        const isHaveCaptured = this.isHaveCaptured(piecesString);\n        if (type === this.PIECE_TYPE_SDECH) {\n            if (!isHaveCaptured && !isHaveMoved) {\n                p = this.convertMask(this.p(2, 1), pos, color);\n                if (p && !this.getPieceInPos(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n                p = this.convertMask(this.p(-2, 1), pos, color);\n                if (p && !this.getPieceInPos(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        } else if (type === this.PIECE_TYPE_NEANG) {\n            if (!isHaveCaptured && !isHaveMoved) {\n                p = this.convertMask(this.p(-0, 2), pos, color);\n                if (p && !this.getPieceInPos(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        const n = _poses.length;\n        const poses = [];\n        let str;\n        for (let i = 0; i < n; i++) {\n            str = this.injectPiece(piecesString, pos, _poses[i]);\n            if (jsis.isNull(this.getKingInDanger(color, str))) {\n                poses.push(this.numToCode(_poses[i]));\n            }\n        }\n        return poses;\n    },\n    isCharPiecesInBoard(c, piecesString) {\n        return !!~piecesString.indexOf(c);\n    },\n    getPiecesInBoard(piecesString) {\n        return piecesString.split(\"\").filter((c) => {\n            return this.isValidPiece(c);\n        });\n    },\n    isHaveCaptured(piecesString) {\n        return this.getPiecesInBoard(piecesString).length < this.ROW_NUMBER * 4;\n    },\n    filterPieceInBoard(piecesString) {\n        const whitePieces = [];\n        const blackPieces = [];\n        let c, prop, piece;\n        for (let i = 0; i < piecesString.length; i++) {\n            c = piecesString.charAt(i);\n            if (this.isValidPiece(c)) {\n                prop = this.getPieceProperties(c);\n                piece = {\n                    color: prop.color,\n                    type: prop.type,\n                    index: i,\n                    code: this.numToCode(i),\n                };\n                if (this.isWhite(piece.color)) {\n                    whitePieces.push(piece);\n                } else {\n                    blackPieces.push(piece);\n                }\n            }\n        }\n        return {\n            whitePieces: whitePieces,\n            blackPieces: blackPieces,\n        };\n    },\n    extractPiecesToArray(piecesString) {\n        piecesString = piecesString.split(\"\");\n        const pieceAll = {\n            [this.PIECE_COLOR_BLACK]: [],\n            [this.PIECE_COLOR_WHITE]: [],\n        };\n        piecesString.forEach((e) => {\n            if (e === this.EMPTY_PIECE) {\n                return;\n            }\n            const prop = this.getPieceProperties(e);\n            pieceAll[prop.color].push(prop.type);\n        });\n        return pieceAll;\n    },\n    isStateCount(c, piecesString) {\n        const allPieces = this.extractPiecesToArray(piecesString);\n        return allPieces[c].length === 1;\n    },\n    checkCountable(color, piecesString) {\n        const pieceAll = this.extractPiecesToArray(piecesString);\n        const weaker = pieceAll[color];\n        const stronger = pieceAll[this.oppositeColor(color)];\n        return weaker.length <= 2 && stronger.length >= 2;\n    },\n    checkCount(color, piecesString, force) {\n        const countChar = (str, c) => {\n            return str.join(\"\").split(c).length - 1;\n        };\n        const charExist = (str, c) => {\n            return !!~str.indexOf(c);\n        };\n\n        const pieceAll = this.extractPiecesToArray(piecesString);\n        const weaker = pieceAll[color];\n        const stronger = pieceAll[this.oppositeColor(color)];\n        if (weaker.length === 1 && stronger.length > 1) {\n            if (!charExist(stronger, this.PIECE_TYPE_TREY)) {\n                let count = 64;\n                const toukCount = countChar(stronger, this.PIECE_TYPE_TOUK);\n                if (toukCount) {\n                    count = toukCount > 1 ? 8 : 16;\n                } else if (countChar(stronger, this.PIECE_TYPE_KOL) > 1) {\n                    count = 22;\n                } else if (countChar(stronger, this.PIECE_TYPE_SES) > 1) {\n                    count = 32;\n                } else if (countChar(stronger, this.PIECE_TYPE_KOL)) {\n                    count = 44;\n                }\n                return [stronger.length + 1, count];\n            }\n            return [0, 64];\n        } else if (force && this.checkCountable(color, piecesString)) {\n            return [0, 64];\n        }\n        return null;\n    },\n\n    getHashKey(val) {\n        const keys = Object.keys(this.pieceHash).filter((key) => {\n            return this.pieceHash[key] === val;\n        });\n        return keys.length === 1 ? keys[0] : this.EMPTY_PIECE;\n    },\n    getPieceKeyByProp(prop) {\n        let prop1;\n        for (const key in this.pieceHash) {\n            prop1 = this.getPieceProperties(key);\n            if (prop.color === prop1.color && prop.type === prop1.type) {\n                return key;\n            }\n        }\n        return this.EMPTY_PIECE;\n    },\n    getPieceKeyByName(name) {\n        return this.getPieceKeyByProp({\n            color: name[0],\n            type: name[1],\n        });\n    },\n    oppositeColor(color) {\n        return this.isWhite(color) ? this.PIECE_COLOR_BLACK : this.PIECE_COLOR_WHITE;\n    },\n};\nboardHelper.pieceHash = {\n    \"a\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_TOUK,\n    \"b\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_SES,\n    \"c\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_KOL,\n    \"d\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_SDECH,\n    \"e\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_NEANG,\n    \"f\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_TREY,\n    \"g\": boardHelper.PIECE_COLOR_WHITE + boardHelper.PIECE_TYPE_BORK,\n    \"h\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_TOUK,\n    \"i\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_SES,\n    \"j\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_KOL,\n    \"k\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_SDECH,\n    \"l\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_NEANG,\n    \"m\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_TREY,\n    \"n\": boardHelper.PIECE_COLOR_BLACK + boardHelper.PIECE_TYPE_BORK,\n};\n\nmodule.exports = boardHelper;","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst boardHelper = require(\"./board-helper\");\n\nfunction genMask() {\n    const mask = {};\n    mask[boardHelper.PIECE_TYPE_TOUK] = [\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\n    ];\n    mask[boardHelper.PIECE_TYPE_SES] = [\n        [-1, -2],\n        [1, -2],\n        [-2, -1],\n        [2, -1],\n        [-1, 2],\n        [1, 2],\n        [-2, 1],\n        [2, 1],\n    ];\n    mask[boardHelper.PIECE_TYPE_NEANG] = [\n        [-1, -1],\n        [1, -1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[boardHelper.PIECE_TYPE_KOL] = mask[boardHelper.PIECE_TYPE_NEANG].concat([\n        [0, 1],\n    ]);\n    mask[boardHelper.PIECE_TYPE_SDECH] = mask[boardHelper.PIECE_TYPE_KOL].concat([\n        [0, -1],\n        [1, 0],\n        [-1, 0],\n    ]);\n    mask[boardHelper.PIECE_TYPE_TREY] = [\n        [0, 1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[boardHelper.PIECE_TYPE_BORK] = mask[boardHelper.PIECE_TYPE_NEANG];\n    return mask;\n}\n\nmodule.exports = genMask;","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst jsis = {\n    isValid(v) {\n        return !this.isNull(v) && !this.isUndefined(v);\n    },\n    isNull(v) {\n        return v === null;\n    },\n    isUndefined(v) {\n        return typeof v === \"undefined\";\n    },\n    isString(str) {\n        return this.isValid(str) && typeof str === \"string\";\n    },\n    isNotEmpty(str) {\n        return this.isValidString(str) && str != \"\";\n    },\n    isNumber(n) {\n        return this.isValid(n) && typeof n === \"number\";\n    },\n    isStringNumber(n) {\n        return this.isString(n) && n != \"\" && !isNaN(Number(n));\n    },\n    isArray(arr) {\n        return this.isValid(arr) && arr instanceof Array;\n    },\n    isFunction(f) {\n        return this.isValid(f) && typeof f === \"function\";\n    },\n    isObject(o) {\n        return this.isValid(o) && o instanceof Object;\n    },\n    isBoolean(b) {\n        return this.isValid(b) && typeof b === \"boolean\";\n    },\n    isTrue(b) {\n        return this.isValidBoolean(b) && b;\n    },\n    isFalse(b) {\n        return this.isValidBoolean(b) && !b;\n    },\n    isPoint(p) {\n        const isPoint = this.isValid(p) &&\n            this.isValidObject(p) &&\n            this.isValidNumber(p.x) &&\n            this.isValidNumber(p.y);\n        return isPoint;\n    },\n    isSize(size) {\n        const isSize = this.isValid(size) &&\n            this.isValidObject(size) &&\n            this.isValidNumber(size.width) &&\n            this.isValidNumber(size.height);\n        return isSize;\n    },\n    isOdd(n) {\n        return !!(n % 2);\n    },\n    isEven(n) {\n        return !this.isOdd(n);\n    },\n    isUpperCase(str) {\n        return str === str.toUpperCase();\n    }\n};\n\nmodule.exports = jsis;","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst boardHelper = require(\"./board-helper\");\n\nclass MoveHelper {\n    init(option) {\n        this.piecesString = option.piecesString;\n        this.currentTurn = option.currentTurn;\n        this.isNeangMoved = option.isNeangMoved;\n        this.isSdechMoved = option.isSdechMoved;\n\n        this.genCanMove = option.genCanMove;\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\n\n        this.whiteMoves = [];\n        this.blackMoves = [];\n\n        this.whiteKingInDanger = null;\n        this.whiteKingWillInDanger = null;\n        this.blackKingInDanger = null;\n        this.blackKingWillInDanger = null;\n\n        this.winColor = null;\n        this.stuckColor = null;\n    }\n\n    generateCanMoves() {\n        const filter = boardHelper.filterPieceInBoard(this.piecesString);\n        this.whiteMoves = filter.whitePieces;\n        this.blackMoves = filter.blackPieces;\n        const genMoves = (pieces) => {\n            for (let i = 0; i < pieces.length; i++) {\n                const type = pieces[i].type;\n                const isSdech = type === boardHelper.PIECE_TYPE_SDECH;\n                const isNeang = type === boardHelper.PIECE_TYPE_NEANG;\n                let isHaveMoved = this.isSdechMoved;\n                if (!isSdech) {\n                    isHaveMoved = isNeang ? this.isNeangMoved : false;\n                }\n                const canMoveIndexes = boardHelper.generatePosesCanMove(\n                    type,\n                    pieces[i].index,\n                    pieces[i].color,\n                    this.piecesString,\n                    isHaveMoved,\n                );\n                pieces[i].canMoveIndexes = canMoveIndexes;\n            }\n        };\n        genMoves(this.whiteMoves);\n        genMoves(this.blackMoves);\n    }\n\n    cleanPieceNoMove() {\n        const cleanMoves = (pieces) => {\n            let isTrue = true;\n            while (isTrue) {\n                isTrue = false;\n                for (let i = 0; i < pieces.length; i++) {\n                    const piece = pieces[i];\n                    if (!piece.canMoveIndexes || !piece.canMoveIndexes.length) {\n                        pieces.splice(i, 1);\n                        isTrue = true;\n                        break;\n                    }\n                }\n            }\n        };\n        cleanMoves(this.whiteMoves);\n        cleanMoves(this.blackMoves);\n    }\n\n    checkIfKingInDanger() {\n        this.whiteKingInDanger = boardHelper.getKingInDanger(\n            boardHelper.PIECE_COLOR_WHITE,\n            this.piecesString,\n        );\n        this.whiteKingWillInDanger = boardHelper.getKingWillInDanger(\n            boardHelper.PIECE_COLOR_WHITE,\n            this.piecesString,\n        );\n        this.blackKingInDanger = boardHelper.getKingInDanger(\n            boardHelper.PIECE_COLOR_BLACK,\n            this.piecesString,\n        );\n        this.blackKingWillInDanger = boardHelper.getKingWillInDanger(\n            boardHelper.PIECE_COLOR_BLACK,\n            this.piecesString,\n        );\n    }\n\n    genWinLost() {\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\n            this.winColor = boardHelper.PIECE_COLOR_BLACK;\n        } else if (this.blackKingInDanger && !this.blackMoves.length) {\n            this.winColor = boardHelper.PIECE_COLOR_WHITE;\n        }\n    }\n\n    getStuck() {\n        if (this.winColor) {\n            return;\n        }\n        if (boardHelper.isWhite(this.currentTurn) && !this.whiteMoves.length) {\n            this.stuckColor = boardHelper.PIECE_COLOR_WHITE;\n        } else if (boardHelper.isBlack(this.currentTurn) && !this.blackMoves.length) {\n            this.stuckColor = boardHelper.PIECE_COLOR_BLACK;\n        }\n    }\n\n    calcCanMove(option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        let moves = [];\n        if (this.genCanMove) {\n            moves = boardHelper.isWhite(this.currentTurn) ? this.whiteMoves : this.blackMoves;\n        }\n        let anotherMoves = [];\n        if (this.genCanMoveForAnother) {\n            anotherMoves = boardHelper.isBlack(this.currentTurn) ? this.whiteMoves : this.blackMoves;\n        }\n        return {\n            moves,\n            anotherMoves,\n        };\n    }\n    calcState(option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n\n        this.checkIfKingInDanger();\n        this.genWinLost();\n        this.getStuck();\n        return {\n            blackKingInDanger: this.blackKingInDanger,\n            whiteKingInDanger: this.whiteKingInDanger,\n            blackKingWillInDanger: this.blackKingWillInDanger,\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\n            winColor: this.winColor,\n            stuckColor: this.stuckColor,\n            blackCountable: boardHelper.checkCountable(\n                boardHelper.PIECE_COLOR_BLACK,\n                this.piecesString,\n            ),\n            whiteCountable: boardHelper.checkCountable(\n                boardHelper.PIECE_COLOR_WHITE,\n                this.piecesString,\n            ),\n        };\n    }\n    calCount(option) {\n        return {\n            countingBlack: boardHelper.checkCount(\n                boardHelper.PIECE_COLOR_BLACK,\n                option.piecesString, option.force,\n            ),\n            countingWhite: boardHelper.checkCount(\n                boardHelper.PIECE_COLOR_WHITE,\n                option.piecesString, option.force,\n            ),\n        };\n    }\n}\n\nmodule.exports = MoveHelper;","/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n\"use strict\";\n\nconst { REN, DEFAULT_BOARD_STR } = require('./REN');\nconst jsis = require('./jsis');\n\nconst renHelper = {\n    toRen(fen) {\n        if (jsis.isUndefined(fen)) {\n            fen = DEFAULT_BOARD_STR;\n        }\n        const fenArr = fen.split(' ');\n        return new REN(fenArr[0], fenArr[1], fenArr[2], fenArr[3], fenArr[4], fenArr[5]);\n    }\n};\n\nmodule.exports = renHelper;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(497);\n"],"sourceRoot":""}