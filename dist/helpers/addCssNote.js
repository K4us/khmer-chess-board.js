"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = addCssNote;

var _khmerChess = require("khmer-chess");

var _appendCss = _interopRequireDefault(require("./appendCss"));

var _svg = require("../providers/svg");

var _constance = require("../providers/constance");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/*
 * Copyright (c) 2021, K4us
 * Author: Raksa Eng <eng.raksa@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 *---------------------------------------------------------------------------- */
function addCssNote(_ref) {
  var uniqueClassName = _ref.uniqueClassName,
      options = _ref.options,
      isEnglish = _ref.isEnglish;
  var verticalLetters = isEnglish ? _khmerChess.VERTICAL_NOTE_LETTERS_ENGLISH : _khmerChess.VERTICAL_NOTE_LETTERS;
  var horizontalLetters = isEnglish ? _khmerChess.HORIZONTAL_NOTE_LETTERS_ENGLISH : _khmerChess.HORIZONTAL_NOTE_LETTERS;
  var width = options.width,
      cellWidth = options.cellWidth;
  var selector = "".concat(_constance.CSS_TABLE_SELECTOR, ".").concat(uniqueClassName);
  var css = '';
  var fSize = 15 * width / 600;

  for (var i = 0; i < _constance.TD_GRAVEYARD_NUMBER; i++) {
    var _bgImg = (0, _svg.genBackgroundNote)([{
      x: cellWidth / 2 - cellWidth / 10,
      y: cellWidth,
      t: verticalLetters[i]
    }], cellWidth, fSize);

    css += "\n        ".concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".").concat(_constance.GRAVEYARD_NOTE_PREFIX_CLASS, "-").concat(i + 1).concat(_constance.CSS_PSEUDO_NOTE, " {\n            background-image: ").concat(_bgImg, ";\n        }\n        ");
  }

  var hx = cellWidth / 2 - cellWidth / 10;
  var vy = cellWidth / 2 + cellWidth / 10;

  var bgImg = function bgImg(i) {
    return (0, _svg.genBackgroundNote)([{
      x: hx,
      y: cellWidth,
      t: horizontalLetters[i]
    }], cellWidth, fSize);
  };

  for (var _i = 0; _i < _khmerChess.ROW_NUMBER; _i++) {
    css += "\n        ".concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".").concat(_constance.BOARD_NOTE_H_PREFIX_CLASS, "-").concat(_i + 1).concat(_constance.CSS_PSEUDO_NOTE, " {\n            background-image: ").concat(bgImg(_i), ";\n        }\n        ").concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".").concat(_constance.FLIPPED_CLASS, ".").concat(_constance.BOARD_NOTE_H_PREFIX_CLASS, "-").concat(_i + 1).concat(_constance.CSS_PSEUDO_NOTE, " {\n            background-image: ").concat(bgImg(_khmerChess.ROW_NUMBER - _i - 1), ";\n        }\n        ");
  }

  bgImg = function bgImg(i) {
    return (0, _svg.genBackgroundNote)([{
      x: 0,
      y: vy,
      t: verticalLetters[i]
    }], cellWidth, fSize);
  };

  for (var j = 0; j < _khmerChess.ROW_NUMBER; j++) {
    css += "\n            ".concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".").concat(_constance.BOARD_NOTE_V_PREFIX_CLASS, "-").concat(j + 1).concat(_constance.CSS_PSEUDO_NOTE, " {\n                background-image: ").concat(bgImg(j), ";\n            }\n            ").concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".flipped.").concat(_constance.BOARD_NOTE_V_PREFIX_CLASS, "-").concat(j + 1).concat(_constance.CSS_PSEUDO_NOTE, " {\n                background-image: ").concat(bgImg(_khmerChess.ROW_NUMBER - j - 1), ";\n            }\n            ");
  }

  bgImg = function bgImg(i) {
    return (0, _svg.genBackgroundNote)([{
      x: hx,
      y: cellWidth,
      t: horizontalLetters[i]
    }, {
      x: 0,
      y: vy,
      t: verticalLetters[i]
    }], cellWidth, fSize);
  };

  css += "\n    ".concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".").concat(_constance.BOARD_NOTE_V_PREFIX_CLASS, "-1.").concat(_constance.BOARD_NOTE_H_PREFIX_CLASS, "-1").concat(_constance.CSS_PSEUDO_NOTE, " {\n        background-image: ").concat(bgImg(0), ";\n    }\n    ").concat(selector, " td").concat(isEnglish ? '.' + options.enClass : '', ".").concat(_constance.FLIPPED_CLASS, ".").concat(_constance.BOARD_NOTE_V_PREFIX_CLASS, "-1.").concat(_constance.BOARD_NOTE_H_PREFIX_CLASS, "-1").concat(_constance.CSS_PSEUDO_NOTE, " {\n        background-image: ").concat(bgImg(7), ";\n    }\n    ");
  (0, _appendCss["default"])(uniqueClassName, css);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2FkZENzc05vdGUudHMiXSwibmFtZXMiOlsiYWRkQ3NzTm90ZSIsInVuaXF1ZUNsYXNzTmFtZSIsIm9wdGlvbnMiLCJpc0VuZ2xpc2giLCJ2ZXJ0aWNhbExldHRlcnMiLCJWRVJUSUNBTF9OT1RFX0xFVFRFUlNfRU5HTElTSCIsIlZFUlRJQ0FMX05PVEVfTEVUVEVSUyIsImhvcml6b250YWxMZXR0ZXJzIiwiSE9SSVpPTlRBTF9OT1RFX0xFVFRFUlNfRU5HTElTSCIsIkhPUklaT05UQUxfTk9URV9MRVRURVJTIiwid2lkdGgiLCJjZWxsV2lkdGgiLCJzZWxlY3RvciIsIkNTU19UQUJMRV9TRUxFQ1RPUiIsImNzcyIsImZTaXplIiwiaSIsIlREX0dSQVZFWUFSRF9OVU1CRVIiLCJiZ0ltZyIsIngiLCJ5IiwidCIsImVuQ2xhc3MiLCJHUkFWRVlBUkRfTk9URV9QUkVGSVhfQ0xBU1MiLCJDU1NfUFNFVURPX05PVEUiLCJoeCIsInZ5IiwiUk9XX05VTUJFUiIsIkJPQVJEX05PVEVfSF9QUkVGSVhfQ0xBU1MiLCJGTElQUEVEX0NMQVNTIiwiaiIsIkJPQVJEX05PVEVfVl9QUkVGSVhfQ0xBU1MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUE2QkE7O0FBT0E7O0FBQ0E7O0FBQ0E7Ozs7QUF0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBc0JlLFNBQVNBLFVBQVQsT0FDZ0U7QUFBQSxNQUQxQ0MsZUFDMEMsUUFEMUNBLGVBQzBDO0FBQUEsTUFEekJDLE9BQ3lCLFFBRHpCQSxPQUN5QjtBQUFBLE1BRGhCQyxTQUNnQixRQURoQkEsU0FDZ0I7QUFDM0UsTUFBTUMsZUFBZSxHQUFHRCxTQUFTLEdBQUdFLHlDQUFILEdBQW1DQyxpQ0FBcEU7QUFD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Q0FLcUJOLEtBQUssQ0FBQyxDQUFELENBTDFCLG1CQUFIO0FBU0EsNkJBQVVqQixlQUFWLEVBQTJCYSxHQUEzQjtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAyMSwgSzR1c1xuICogQXV0aG9yOiBSYWtzYSBFbmcgPGVuZy5yYWtzYUBnbWFpbC5jb20+XG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKlxuICogMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAqICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICpcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG4gKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG4gKiBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRVxuICogQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4gKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SXG4gKiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRlxuICogU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4gKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTlxuICogQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbiAqIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4gKiBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmltcG9ydCBPcHRpb25zTWFuYWdlciBmcm9tICcuLi9PcHRpb25zTWFuYWdlcic7XG5cbmltcG9ydCB7XG4gICAgSE9SSVpPTlRBTF9OT1RFX0xFVFRFUlMsXG4gICAgSE9SSVpPTlRBTF9OT1RFX0xFVFRFUlNfRU5HTElTSCxcbiAgICBST1dfTlVNQkVSLFxuICAgIFZFUlRJQ0FMX05PVEVfTEVUVEVSUyxcbiAgICBWRVJUSUNBTF9OT1RFX0xFVFRFUlNfRU5HTElTSCxcbn0gZnJvbSAna2htZXItY2hlc3MnO1xuaW1wb3J0IGFwcGVuZENzcyBmcm9tICcuL2FwcGVuZENzcyc7XG5pbXBvcnQgeyBnZW5CYWNrZ3JvdW5kTm90ZSB9IGZyb20gJy4uL3Byb3ZpZGVycy9zdmcnO1xuaW1wb3J0IHtcbiAgICBURF9HUkFWRVlBUkRfTlVNQkVSLFxuICAgIENTU19UQUJMRV9TRUxFQ1RPUixcbiAgICBHUkFWRVlBUkRfTk9URV9QUkVGSVhfQ0xBU1MsXG4gICAgQk9BUkRfTk9URV9WX1BSRUZJWF9DTEFTUyxcbiAgICBCT0FSRF9OT1RFX0hfUFJFRklYX0NMQVNTLFxuICAgIEZMSVBQRURfQ0xBU1MsXG4gICAgQ1NTX1BTRVVET19OT1RFLFxufSBmcm9tICcuLi9wcm92aWRlcnMvY29uc3RhbmNlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkQ3NzTm90ZSh7IHVuaXF1ZUNsYXNzTmFtZSwgb3B0aW9ucywgaXNFbmdsaXNoIH06XG4gICAgeyB1bmlxdWVDbGFzc05hbWU6IHN0cmluZywgb3B0aW9uczogT3B0aW9uc01hbmFnZXIsIGlzRW5nbGlzaD86IGJvb2xlYW4gfSkge1xuICAgIGNvbnN0IHZlcnRpY2FsTGV0dGVycyA9IGlzRW5nbGlzaCA/IFZFUlRJQ0FMX05PVEVfTEVUVEVSU19FTkdMSVNIIDogVkVSVElDQUxfTk9URV9MRVRURVJTO1xuICAgIGNvbnN0IGhvcml6b250YWxMZXR0ZXJzID0gaXNFbmdsaXNoID8gSE9SSVpPTlRBTF9OT1RFX0xFVFRFUlNfRU5HTElTSCA6IEhPUklaT05UQUxfTk9URV9MRVRURVJTO1xuICAgIGNvbnN0IHsgd2lkdGgsIGNlbGxXaWR0aCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBzZWxlY3RvciA9IGAke0NTU19UQUJMRV9TRUxFQ1RPUn0uJHt1bmlxdWVDbGFzc05hbWV9YDtcbiAgICBsZXQgY3NzID0gJyc7XG4gICAgY29uc3QgZlNpemUgPSAxNSAqIHdpZHRoIC8gNjAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVERfR1JBVkVZQVJEX05VTUJFUjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGJnSW1nID0gZ2VuQmFja2dyb3VuZE5vdGUoW3tcbiAgICAgICAgICAgIHg6IGNlbGxXaWR0aCAvIDIgLSBjZWxsV2lkdGggLyAxMCxcbiAgICAgICAgICAgIHk6IGNlbGxXaWR0aCxcbiAgICAgICAgICAgIHQ6IHZlcnRpY2FsTGV0dGVyc1tpXSxcbiAgICAgICAgfV0sIGNlbGxXaWR0aCwgZlNpemUpO1xuICAgICAgICBjc3MgKz0gYFxuICAgICAgICAke3NlbGVjdG9yfSB0ZCR7aXNFbmdsaXNoID8gJy4nICsgb3B0aW9ucy5lbkNsYXNzIDogJyd9LiR7R1JBVkVZQVJEX05PVEVfUFJFRklYX0NMQVNTfS0ke2kgKyAxfSR7Q1NTX1BTRVVET19OT1RFfSB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiAke2JnSW1nfTtcbiAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IGh4ID0gY2VsbFdpZHRoIC8gMiAtIGNlbGxXaWR0aCAvIDEwO1xuICAgIGNvbnN0IHZ5ID0gY2VsbFdpZHRoIC8gMiArIGNlbGxXaWR0aCAvIDEwO1xuICAgIGxldCBiZ0ltZyA9IChpOiBudW1iZXIpID0+IGdlbkJhY2tncm91bmROb3RlKFt7XG4gICAgICAgIHg6IGh4LFxuICAgICAgICB5OiBjZWxsV2lkdGgsXG4gICAgICAgIHQ6IGhvcml6b250YWxMZXR0ZXJzW2ldLFxuICAgIH1dLCBjZWxsV2lkdGgsIGZTaXplKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFJPV19OVU1CRVI7IGkrKykge1xuICAgICAgICBjc3MgKz0gYFxuICAgICAgICAke3NlbGVjdG9yfSB0ZCR7aXNFbmdsaXNoID8gJy4nICsgb3B0aW9ucy5lbkNsYXNzIDogJyd9LiR7Qk9BUkRfTk9URV9IX1BSRUZJWF9DTEFTU30tJHtpICsgMX0ke0NTU19QU0VVRE9fTk9URX0ge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogJHtiZ0ltZyhpKX07XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gdGQke2lzRW5nbGlzaCA/ICcuJyArIG9wdGlvbnMuZW5DbGFzcyA6ICcnfS4ke0ZMSVBQRURfQ0xBU1N9LiR7Qk9BUkRfTk9URV9IX1BSRUZJWF9DTEFTU30tJHtpICsgMX0ke0NTU19QU0VVRE9fTk9URX0ge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogJHtiZ0ltZyhST1dfTlVNQkVSIC0gaSAtIDEpfTtcbiAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cbiAgICBiZ0ltZyA9IChpKSA9PiBnZW5CYWNrZ3JvdW5kTm90ZShbe1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiB2eSxcbiAgICAgICAgdDogdmVydGljYWxMZXR0ZXJzW2ldLFxuICAgIH1dLCBjZWxsV2lkdGgsIGZTaXplKTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IFJPV19OVU1CRVI7IGorKykge1xuICAgICAgICBjc3MgKz0gYFxuICAgICAgICAgICAgJHtzZWxlY3Rvcn0gdGQke2lzRW5nbGlzaCA/ICcuJyArIG9wdGlvbnMuZW5DbGFzcyA6ICcnfS4ke0JPQVJEX05PVEVfVl9QUkVGSVhfQ0xBU1N9LSR7aiArIDF9JHtDU1NfUFNFVURPX05PVEV9IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiAke2JnSW1nKGopfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR7c2VsZWN0b3J9IHRkJHtpc0VuZ2xpc2ggPyAnLicgKyBvcHRpb25zLmVuQ2xhc3MgOiAnJ30uZmxpcHBlZC4ke0JPQVJEX05PVEVfVl9QUkVGSVhfQ0xBU1N9LSR7aiArIDF9JHtDU1NfUFNFVURPX05PVEV9IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiAke2JnSW1nKFJPV19OVU1CRVIgLSBqIC0gMSl9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICB9XG5cbiAgICBiZ0ltZyA9IChpKSA9PiBnZW5CYWNrZ3JvdW5kTm90ZShbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHg6IGh4LFxuICAgICAgICAgICAgeTogY2VsbFdpZHRoLFxuICAgICAgICAgICAgdDogaG9yaXpvbnRhbExldHRlcnNbaV0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiB2eSxcbiAgICAgICAgICAgIHQ6IHZlcnRpY2FsTGV0dGVyc1tpXSxcbiAgICAgICAgfSxcbiAgICBdLCBjZWxsV2lkdGgsIGZTaXplKTtcbiAgICBjc3MgKz0gYFxuICAgICR7c2VsZWN0b3J9IHRkJHtpc0VuZ2xpc2ggPyAnLicgKyBvcHRpb25zLmVuQ2xhc3MgOiAnJ30uJHtCT0FSRF9OT1RFX1ZfUFJFRklYX0NMQVNTfS0xLiR7Qk9BUkRfTk9URV9IX1BSRUZJWF9DTEFTU30tMSR7Q1NTX1BTRVVET19OT1RFfSB7XG4gICAgICAgIGJhY2tncm91bmQtaW1hZ2U6ICR7YmdJbWcoMCl9O1xuICAgIH1cbiAgICAke3NlbGVjdG9yfSB0ZCR7aXNFbmdsaXNoID8gJy4nICsgb3B0aW9ucy5lbkNsYXNzIDogJyd9LiR7RkxJUFBFRF9DTEFTU30uJHtCT0FSRF9OT1RFX1ZfUFJFRklYX0NMQVNTfS0xLiR7Qk9BUkRfTk9URV9IX1BSRUZJWF9DTEFTU30tMSR7Q1NTX1BTRVVET19OT1RFfSB7XG4gICAgICAgIGJhY2tncm91bmQtaW1hZ2U6ICR7YmdJbWcoNyl9O1xuICAgIH1cbiAgICBgO1xuXG4gICAgYXBwZW5kQ3NzKHVuaXF1ZUNsYXNzTmFtZSwgY3NzKTtcbn1cbiJdfQ==