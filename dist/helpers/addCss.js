"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = addCss;

var _khmerChess = require("khmer-chess");

var _svg = require("../providers/svg");

var _constance = require("../providers/constance");

var _appendCss = _interopRequireDefault(require("./appendCss"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function addCss(_ref) {
  var uniqueClassName = _ref.uniqueClassName,
      options = _ref.options;
  var width = options.width,
      cellWidth = options.cellWidth;
  var pieceFontSize = width / 12;
  var selector = "".concat(_constance.CSS_TABLE_SELECTOR, ".").concat(uniqueClassName);
  var css = '';
  css += "\n        ".concat(selector, " {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            width: ").concat(width, "px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: #f4d1a6;\n        }\n        ").concat(selector, ".").concat(_constance.POPUP_CLASS_NAME, " {\n            position: fixed;\n            box-shadow: 10px 10px 80px #000000, -10px -10px 80px #000000;\n        }\n        ").concat(selector, " table.").concat(_constance.GRAVEYARD_CLASS_NAME, " {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: #ffc57d;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " {\n            width: ").concat(width, "px;\n            height: ").concat(cellWidth, "px;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_SHADOW_CLASS_NAME, " {\n            width: ").concat(width, "px;\n            height: 0;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td {\n            user-select: none;\n            border: 1px solid #9e9e9e87;\n            padding: 0px;\n            margin: 0px;\n            max-width: ").concat(cellWidth, "px;\n            max-height: ").concat(cellWidth, "px;\n            background-repeat: no-repeat;\n            cursor: pointer;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_SHADOW_CLASS_NAME, " div {\n            width: ").concat(cellWidth, "px;\n            height: ").concat(cellWidth, "px;\n            position: absolute;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td,\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::before,\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::after {\n            font-size: ").concat(pieceFontSize, "px;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::after {\n            opacity: 0.4;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::before {\n            float: left;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td:not(.graveyard)::before,\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td:not(.graveyard)::after {\n            width: ").concat(cellWidth, "px;\n            height: ").concat(cellWidth, "px;\n            background-size: ").concat(cellWidth, "px ").concat(cellWidth, "px;\n            display: block;\n            content: ' ';\n        }\n    "); // moved cells

  css += "\n    ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.MOVED_CLASS_NAME).concat(_constance.CSS_PSEUDO_HIGHLIGHT, " {\n        ").concat(_svg.svgCSS.moved(), "\n    }"); // selected pice

  css += "\n    ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.SELECTED_CLASS_NAME).concat(_constance.CSS_PSEUDO_HIGHLIGHT, " {\n        ").concat(_svg.svgCSS.selected(), "\n    }"); // can move

  css += "\n    ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.CAN_MOVE_CLASS_NAME).concat(_constance.CSS_PSEUDO_HIGHLIGHT, " {\n        ").concat(_svg.svgCSS.canMove(), "\n    }"); // Turn

  _khmerChess.Piece.colorChars.forEach(function (color) {
    _khmerChess.Piece.pieceChars.forEach(function (type) {
      var attackedSVG = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n                <style>".concat(_svg.svgCSS.turn(), "</style>\n                ").concat(_svg.PIECES_SVG[color + type], "\n            </svg>");
      css += "\n                ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.PIECE_CLASS_NAME, ".").concat(_constance.TURN_CLASS_NAME, ".type-").concat(type, ".color-").concat(color).concat(_constance.CSS_PSEUDO_PIECE, " {\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(attackedSVG), "');\n                }\n                ");
    });
  }); // Attacked


  _khmerChess.Piece.colorChars.forEach(function (color) {
    _khmerChess.Piece.pieceChars.forEach(function (type) {
      var attackedSVG = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n                <style>".concat(_svg.svgCSS.attacked(), "</style>\n                ").concat(_svg.PIECES_SVG[color + type], "\n            </svg>");
      var notAttackedSVG = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n                <style>".concat(_svg.svgCSS.notAttacked(), "</style>\n                ").concat(_svg.PIECES_SVG[color + type], "\n            </svg>");
      css += "\n                ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.PIECE_CLASS_NAME, ".").concat(_constance.ATTACKED_CLASS_NAME, ".type-").concat(type, ".color-").concat(color).concat(_constance.CSS_PSEUDO_PIECE, " {\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(attackedSVG), "');\n                }\n                ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.PIECE_CLASS_NAME, ".type-").concat(type, ".color-").concat(color).concat(_constance.CSS_PSEUDO_PIECE, "\n                , ").concat(selector, " .").concat(_constance.TR_PIECE_SHADOW_CLASS_NAME, " div.type-").concat(type, ".color-").concat(color, "{\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(notAttackedSVG), "');\n                }\n                ");
    });
  });

  (0, _appendCss["default"])(uniqueClassName, css);
}
/*
 * Copyright (c) 2021, K4us
 * Author: Raksa Eng <eng.raksa@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 **/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2FkZENzcy50cyJdLCJuYW1lcyI6WyJhZGRDc3MiLCJ1bmlxdWVDbGFzc05hbWUiLCJvcHRpb25zIiwid2lkdGgiLCJjZWxsV2lkdGgiLCJwaWVjZUZvbnRTaXplIiwic2VsZWN0b3IiLCJDU1NfVEFCTEVfU0VMRUNUT1IiLCJjc3MiLCJQT1BVUF9DTEFTU19OQU1FIiwiR1JBVkVZQVJEX0NMQVNTX05BTUUiLCJUUl9QSUVDRV9DTEFTU19OQU1FIiwiVFJfUElFQ0VfU0hBRE9XX0NMQVNTX05BTUUiLCJNT1ZFRF9DTEFTU19OQU1FIiwiQ1NTX1BTRVVET19ISUdITElHSFQiLCJzdmdDU1MiLCJtb3ZlZCIsIlNFTEVDVEVEX0NMQVNTX05BTUUiLCJzZWxlY3RlZCIsIkNBTl9NT1ZFX0NMQVNTX05BTUUiLCJjYW5Nb3ZlIiwiUGllY2UiLCJjb2xvckNoYXJzIiwiZm9yRWFjaCIsImNvbG9yIiwicGllY2VDaGFycyIsInR5cGUiLCJhdHRhY2tlZFNWRyIsInR1cm4iLCJQSUVDRVNfU1ZHIiwiUElFQ0VfQ0xBU1NfTkFNRSIsIlRVUk5fQ0xBU1NfTkFNRSIsIkNTU19QU0VVRE9fUElFQ0UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhdHRhY2tlZCIsIm5vdEF0dGFja2VkU1ZHIiwibm90QXR0YWNrZWQiLCJBVFRBQ0tFRF9DTEFTU19OQU1FIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBSUE7O0FBZUE7Ozs7QUFHZSxTQUFTQSxNQUFULE9BQzJDO0FBQUEsTUFEekJDLGVBQ3lCLFFBRHpCQSxlQUN5QjtBQUFBLE1BRFJDLE9BQ1EsUUFEUkEsT0FDUTtBQUN0RCxNQUFRQyxLQUFSLEdBQTZCRCxPQUE3QixDQUFRQyxLQUFSO0FBQUEsTUFBZUMsU0FBZixHQUE2QkYsT0FBN0IsQ0FBZUUsU0FBZjtBQUNBLE1BQU1DLGFBQWEsR0FBR0YsS0FBSyxHQUFHLEVBQTlCO0FBQ0EsTUFBTUcsUUFBUSxhQUFNQyw2QkFBTixj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QUQsQ0FGeEUscURBSUdyQixRQUpILGVBSWdCSyw4QkFKaEIsaUJBSTBDbUIsMkJBSjFDLG1CQUltRUosSUFKbkUsb0JBSWlGRixLQUpqRixTQUl5RlEsMkJBSnpGLGlDQUtLMUIsUUFMTCxlQUtrQk0scUNBTGxCLHVCQUt5RGMsSUFMekQsb0JBS3VFRixLQUx2RSxtRkFNc0RTLGtCQUFrQixDQUFDRSxjQUFELENBTnhFLDZDQUFIO0FBU0gsS0FsQkQ7QUFtQkgsR0FwQkQ7O0FBc0JBLDZCQUFVbEMsZUFBVixFQUEyQk8sR0FBM0I7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpZWNlIH0gZnJvbSAna2htZXItY2hlc3MnO1xuaW1wb3J0IHtcbiAgICBQSUVDRVNfU1ZHLFxuICAgIHN2Z0NTUyxcbn0gZnJvbSAnLi4vcHJvdmlkZXJzL3N2Zyc7XG5pbXBvcnQge1xuICAgIENTU19UQUJMRV9TRUxFQ1RPUixcbiAgICBTRUxFQ1RFRF9DTEFTU19OQU1FLFxuICAgIFBJRUNFX0NMQVNTX05BTUUsXG4gICAgQVRUQUNLRURfQ0xBU1NfTkFNRSxcbiAgICBDU1NfUFNFVURPX0hJR0hMSUdIVCxcbiAgICBDU1NfUFNFVURPX1BJRUNFLFxuICAgIFBPUFVQX0NMQVNTX05BTUUsXG4gICAgTU9WRURfQ0xBU1NfTkFNRSxcbiAgICBDQU5fTU9WRV9DTEFTU19OQU1FLFxuICAgIFRVUk5fQ0xBU1NfTkFNRSxcbiAgICBHUkFWRVlBUkRfQ0xBU1NfTkFNRSxcbiAgICBUUl9QSUVDRV9DTEFTU19OQU1FLFxuICAgIFRSX1BJRUNFX1NIQURPV19DTEFTU19OQU1FLFxufSBmcm9tICcuLi9wcm92aWRlcnMvY29uc3RhbmNlJztcbmltcG9ydCBhcHBlbmRDc3MgZnJvbSAnLi9hcHBlbmRDc3MnO1xuaW1wb3J0IE9wdGlvbnNNYW5hZ2VyIGZyb20gJy4uL09wdGlvbnNNYW5hZ2VyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkQ3NzKHsgdW5pcXVlQ2xhc3NOYW1lLCBvcHRpb25zIH06XG4gICAgeyB1bmlxdWVDbGFzc05hbWU6IHN0cmluZywgb3B0aW9uczogT3B0aW9uc01hbmFnZXIgfSkge1xuICAgIGNvbnN0IHsgd2lkdGgsIGNlbGxXaWR0aCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBwaWVjZUZvbnRTaXplID0gd2lkdGggLyAxMjtcbiAgICBjb25zdCBzZWxlY3RvciA9IGAke0NTU19UQUJMRV9TRUxFQ1RPUn0uJHt1bmlxdWVDbGFzc05hbWV9YDtcblxuICAgIGxldCBjc3MgPSAnJztcbiAgICBjc3MgKz0gYFxuICAgICAgICAke3NlbGVjdG9yfSB7XG4gICAgICAgICAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xuICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICAgICAgIGJvcmRlci1zcGFjaW5nOiAwcHg7XG4gICAgICAgICAgICB3aWR0aDogJHt3aWR0aH1weDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGJvcmRlcjogMHB4O1xuICAgICAgICAgICAgcGFkZGluZzogMHB4O1xuICAgICAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZDFhNjtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfS4ke1BPUFVQX0NMQVNTX05BTUV9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDEwcHggMTBweCA4MHB4ICMwMDAwMDAsIC0xMHB4IC0xMHB4IDgwcHggIzAwMDAwMDtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfSB0YWJsZS4ke0dSQVZFWUFSRF9DTEFTU19OQU1FfSB7XG4gICAgICAgICAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xuICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICAgICAgIGJvcmRlci1zcGFjaW5nOiAwcHg7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBib3JkZXI6IDBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDBweDtcbiAgICAgICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmM1N2Q7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0ge1xuICAgICAgICAgICAgd2lkdGg6ICR7d2lkdGh9cHg7XG4gICAgICAgICAgICBoZWlnaHQ6ICR7Y2VsbFdpZHRofXB4O1xuICAgICAgICB9XG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX1NIQURPV19DTEFTU19OQU1FfSB7XG4gICAgICAgICAgICB3aWR0aDogJHt3aWR0aH1weDtcbiAgICAgICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZCB7XG4gICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5ZTllOWU4NztcbiAgICAgICAgICAgIHBhZGRpbmc6IDBweDtcbiAgICAgICAgICAgIG1hcmdpbjogMHB4O1xuICAgICAgICAgICAgbWF4LXdpZHRoOiAke2NlbGxXaWR0aH1weDtcbiAgICAgICAgICAgIG1heC1oZWlnaHQ6ICR7Y2VsbFdpZHRofXB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9TSEFET1dfQ0xBU1NfTkFNRX0gZGl2IHtcbiAgICAgICAgICAgIHdpZHRoOiAke2NlbGxXaWR0aH1weDtcbiAgICAgICAgICAgIGhlaWdodDogJHtjZWxsV2lkdGh9cHg7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQsXG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkOjpiZWZvcmUsXG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkOjphZnRlciB7XG4gICAgICAgICAgICBmb250LXNpemU6ICR7cGllY2VGb250U2l6ZX1weDtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZDo6YWZ0ZXIge1xuICAgICAgICAgICAgb3BhY2l0eTogMC40O1xuICAgICAgICB9XG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkOjpiZWZvcmUge1xuICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQ6bm90KC5ncmF2ZXlhcmQpOjpiZWZvcmUsXG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkOm5vdCguZ3JhdmV5YXJkKTo6YWZ0ZXIge1xuICAgICAgICAgICAgd2lkdGg6ICR7Y2VsbFdpZHRofXB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAke2NlbGxXaWR0aH1weDtcbiAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogJHtjZWxsV2lkdGh9cHggJHtjZWxsV2lkdGh9cHg7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIGNvbnRlbnQ6ICcgJztcbiAgICAgICAgfVxuICAgIGA7XG4gICAgLy8gbW92ZWQgY2VsbHNcbiAgICBjc3MgKz0gYFxuICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkLiR7TU9WRURfQ0xBU1NfTkFNRX0ke0NTU19QU0VVRE9fSElHSExJR0hUfSB7XG4gICAgICAgICR7c3ZnQ1NTLm1vdmVkKCl9XG4gICAgfWA7XG4gICAgLy8gc2VsZWN0ZWQgcGljZVxuICAgIGNzcyArPSBgXG4gICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQuJHtTRUxFQ1RFRF9DTEFTU19OQU1FfSR7Q1NTX1BTRVVET19ISUdITElHSFR9IHtcbiAgICAgICAgJHtzdmdDU1Muc2VsZWN0ZWQoKX1cbiAgICB9YDtcbiAgICAvLyBjYW4gbW92ZVxuICAgIGNzcyArPSBgXG4gICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQuJHtDQU5fTU9WRV9DTEFTU19OQU1FfSR7Q1NTX1BTRVVET19ISUdITElHSFR9IHtcbiAgICAgICAgJHtzdmdDU1MuY2FuTW92ZSgpfVxuICAgIH1gO1xuICAgIC8vIFR1cm5cbiAgICBQaWVjZS5jb2xvckNoYXJzLmZvckVhY2goKGNvbG9yKSA9PiB7XG4gICAgICAgIFBpZWNlLnBpZWNlQ2hhcnMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXR0YWNrZWRTVkcgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgdmVyc2lvbj1cIjEuMVwiIHZpZXdCb3g9XCItMTAgMCAxMDI0IDEwMDBcIj5cbiAgICAgICAgICAgICAgICA8c3R5bGU+JHtzdmdDU1MudHVybigpfTwvc3R5bGU+XG4gICAgICAgICAgICAgICAgJHtQSUVDRVNfU1ZHW2NvbG9yICsgdHlwZV19XG4gICAgICAgICAgICA8L3N2Zz5gO1xuICAgICAgICAgICAgY3NzICs9IGBcbiAgICAgICAgICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZC4ke1BJRUNFX0NMQVNTX05BTUV9LiR7VFVSTl9DTEFTU19OQU1FfS50eXBlLSR7dHlwZX0uY29sb3ItJHtjb2xvcn0ke0NTU19QU0VVRE9fUElFQ0V9IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwke2VuY29kZVVSSUNvbXBvbmVudChhdHRhY2tlZFNWRyl9Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIEF0dGFja2VkXG4gICAgUGllY2UuY29sb3JDaGFycy5mb3JFYWNoKChjb2xvcikgPT4ge1xuICAgICAgICBQaWVjZS5waWVjZUNoYXJzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF0dGFja2VkU1ZHID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHZlcnNpb249XCIxLjFcIiB2aWV3Qm94PVwiLTEwIDAgMTAyNCAxMDAwXCI+XG4gICAgICAgICAgICAgICAgPHN0eWxlPiR7c3ZnQ1NTLmF0dGFja2VkKCl9PC9zdHlsZT5cbiAgICAgICAgICAgICAgICAke1BJRUNFU19TVkdbY29sb3IgKyB0eXBlXX1cbiAgICAgICAgICAgIDwvc3ZnPmA7XG4gICAgICAgICAgICBjb25zdCBub3RBdHRhY2tlZFNWRyA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB2ZXJzaW9uPVwiMS4xXCIgdmlld0JveD1cIi0xMCAwIDEwMjQgMTAwMFwiPlxuICAgICAgICAgICAgICAgIDxzdHlsZT4ke3N2Z0NTUy5ub3RBdHRhY2tlZCgpfTwvc3R5bGU+XG4gICAgICAgICAgICAgICAgJHtQSUVDRVNfU1ZHW2NvbG9yICsgdHlwZV19XG4gICAgICAgICAgICA8L3N2Zz5gO1xuICAgICAgICAgICAgY3NzICs9IGBcbiAgICAgICAgICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZC4ke1BJRUNFX0NMQVNTX05BTUV9LiR7QVRUQUNLRURfQ0xBU1NfTkFNRX0udHlwZS0ke3R5cGV9LmNvbG9yLSR7Y29sb3J9JHtDU1NfUFNFVURPX1BJRUNFfSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJHtlbmNvZGVVUklDb21wb25lbnQoYXR0YWNrZWRTVkcpfScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZC4ke1BJRUNFX0NMQVNTX05BTUV9LnR5cGUtJHt0eXBlfS5jb2xvci0ke2NvbG9yfSR7Q1NTX1BTRVVET19QSUVDRX1cbiAgICAgICAgICAgICAgICAsICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX1NIQURPV19DTEFTU19OQU1FfSBkaXYudHlwZS0ke3R5cGV9LmNvbG9yLSR7Y29sb3J9e1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5vdEF0dGFja2VkU1ZHKX0nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhcHBlbmRDc3ModW5pcXVlQ2xhc3NOYW1lLCBjc3MpO1xufVxuXG4vKlxuICogQ29weXJpZ2h0IChjKSAyMDIxLCBLNHVzXG4gKiBBdXRob3I6IFJha3NhIEVuZyA8ZW5nLnJha3NhQGdtYWlsLmNvbT5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4gKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbiAqXG4gKiAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICogMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICogICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyAnQVMgSVMnXG4gKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG4gKiBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRVxuICogQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4gKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SXG4gKiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRlxuICogU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4gKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTlxuICogQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbiAqIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4gKiBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKiovIl19