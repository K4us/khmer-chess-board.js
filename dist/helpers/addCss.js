"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = addCss;

var _khmerChess = require("khmer-chess");

var _svg = require("../providers/svg");

var _constance = require("../providers/constance");

var _appendCss = _interopRequireDefault(require("./appendCss"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/*
 * Copyright (c) 2021, K4us
 * Author: Raksa Eng <eng.raksa@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 *---------------------------------------------------------------------------- */
function addCss(_ref) {
  var uniqueClassName = _ref.uniqueClassName,
      options = _ref.options;
  var width = options.width,
      cellWidth = options.cellWidth;
  var pieceFontSize = width / 12;
  var selector = "".concat(_constance.CSS_TABLE_SELECTOR, ".").concat(uniqueClassName);
  var css = '';
  css += "\n        ".concat(selector, " {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            width: ").concat(width, "px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: #f4d1a6;\n        }\n        ").concat(selector, ".").concat(_constance.POPUP_CLASS_NAME, " {\n            position: fixed;\n            box-shadow: 10px 10px 80px #000000, -10px -10px 80px #000000;\n        }\n        ").concat(selector, " table.").concat(_constance.GRAVEYARD_CLASS_NAME, " {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: #ffc57d;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " {\n            width: ").concat(width, "px;\n            height: ").concat(cellWidth, "px;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_SHADOW_CLASS_NAME, " {\n            width: ").concat(width, "px;\n            height: 0;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td {\n            user-select: none;\n            border: 1px solid #9e9e9e87;\n            padding: 0px;\n            margin: 0px;\n            max-width: ").concat(cellWidth, "px;\n            max-height: ").concat(cellWidth, "px;\n            background-repeat: no-repeat;\n            cursor: pointer;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_SHADOW_CLASS_NAME, " div {\n            width: ").concat(cellWidth, "px;\n            height: ").concat(cellWidth, "px;\n            position: absolute;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td,\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::before,\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::after {\n            font-size: ").concat(pieceFontSize, "px;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::after {\n            opacity: 0.4;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td::before {\n            float: left;\n        }\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td:not(.graveyard)::before,\n        ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td:not(.graveyard)::after {\n            width: ").concat(cellWidth, "px;\n            height: ").concat(cellWidth, "px;\n            background-size: ").concat(cellWidth, "px ").concat(cellWidth, "px;\n            display: block;\n            content: ' ';\n        }\n    "); // moved cells

  css += "\n    ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.MOVED_CLASS_NAME).concat(_constance.CSS_PSEUDO_HIGHLIGHT, " {\n        ").concat(_svg.svgCSS.moved(), "\n    }"); // selected pice

  css += "\n    ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.SELECTED_CLASS_NAME).concat(_constance.CSS_PSEUDO_HIGHLIGHT, " {\n        ").concat(_svg.svgCSS.selected(), "\n    }"); // can move

  css += "\n    ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.CAN_MOVE_CLASS_NAME).concat(_constance.CSS_PSEUDO_HIGHLIGHT, " {\n        ").concat(_svg.svgCSS.canMove(), "\n    }"); // Turn

  _khmerChess.Piece.colorChars.forEach(function (color) {
    _khmerChess.Piece.pieceChars.forEach(function (type) {
      var attackedSVG = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n                <style>".concat(_svg.svgCSS.turn(), "</style>\n                ").concat(_svg.PIECES_SVG[color + type], "\n            </svg>");
      css += "\n                ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.PIECE_CLASS_NAME, ".").concat(_constance.TURN_CLASS_NAME, ".type-").concat(type, ".color-").concat(color).concat(_constance.CSS_PSEUDO_PIECE, " {\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(attackedSVG), "');\n                }\n                ");
    });
  }); // Attacked


  _khmerChess.Piece.colorChars.forEach(function (color) {
    _khmerChess.Piece.pieceChars.forEach(function (type) {
      var attackedSVG = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n                <style>".concat(_svg.svgCSS.attacked(), "</style>\n                ").concat(_svg.PIECES_SVG[color + type], "\n            </svg>");
      var notAttackedSVG = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-10 0 1024 1000\">\n                <style>".concat(_svg.svgCSS.notAttacked(), "</style>\n                ").concat(_svg.PIECES_SVG[color + type], "\n            </svg>");
      css += "\n                ".concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.PIECE_CLASS_NAME, ".").concat(_constance.ATTACKED_CLASS_NAME, ".type-").concat(type, ".color-").concat(color).concat(_constance.CSS_PSEUDO_PIECE, " {\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(attackedSVG), "');\n                }\n                ").concat(selector, " .").concat(_constance.TR_PIECE_CLASS_NAME, " td.").concat(_constance.PIECE_CLASS_NAME, ".type-").concat(type, ".color-").concat(color).concat(_constance.CSS_PSEUDO_PIECE, "\n                , ").concat(selector, " .").concat(_constance.TR_PIECE_SHADOW_CLASS_NAME, " div.type-").concat(type, ".color-").concat(color, "{\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(notAttackedSVG), "');\n                }\n                ");
    });
  });

  (0, _appendCss["default"])(uniqueClassName, css);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2FkZENzcy50cyJdLCJuYW1lcyI6WyJhZGRDc3MiLCJ1bmlxdWVDbGFzc05hbWUiLCJvcHRpb25zIiwid2lkdGgiLCJjZWxsV2lkdGgiLCJwaWVjZUZvbnRTaXplIiwic2VsZWN0b3IiLCJDU1NfVEFCTEVfU0VMRUNUT1IiLCJjc3MiLCJQT1BVUF9DTEFTU19OQU1FIiwiR1JBVkVZQVJEX0NMQVNTX05BTUUiLCJUUl9QSUVDRV9DTEFTU19OQU1FIiwiVFJfUElFQ0VfU0hBRE9XX0NMQVNTX05BTUUiLCJNT1ZFRF9DTEFTU19OQU1FIiwiQ1NTX1BTRVVET19ISUdITElHSFQiLCJzdmdDU1MiLCJtb3ZlZCIsIlNFTEVDVEVEX0NMQVNTX05BTUUiLCJzZWxlY3RlZCIsIkNBTl9NT1ZFX0NMQVNTX05BTUUiLCJjYW5Nb3ZlIiwiUGllY2UiLCJjb2xvckNoYXJzIiwiZm9yRWFjaCIsImNvbG9yIiwicGllY2VDaGFycyIsInR5cGUiLCJhdHRhY2tlZFNWRyIsInR1cm4iLCJQSUVDRVNfU1ZHIiwiUElFQ0VfQ0xBU1NfTkFNRSIsIlRVUk5fQ0xBU1NfTkFNRSIsIkNTU19QU0VVRE9fUElFQ0UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhdHRhY2tlZCIsIm5vdEF0dGFja2VkU1ZHIiwibm90QXR0YWNrZWQiLCJBVFRBQ0tFRF9DTEFTU19OQU1FIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBMkJBOztBQUNBOztBQUlBOztBQWVBOzs7O0FBL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXdCZSxTQUFTQSxNQUFULE9BQzJDO0FBQUEsTUFEekJDLGVBQ3lCLFFBRHpCQSxlQUN5QjtBQUFBLE1BRFJDLE9BQ1EsUUFEUkEsT0FDUTtBQUN0RCxNQUFR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QUlBbEIsTUFBQUEsR0FBRyxnQ0FDR0YsUUFESCxlQUNnQkssOEJBRGhCLGlCQUMwQ21CLDJCQUQxQyxjQUM4RE8sOEJBRDlELG1CQUMwRlgsSUFEMUYsb0JBQ3dHRixLQUR4RyxTQUNnSFEsMkJBRGhILG9GQUVzREMsa0JBQWtCLENBQUNOLFdBQUQsQ0FGeEUscURBSUdyQixRQUpILGVBSWdCSyw4QkFKaEIsaUJBSTBDbUIsMkJBSjFDLG1CQUltRUosSUFKbkUsb0JBSWlGRixLQUpqRixTQUl5RlEsMkJBSnpGLGlDQUtLMUIsUUFMTCxlQUtrQk0scUNBTGxCLHVCQUt5RGMsSUFMekQsb0JBS3VFRixLQUx2RSxtRkFNc0RTLGtCQUFrQixDQUFDRSxjQUFELENBTnhFLDZDQUFIO0FBU0gsS0FsQkQ7QUFtQkgsR0FwQkQ7O0FBc0JBLDZCQUFVbEMsZUFBVixFQUEyQk8sR0FBM0I7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEsIEs0dXNcbiAqIEF1dGhvcjogUmFrc2EgRW5nIDxlbmcucmFrc2FAZ21haWwuY29tPlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gKiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuICogQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuICogSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0VcbiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRVxuICogTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuICogQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0ZcbiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTU1xuICogSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbiAqIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4gKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5pbXBvcnQgeyBQaWVjZSB9IGZyb20gJ2tobWVyLWNoZXNzJztcbmltcG9ydCB7XG4gICAgUElFQ0VTX1NWRyxcbiAgICBzdmdDU1MsXG59IGZyb20gJy4uL3Byb3ZpZGVycy9zdmcnO1xuaW1wb3J0IHtcbiAgICBDU1NfVEFCTEVfU0VMRUNUT1IsXG4gICAgU0VMRUNURURfQ0xBU1NfTkFNRSxcbiAgICBQSUVDRV9DTEFTU19OQU1FLFxuICAgIEFUVEFDS0VEX0NMQVNTX05BTUUsXG4gICAgQ1NTX1BTRVVET19ISUdITElHSFQsXG4gICAgQ1NTX1BTRVVET19QSUVDRSxcbiAgICBQT1BVUF9DTEFTU19OQU1FLFxuICAgIE1PVkVEX0NMQVNTX05BTUUsXG4gICAgQ0FOX01PVkVfQ0xBU1NfTkFNRSxcbiAgICBUVVJOX0NMQVNTX05BTUUsXG4gICAgR1JBVkVZQVJEX0NMQVNTX05BTUUsXG4gICAgVFJfUElFQ0VfQ0xBU1NfTkFNRSxcbiAgICBUUl9QSUVDRV9TSEFET1dfQ0xBU1NfTkFNRSxcbn0gZnJvbSAnLi4vcHJvdmlkZXJzL2NvbnN0YW5jZSc7XG5pbXBvcnQgYXBwZW5kQ3NzIGZyb20gJy4vYXBwZW5kQ3NzJztcbmltcG9ydCBPcHRpb25zTWFuYWdlciBmcm9tICcuLi9PcHRpb25zTWFuYWdlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZENzcyh7IHVuaXF1ZUNsYXNzTmFtZSwgb3B0aW9ucyB9OlxuICAgIHsgdW5pcXVlQ2xhc3NOYW1lOiBzdHJpbmcsIG9wdGlvbnM6IE9wdGlvbnNNYW5hZ2VyIH0pIHtcbiAgICBjb25zdCB7IHdpZHRoLCBjZWxsV2lkdGggfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcGllY2VGb250U2l6ZSA9IHdpZHRoIC8gMTI7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBgJHtDU1NfVEFCTEVfU0VMRUNUT1J9LiR7dW5pcXVlQ2xhc3NOYW1lfWA7XG5cbiAgICBsZXQgY3NzID0gJyc7XG4gICAgY3NzICs9IGBcbiAgICAgICAgJHtzZWxlY3Rvcn0ge1xuICAgICAgICAgICAgdGFibGUtbGF5b3V0OiBmaXhlZDtcbiAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgICAgICAgICBib3JkZXItc3BhY2luZzogMHB4O1xuICAgICAgICAgICAgd2lkdGg6ICR7d2lkdGh9cHg7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBib3JkZXI6IDBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDBweDtcbiAgICAgICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGQxYTY7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0uJHtQT1BVUF9DTEFTU19OQU1FfSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAxMHB4IDEwcHggODBweCAjMDAwMDAwLCAtMTBweCAtMTBweCA4MHB4ICMwMDAwMDA7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gdGFibGUuJHtHUkFWRVlBUkRfQ0xBU1NfTkFNRX0ge1xuICAgICAgICAgICAgdGFibGUtbGF5b3V0OiBmaXhlZDtcbiAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgICAgICAgICBib3JkZXItc3BhY2luZzogMHB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgYm9yZGVyOiAwcHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAwcHg7XG4gICAgICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjNTdkO1xuICAgICAgICB9XG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHtcbiAgICAgICAgICAgIHdpZHRoOiAke3dpZHRofXB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAke2NlbGxXaWR0aH1weDtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9TSEFET1dfQ0xBU1NfTkFNRX0ge1xuICAgICAgICAgICAgd2lkdGg6ICR7d2lkdGh9cHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQge1xuICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjOWU5ZTllODc7XG4gICAgICAgICAgICBwYWRkaW5nOiAwcHg7XG4gICAgICAgICAgICBtYXJnaW46IDBweDtcbiAgICAgICAgICAgIG1heC13aWR0aDogJHtjZWxsV2lkdGh9cHg7XG4gICAgICAgICAgICBtYXgtaGVpZ2h0OiAke2NlbGxXaWR0aH1weDtcbiAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfU0hBRE9XX0NMQVNTX05BTUV9IGRpdiB7XG4gICAgICAgICAgICB3aWR0aDogJHtjZWxsV2lkdGh9cHg7XG4gICAgICAgICAgICBoZWlnaHQ6ICR7Y2VsbFdpZHRofXB4O1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB9XG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkLFxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZDo6YmVmb3JlLFxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZDo6YWZ0ZXIge1xuICAgICAgICAgICAgZm9udC1zaXplOiAke3BpZWNlRm9udFNpemV9cHg7XG4gICAgICAgIH1cbiAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQ6OmFmdGVyIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuNDtcbiAgICAgICAgfVxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZDo6YmVmb3JlIHtcbiAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICB9XG4gICAgICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkOm5vdCguZ3JhdmV5YXJkKTo6YmVmb3JlLFxuICAgICAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZDpub3QoLmdyYXZleWFyZCk6OmFmdGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAke2NlbGxXaWR0aH1weDtcbiAgICAgICAgICAgIGhlaWdodDogJHtjZWxsV2lkdGh9cHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6ICR7Y2VsbFdpZHRofXB4ICR7Y2VsbFdpZHRofXB4O1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICBjb250ZW50OiAnICc7XG4gICAgICAgIH1cbiAgICBgO1xuICAgIC8vIG1vdmVkIGNlbGxzXG4gICAgY3NzICs9IGBcbiAgICAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9DTEFTU19OQU1FfSB0ZC4ke01PVkVEX0NMQVNTX05BTUV9JHtDU1NfUFNFVURPX0hJR0hMSUdIVH0ge1xuICAgICAgICAke3N2Z0NTUy5tb3ZlZCgpfVxuICAgIH1gO1xuICAgIC8vIHNlbGVjdGVkIHBpY2VcbiAgICBjc3MgKz0gYFxuICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkLiR7U0VMRUNURURfQ0xBU1NfTkFNRX0ke0NTU19QU0VVRE9fSElHSExJR0hUfSB7XG4gICAgICAgICR7c3ZnQ1NTLnNlbGVjdGVkKCl9XG4gICAgfWA7XG4gICAgLy8gY2FuIG1vdmVcbiAgICBjc3MgKz0gYFxuICAgICR7c2VsZWN0b3J9IC4ke1RSX1BJRUNFX0NMQVNTX05BTUV9IHRkLiR7Q0FOX01PVkVfQ0xBU1NfTkFNRX0ke0NTU19QU0VVRE9fSElHSExJR0hUfSB7XG4gICAgICAgICR7c3ZnQ1NTLmNhbk1vdmUoKX1cbiAgICB9YDtcbiAgICAvLyBUdXJuXG4gICAgUGllY2UuY29sb3JDaGFycy5mb3JFYWNoKChjb2xvcikgPT4ge1xuICAgICAgICBQaWVjZS5waWVjZUNoYXJzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF0dGFja2VkU1ZHID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHZlcnNpb249XCIxLjFcIiB2aWV3Qm94PVwiLTEwIDAgMTAyNCAxMDAwXCI+XG4gICAgICAgICAgICAgICAgPHN0eWxlPiR7c3ZnQ1NTLnR1cm4oKX08L3N0eWxlPlxuICAgICAgICAgICAgICAgICR7UElFQ0VTX1NWR1tjb2xvciArIHR5cGVdfVxuICAgICAgICAgICAgPC9zdmc+YDtcbiAgICAgICAgICAgIGNzcyArPSBgXG4gICAgICAgICAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQuJHtQSUVDRV9DTEFTU19OQU1FfS4ke1RVUk5fQ0xBU1NfTkFNRX0udHlwZS0ke3R5cGV9LmNvbG9yLSR7Y29sb3J9JHtDU1NfUFNFVURPX1BJRUNFfSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJHtlbmNvZGVVUklDb21wb25lbnQoYXR0YWNrZWRTVkcpfScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyBBdHRhY2tlZFxuICAgIFBpZWNlLmNvbG9yQ2hhcnMuZm9yRWFjaCgoY29sb3IpID0+IHtcbiAgICAgICAgUGllY2UucGllY2VDaGFycy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdHRhY2tlZFNWRyA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB2ZXJzaW9uPVwiMS4xXCIgdmlld0JveD1cIi0xMCAwIDEwMjQgMTAwMFwiPlxuICAgICAgICAgICAgICAgIDxzdHlsZT4ke3N2Z0NTUy5hdHRhY2tlZCgpfTwvc3R5bGU+XG4gICAgICAgICAgICAgICAgJHtQSUVDRVNfU1ZHW2NvbG9yICsgdHlwZV19XG4gICAgICAgICAgICA8L3N2Zz5gO1xuICAgICAgICAgICAgY29uc3Qgbm90QXR0YWNrZWRTVkcgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgdmVyc2lvbj1cIjEuMVwiIHZpZXdCb3g9XCItMTAgMCAxMDI0IDEwMDBcIj5cbiAgICAgICAgICAgICAgICA8c3R5bGU+JHtzdmdDU1Mubm90QXR0YWNrZWQoKX08L3N0eWxlPlxuICAgICAgICAgICAgICAgICR7UElFQ0VTX1NWR1tjb2xvciArIHR5cGVdfVxuICAgICAgICAgICAgPC9zdmc+YDtcbiAgICAgICAgICAgIGNzcyArPSBgXG4gICAgICAgICAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQuJHtQSUVDRV9DTEFTU19OQU1FfS4ke0FUVEFDS0VEX0NMQVNTX05BTUV9LnR5cGUtJHt0eXBlfS5jb2xvci0ke2NvbG9yfSR7Q1NTX1BTRVVET19QSUVDRX0ge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KGF0dGFja2VkU1ZHKX0nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHtzZWxlY3Rvcn0gLiR7VFJfUElFQ0VfQ0xBU1NfTkFNRX0gdGQuJHtQSUVDRV9DTEFTU19OQU1FfS50eXBlLSR7dHlwZX0uY29sb3ItJHtjb2xvcn0ke0NTU19QU0VVRE9fUElFQ0V9XG4gICAgICAgICAgICAgICAgLCAke3NlbGVjdG9yfSAuJHtUUl9QSUVDRV9TSEFET1dfQ0xBU1NfTkFNRX0gZGl2LnR5cGUtJHt0eXBlfS5jb2xvci0ke2NvbG9yfXtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwke2VuY29kZVVSSUNvbXBvbmVudChub3RBdHRhY2tlZFNWRyl9Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgYXBwZW5kQ3NzKHVuaXF1ZUNsYXNzTmFtZSwgY3NzKTtcbn1cbiJdfQ==