"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.genBackgroundNote = genBackgroundNote;
exports.svgCSS = exports.PIECES_SVG = exports.WOOD_COLORS = void 0;

var _khmerChess = require("khmer-chess");

var _types = require("k4us-share/types");

var _PIECES_SVG;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var WOOD_COLORS = {
  WHITE: '#ffffff',
  BLACK: '#422007'
};
exports.WOOD_COLORS = WOOD_COLORS;
var filterId = 'drop-shadow';
var SVG_FILTER = "<defs>\n<filter id=\"".concat(filterId, "\" height=\"130%\">\n  <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>\n  <feOffset dx=\"5\" dy=\"5\" result=\"offsetblur\"/>\n  <feMerge>\n    <feMergeNode/>\n    <feMergeNode in=\"SourceGraphic\"/>\n  </feMerge>\n</filter>\n</defs>");

_types.boatSVG.init();

_types.horseSVG.init();

_types.generalSVG.init();

_types.kingSVG.init();

_types.queenSVG.init();

_types.fishSVG.init();

_types.transformFishSVG.init();

var PIECES_SVG = (_PIECES_SVG = {}, _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_BOAT), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.boatSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_HORSE), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.horseSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_GENERAL), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.generalSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_KING), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.kingSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_QUEEN), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.queenSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_FISH), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.fishSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_WHITE).concat(_khmerChess.PIECE_TYPE_TRANSFORM_FISH), "\n    ".concat(SVG_FILTER, "\n     <path fill=\"").concat(WOOD_COLORS.WHITE, "\" filter=\"url(#").concat(filterId, ")\"\n     d=\"").concat(_types.transformFishSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_BOAT), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.boatSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_HORSE), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.horseSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_GENERAL), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.generalSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_KING), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.kingSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_QUEEN), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.queenSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_FISH), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.fishSVG.pathData[0], "\" />\n ")), _defineProperty(_PIECES_SVG, "".concat(_khmerChess.PIECE_COLOR_BLACK).concat(_khmerChess.PIECE_TYPE_TRANSFORM_FISH), "\n    ".concat(SVG_FILTER, "\n    <path fill=\"").concat(WOOD_COLORS.BLACK, "\" filter=\"url(#").concat(filterId, ")\"\n    d=\"").concat(_types.transformFishSVG.pathData[0], "\" />\n ")), _PIECES_SVG);
exports.PIECES_SVG = PIECES_SVG;
var svgCSS = {
  attacked: function attacked(color) {
    return "path {\n      stroke: red;\n      stroke-width: 1px;\n      stroke-linejoin: round;\n      animation-name: attacking;\n      animation-duration: 1s;\n      animation-iteration-count: infinite;\n   }\n   @keyframes attacking {\n      0% {\n         stroke-width: 20px;\n      }\n      50% {\n         stroke-width: 1px;\n      }\n      100% {\n         stroke-width: 20px;\n      }\n   }";
  },
  notAttacked: function notAttacked(color) {
    return "path {\n   }";
  },
  turn: function turn(color) {
    return "path {\n      stroke: #3d8a365f;\n      stroke-width: 10px;\n      stroke-linejoin: round;\n   }\n   ";
  },
  selected: function selected(color) {
    return 'background: radial-gradient(#ff00f577, #3d8a3677) !important;';
  },
  moved: function moved(color) {
    return 'background: radial-gradient(#c0aeee99, #94e9d788) !important;';
  },
  canMove: function canMove(color) {
    return 'background: radial-gradient(#ff00f500, #3d8a3677) !important;';
  }
};
exports.svgCSS = svgCSS;

function genBackgroundNote(tObjects, cellWidth, fSize) {
  var text = tObjects.map(function (obj) {
    return "<text x='".concat(obj.x, "' y='").concat(obj.y, "' fill='grey' font-size='").concat(fSize, "'>").concat(obj.t, "</text>");
  }).join('');
  var svg = "<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='".concat(cellWidth, "px' width='").concat(cellWidth, "px'>\n      ").concat(text, "\n   </svg>");
  return "url(\"data:image/svg+xml;utf8,".concat(encodeURIComponent(svg), "\")");
}
/*
 * Copyright (c) 2021, K4us
 * Author: Raksa Eng <eng.raksa@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 **/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wcm92aWRlcnMvc3ZnLnRzIl0sIm5hbWVzIjpbIldPT0RfQ09MT1JTIiwiV0hJVEUiLCJCTEFDSyIsImZpbHRlcklkIiwiU1ZHX0ZJTFRFUiIsImJvYXRTVkciLCJpbml0IiwiaG9yc2VTVkciLCJnZW5lcmFsU1ZHIiwia2luZ1NWRyIsInF1ZWVuU1ZHIiwiZmlzaFNWRyIsInRyYW5zZm9ybUZpc2hTVkciLCJQSUVDRVNfU1ZHIiwiUElFQ0VfQ09MT1JfV0hJVEUiLCJQSUVDRV9UWVBFX0JPQVQiLCJwYXRoRGF0YSIsIlBJRUNFX1RZUEVfSE9SU0UiLCJQSUVDRV9UWVBFX0dFTkVSQUwiLCJQSUVDRV9UWVBFX0tJTkciLCJQSUVDRV9UWVBFX1FVRUVOIiwiUElFQ0VfVFlQRV9GSVNIIiwiUElFQ0VfVFlQRV9UUkFOU0ZPUk1fRklTSCIsIlBJRUNFX0NPTE9SX0JMQUNLIiwic3ZnQ1NTIiwiYXR0YWNrZWQiLCJjb2xvciIsIm5vdEF0dGFja2VkIiwidHVybiIsInNlbGVjdGVkIiwibW92ZWQiLCJjYW5Nb3ZlIiwiZ2VuQmFja2dyb3VuZE5vdGUiLCJ0T2JqZWN0cyIsImNlbGxXaWR0aCIsImZTaXplIiwidGV4dCIsIm1hcCIsIm9iaiIsIngiLCJ5IiwidCIsImpvaW4iLCJzdmciLCJlbmNvZGVVUklDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBV0E7Ozs7OztBQVVPLElBQU1BLFdBQVcsR0FBRztBQUN4QkMsRUFBQUEsS0FBSyxFQUFFLFNBRGlCO0FBRXhCQyxFQUFBQSxLQUFLLEVBQUU7QUFGaUIsQ0FBcEI7O0FBS1AsSUFBTUMsUUFBUSxHQUFHLGFBQWpCO0FBQ0EsSUFBTUMsVUFBVSxrQ0FDRkQsUUFERSxzUEFBaEI7O0FBV0FFLGVBQVFDLElBQVI7O0FBQ0FDLGdCQUFTRCxJQUFUOztBQUNBRSxrQkFBV0YsSUFBWDs7QUFDQUcsZUFBUUgsSUFBUjs7QUFDQUksZ0JBQVNKLElBQVQ7O0FBQ0FLLGVBQVFMLElBQVI7O0FBQ0FNLHdCQUFpQk4sSUFBakI7O0FBRU8sSUFBTU8sVUFBVSw2REFDaEJDLDZCQURnQixTQUNJQywyQkFESixtQkFFakJYLFVBRmlCLGdDQUdMSixXQUFXLENBQUNDLEtBSFAsOEJBRzhCRSxRQUg5QiwwQkFJZEUsZUFBUVcsUUFBUixDQUFpQixDQUFqQixDQUpjLHVEQU1oQkYsNkJBTmdCLFNBTUlHLDRCQU5KLG1CQU9qQmIsVUFQaUIsZ0NBUUxKLFdBQVcsQ0FBQ0MsS0FSUCw4QkFROEJFLFFBUjlCLDBCQVNkSSxnQkFBU1MsUUFBVCxDQUFrQixDQUFsQixDQVRjLHVEQVdoQkYsNkJBWGdCLFNBV0lJLDhCQVhKLG1CQVlqQmQsVUFaaUIsZ0NBYUxKLFdBQVcsQ0FBQ0MsS0FiUCw4QkFhOEJFLFFBYjlCLDBCQWNkSyxrQkFBV1EsUUFBWCxDQUFvQixDQUFwQixDQWRjLHVEQWdCaEJGLDZCQWhCZ0IsU0FnQklLLDJCQWhCSixtQkFpQmpCZixVQWpCaUIsZ0NBa0JMSixXQUFXLENBQUNDLEtBbEJQLDhCQWtCOEJFLFFBbEI5QiwwQkFtQmRNLGVBQVFPLFFBQVIsQ0FBaUIsQ0FBakIsQ0FuQmMsdURBcUJoQkYsNkJBckJnQixTQXFCSU0sNEJBckJKLG1CQXNCakJoQixVQXRCaUIsZ0NBdUJMSixXQUFXLENBQUNDLEtBdkJQLDhCQXVCOEJFLFFBdkI5QiwwQkF3QmRPLGdCQUFTTSxRQUFULENBQWtCLENBQWxCLENBeEJjLHVEQTBCaEJGLDZCQTFCZ0IsU0EwQklPLDJCQTFCSixtQkEyQmpCakIsVUEzQmlCLGdDQTRCTEosV0FBVyxDQUFDQyxLQTVCUCw4QkE0QjhCRSxRQTVCOUIsMEJBNkJkUSxlQUFRSyxRQUFSLENBQWlCLENBQWpCLENBN0JjLHVEQStCaEJGLDZCQS9CZ0IsU0ErQklRLHFDQS9CSixtQkFnQ2pCbEIsVUFoQ2lCLGlDQWlDSkosV0FBVyxDQUFDQyxLQWpDUiw4QkFpQytCRSxRQWpDL0IsMkJBa0NiUyx3QkFBaUJJLFFBQWpCLENBQTBCLENBQTFCLENBbENhLHVEQW9DaEJPLDZCQXBDZ0IsU0FvQ0lSLDJCQXBDSixtQkFxQ2pCWCxVQXJDaUIsZ0NBc0NMSixXQUFXLENBQUNFLEtBdENQLDhCQXNDOEJDLFFBdEM5QiwwQkF1Q2RFLGVBQVFXLFFBQVIsQ0FBaUIsQ0FBakIsQ0F2Q2MsdURBeUNoQk8sNkJBekNnQixTQXlDSU4sNEJBekNKLG1CQTBDakJiLFVBMUNpQixnQ0EyQ0xKLFdBQVcsQ0FBQ0UsS0EzQ1AsOEJBMkM4QkMsUUEzQzlCLDBCQTRDZEksZ0JBQVNTLFFBQVQsQ0FBa0IsQ0FBbEIsQ0E1Q2MsdURBOENoQk8sNkJBOUNnQixTQThDSUwsOEJBOUNKLG1CQStDakJkLFVBL0NpQixnQ0FnRExKLFdBQVcsQ0FBQ0UsS0FoRFAsOEJBZ0Q4QkMsUUFoRDlCLDBCQWlEZEssa0JBQVdRLFFBQVgsQ0FBb0IsQ0FBcEIsQ0FqRGMsdURBbURoQk8sNkJBbkRnQixTQW1ESUosMkJBbkRKLG1CQW9EakJmLFVBcERpQixnQ0FxRExKLFdBQVcsQ0FBQ0UsS0FyRFAsOEJBcUQ4QkMsUUFyRDlCLDBCQXNEZE0sZUFBUU8sUUFBUixDQUFpQixDQUFqQixDQXREYyx1REF3RGhCTyw2QkF4RGdCLFNBd0RJSCw0QkF4REosbUJBeURqQmhCLFVBekRpQixnQ0EwRExKLFdBQVcsQ0FBQ0UsS0ExRFAsOEJBMEQ4QkMsUUExRDlCLDBCQTJEZE8sZ0JBQVNNLFFBQVQsQ0FBa0IsQ0FBbEIsQ0EzRGMsdURBNkRoQk8sNkJBN0RnQixTQTZESUYsMkJBN0RKLG1CQThEakJqQixVQTlEaUIsZ0NBK0RMSixXQUFXLENBQUNFLEtBL0RQLDhCQStEOEJDLFFBL0Q5QiwwQkFnRWRRLGVBQVFLLFFBQVIsQ0FBaUIsQ0FBakIsQ0FoRWMsdURBa0VoQk8sNkJBbEVnQixTQWtFSUQscUNBbEVKLG1CQW1FakJsQixVQW5FaUIsZ0NBb0VMSixXQUFXLENBQUNFLEtBcEVQLDhCQW9FOEJDLFFBcEU5QiwwQkFxRWRTLHdCQUFpQkksUUFBakIsQ0FBMEIsQ0FBMUIsQ0FyRWMsNEJBQWhCOztBQXlFQSxJQUFNUSxNQUFNLEdBQUc7QUFDbkJDLEVBQUFBLFFBQVEsRUFBRSxrQkFBQ0MsS0FBRDtBQUFBO0FBQUEsR0FEUztBQW9CbkJDLEVBQUFBLFdBQVcsRUFBRSxxQkFBQ0QsS0FBRDtBQUFBO0FBQUEsR0FwQk07QUFzQm5CRSxFQUFBQSxJQUFJLEVBQUUsY0FBQ0YsS0FBRDtBQUFBO0FBQUEsR0F0QmE7QUE0Qm5CRyxFQUFBQSxRQUFRLEVBQUUsa0JBQUNILEtBQUQ7QUFBQSxXQUFvQiwrREFBcEI7QUFBQSxHQTVCUztBQTZCbkJJLEVBQUFBLEtBQUssRUFBRSxlQUFDSixLQUFEO0FBQUEsV0FBb0IsK0RBQXBCO0FBQUEsR0E3Qlk7QUE4Qm5CSyxFQUFBQSxPQUFPLEVBQUUsaUJBQUNMLEtBQUQ7QUFBQSxXQUFvQiwrREFBcEI7QUFBQTtBQTlCVSxDQUFmOzs7QUFzQ0EsU0FBU00saUJBQVQsQ0FBMkJDLFFBQTNCLEVBQXNEQyxTQUF0RCxFQUF5RUMsS0FBekUsRUFBd0Y7QUFDNUYsTUFBTUMsSUFBSSxHQUFHSCxRQUFRLENBQUNJLEdBQVQsQ0FBYSxVQUFDQyxHQUFELEVBQVM7QUFDaEMsOEJBQW1CQSxHQUFHLENBQUNDLENBQXZCLGtCQUFnQ0QsR0FBRyxDQUFDRSxDQUFwQyxzQ0FBaUVMLEtBQWpFLGVBQTJFRyxHQUFHLENBQUNHLENBQS9FO0FBQ0YsR0FGWSxFQUVWQyxJQUZVLENBRUwsRUFGSyxDQUFiO0FBR0EsTUFBTUMsR0FBRywyRUFBb0VULFNBQXBFLHdCQUEyRkEsU0FBM0YseUJBQ0pFLElBREksZ0JBQVQ7QUFHQSxpREFBdUNRLGtCQUFrQixDQUFDRCxHQUFELENBQXpEO0FBQ0Y7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgUElFQ0VfQ09MT1JfQkxBQ0ssXG4gICBQSUVDRV9DT0xPUl9XSElURSxcbiAgIFBJRUNFX1RZUEVfQk9BVCxcbiAgIFBJRUNFX1RZUEVfVFJBTlNGT1JNX0ZJU0gsXG4gICBQSUVDRV9UWVBFX0dFTkVSQUwsXG4gICBQSUVDRV9UWVBFX1FVRUVOLFxuICAgUElFQ0VfVFlQRV9LSU5HLFxuICAgUElFQ0VfVFlQRV9IT1JTRSxcbiAgIFBJRUNFX1RZUEVfRklTSCxcbn0gZnJvbSAna2htZXItY2hlc3MnO1xuaW1wb3J0IHtcbiAgIGJvYXRTVkcsXG4gICBmaXNoU1ZHLFxuICAgZ2VuZXJhbFNWRyxcbiAgIGhvcnNlU1ZHLFxuICAga2luZ1NWRyxcbiAgIHF1ZWVuU1ZHLFxuICAgdHJhbnNmb3JtRmlzaFNWRyxcbn0gZnJvbSAnazR1cy1zaGFyZS90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBXT09EX0NPTE9SUyA9IHtcbiAgIFdISVRFOiAnI2ZmZmZmZicsXG4gICBCTEFDSzogJyM0MjIwMDcnLFxufTtcblxuY29uc3QgZmlsdGVySWQgPSAnZHJvcC1zaGFkb3cnO1xuY29uc3QgU1ZHX0ZJTFRFUiA9IGA8ZGVmcz5cbjxmaWx0ZXIgaWQ9XCIke2ZpbHRlcklkfVwiIGhlaWdodD1cIjEzMCVcIj5cbiAgPGZlR2F1c3NpYW5CbHVyIGluPVwiU291cmNlQWxwaGFcIiBzdGREZXZpYXRpb249XCI1XCIvPlxuICA8ZmVPZmZzZXQgZHg9XCI1XCIgZHk9XCI1XCIgcmVzdWx0PVwib2Zmc2V0Ymx1clwiLz5cbiAgPGZlTWVyZ2U+XG4gICAgPGZlTWVyZ2VOb2RlLz5cbiAgICA8ZmVNZXJnZU5vZGUgaW49XCJTb3VyY2VHcmFwaGljXCIvPlxuICA8L2ZlTWVyZ2U+XG48L2ZpbHRlcj5cbjwvZGVmcz5gO1xuXG5ib2F0U1ZHLmluaXQoKTtcbmhvcnNlU1ZHLmluaXQoKTtcbmdlbmVyYWxTVkcuaW5pdCgpO1xua2luZ1NWRy5pbml0KCk7XG5xdWVlblNWRy5pbml0KCk7XG5maXNoU1ZHLmluaXQoKTtcbnRyYW5zZm9ybUZpc2hTVkcuaW5pdCgpO1xuXG5leHBvcnQgY29uc3QgUElFQ0VTX1NWRyA9IHtcbiAgIFtgJHtQSUVDRV9DT0xPUl9XSElURX0ke1BJRUNFX1RZUEVfQk9BVH1gXTogYFxuICAgICR7U1ZHX0ZJTFRFUn1cbiAgICA8cGF0aCBmaWxsPVwiJHtXT09EX0NPTE9SUy5XSElURX1cIiBmaWx0ZXI9XCJ1cmwoIyR7ZmlsdGVySWR9KVwiXG4gICAgZD1cIiR7Ym9hdFNWRy5wYXRoRGF0YVswXX1cIiAvPlxuIGAsXG4gICBbYCR7UElFQ0VfQ09MT1JfV0hJVEV9JHtQSUVDRV9UWVBFX0hPUlNFfWBdOiBgXG4gICAgJHtTVkdfRklMVEVSfVxuICAgIDxwYXRoIGZpbGw9XCIke1dPT0RfQ09MT1JTLldISVRFfVwiIGZpbHRlcj1cInVybCgjJHtmaWx0ZXJJZH0pXCJcbiAgICBkPVwiJHtob3JzZVNWRy5wYXRoRGF0YVswXX1cIiAvPlxuIGAsXG4gICBbYCR7UElFQ0VfQ09MT1JfV0hJVEV9JHtQSUVDRV9UWVBFX0dFTkVSQUx9YF06IGBcbiAgICAke1NWR19GSUxURVJ9XG4gICAgPHBhdGggZmlsbD1cIiR7V09PRF9DT0xPUlMuV0hJVEV9XCIgZmlsdGVyPVwidXJsKCMke2ZpbHRlcklkfSlcIlxuICAgIGQ9XCIke2dlbmVyYWxTVkcucGF0aERhdGFbMF19XCIgLz5cbiBgLFxuICAgW2Ake1BJRUNFX0NPTE9SX1dISVRFfSR7UElFQ0VfVFlQRV9LSU5HfWBdOiBgXG4gICAgJHtTVkdfRklMVEVSfVxuICAgIDxwYXRoIGZpbGw9XCIke1dPT0RfQ09MT1JTLldISVRFfVwiIGZpbHRlcj1cInVybCgjJHtmaWx0ZXJJZH0pXCJcbiAgICBkPVwiJHtraW5nU1ZHLnBhdGhEYXRhWzBdfVwiIC8+XG4gYCxcbiAgIFtgJHtQSUVDRV9DT0xPUl9XSElURX0ke1BJRUNFX1RZUEVfUVVFRU59YF06IGBcbiAgICAke1NWR19GSUxURVJ9XG4gICAgPHBhdGggZmlsbD1cIiR7V09PRF9DT0xPUlMuV0hJVEV9XCIgZmlsdGVyPVwidXJsKCMke2ZpbHRlcklkfSlcIlxuICAgIGQ9XCIke3F1ZWVuU1ZHLnBhdGhEYXRhWzBdfVwiIC8+XG4gYCxcbiAgIFtgJHtQSUVDRV9DT0xPUl9XSElURX0ke1BJRUNFX1RZUEVfRklTSH1gXTogYFxuICAgICR7U1ZHX0ZJTFRFUn1cbiAgICA8cGF0aCBmaWxsPVwiJHtXT09EX0NPTE9SUy5XSElURX1cIiBmaWx0ZXI9XCJ1cmwoIyR7ZmlsdGVySWR9KVwiXG4gICAgZD1cIiR7ZmlzaFNWRy5wYXRoRGF0YVswXX1cIiAvPlxuIGAsXG4gICBbYCR7UElFQ0VfQ09MT1JfV0hJVEV9JHtQSUVDRV9UWVBFX1RSQU5TRk9STV9GSVNIfWBdOiBgXG4gICAgJHtTVkdfRklMVEVSfVxuICAgICA8cGF0aCBmaWxsPVwiJHtXT09EX0NPTE9SUy5XSElURX1cIiBmaWx0ZXI9XCJ1cmwoIyR7ZmlsdGVySWR9KVwiXG4gICAgIGQ9XCIke3RyYW5zZm9ybUZpc2hTVkcucGF0aERhdGFbMF19XCIgLz5cbiBgLFxuICAgW2Ake1BJRUNFX0NPTE9SX0JMQUNLfSR7UElFQ0VfVFlQRV9CT0FUfWBdOiBgXG4gICAgJHtTVkdfRklMVEVSfVxuICAgIDxwYXRoIGZpbGw9XCIke1dPT0RfQ09MT1JTLkJMQUNLfVwiIGZpbHRlcj1cInVybCgjJHtmaWx0ZXJJZH0pXCJcbiAgICBkPVwiJHtib2F0U1ZHLnBhdGhEYXRhWzBdfVwiIC8+XG4gYCxcbiAgIFtgJHtQSUVDRV9DT0xPUl9CTEFDS30ke1BJRUNFX1RZUEVfSE9SU0V9YF06IGBcbiAgICAke1NWR19GSUxURVJ9XG4gICAgPHBhdGggZmlsbD1cIiR7V09PRF9DT0xPUlMuQkxBQ0t9XCIgZmlsdGVyPVwidXJsKCMke2ZpbHRlcklkfSlcIlxuICAgIGQ9XCIke2hvcnNlU1ZHLnBhdGhEYXRhWzBdfVwiIC8+XG4gYCxcbiAgIFtgJHtQSUVDRV9DT0xPUl9CTEFDS30ke1BJRUNFX1RZUEVfR0VORVJBTH1gXTogYFxuICAgICR7U1ZHX0ZJTFRFUn1cbiAgICA8cGF0aCBmaWxsPVwiJHtXT09EX0NPTE9SUy5CTEFDS31cIiBmaWx0ZXI9XCJ1cmwoIyR7ZmlsdGVySWR9KVwiXG4gICAgZD1cIiR7Z2VuZXJhbFNWRy5wYXRoRGF0YVswXX1cIiAvPlxuIGAsXG4gICBbYCR7UElFQ0VfQ09MT1JfQkxBQ0t9JHtQSUVDRV9UWVBFX0tJTkd9YF06IGBcbiAgICAke1NWR19GSUxURVJ9XG4gICAgPHBhdGggZmlsbD1cIiR7V09PRF9DT0xPUlMuQkxBQ0t9XCIgZmlsdGVyPVwidXJsKCMke2ZpbHRlcklkfSlcIlxuICAgIGQ9XCIke2tpbmdTVkcucGF0aERhdGFbMF19XCIgLz5cbiBgLFxuICAgW2Ake1BJRUNFX0NPTE9SX0JMQUNLfSR7UElFQ0VfVFlQRV9RVUVFTn1gXTogYFxuICAgICR7U1ZHX0ZJTFRFUn1cbiAgICA8cGF0aCBmaWxsPVwiJHtXT09EX0NPTE9SUy5CTEFDS31cIiBmaWx0ZXI9XCJ1cmwoIyR7ZmlsdGVySWR9KVwiXG4gICAgZD1cIiR7cXVlZW5TVkcucGF0aERhdGFbMF19XCIgLz5cbiBgLFxuICAgW2Ake1BJRUNFX0NPTE9SX0JMQUNLfSR7UElFQ0VfVFlQRV9GSVNIfWBdOiBgXG4gICAgJHtTVkdfRklMVEVSfVxuICAgIDxwYXRoIGZpbGw9XCIke1dPT0RfQ09MT1JTLkJMQUNLfVwiIGZpbHRlcj1cInVybCgjJHtmaWx0ZXJJZH0pXCJcbiAgICBkPVwiJHtmaXNoU1ZHLnBhdGhEYXRhWzBdfVwiIC8+XG4gYCxcbiAgIFtgJHtQSUVDRV9DT0xPUl9CTEFDS30ke1BJRUNFX1RZUEVfVFJBTlNGT1JNX0ZJU0h9YF06IGBcbiAgICAke1NWR19GSUxURVJ9XG4gICAgPHBhdGggZmlsbD1cIiR7V09PRF9DT0xPUlMuQkxBQ0t9XCIgZmlsdGVyPVwidXJsKCMke2ZpbHRlcklkfSlcIlxuICAgIGQ9XCIke3RyYW5zZm9ybUZpc2hTVkcucGF0aERhdGFbMF19XCIgLz5cbiBgLFxufTtcblxuZXhwb3J0IGNvbnN0IHN2Z0NTUyA9IHtcbiAgIGF0dGFja2VkOiAoY29sb3I/OiBzdHJpbmcpID0+IGBwYXRoIHtcbiAgICAgIHN0cm9rZTogcmVkO1xuICAgICAgc3Ryb2tlLXdpZHRoOiAxcHg7XG4gICAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xuICAgICAgYW5pbWF0aW9uLW5hbWU6IGF0dGFja2luZztcbiAgICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMXM7XG4gICAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTtcbiAgIH1cbiAgIEBrZXlmcmFtZXMgYXR0YWNraW5nIHtcbiAgICAgIDAlIHtcbiAgICAgICAgIHN0cm9rZS13aWR0aDogMjBweDtcbiAgICAgIH1cbiAgICAgIDUwJSB7XG4gICAgICAgICBzdHJva2Utd2lkdGg6IDFweDtcbiAgICAgIH1cbiAgICAgIDEwMCUge1xuICAgICAgICAgc3Ryb2tlLXdpZHRoOiAyMHB4O1xuICAgICAgfVxuICAgfWAsXG4gICBub3RBdHRhY2tlZDogKGNvbG9yPzogc3RyaW5nKSA9PiBgcGF0aCB7XG4gICB9YCxcbiAgIHR1cm46IChjb2xvcj86IHN0cmluZykgPT4gYHBhdGgge1xuICAgICAgc3Ryb2tlOiAjM2Q4YTM2NWY7XG4gICAgICBzdHJva2Utd2lkdGg6IDEwcHg7XG4gICAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xuICAgfVxuICAgYCxcbiAgIHNlbGVjdGVkOiAoY29sb3I/OiBzdHJpbmcpID0+ICdiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoI2ZmMDBmNTc3LCAjM2Q4YTM2NzcpICFpbXBvcnRhbnQ7JyxcbiAgIG1vdmVkOiAoY29sb3I/OiBzdHJpbmcpID0+ICdiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoI2MwYWVlZTk5LCAjOTRlOWQ3ODgpICFpbXBvcnRhbnQ7JyxcbiAgIGNhbk1vdmU6IChjb2xvcj86IHN0cmluZykgPT4gJ2JhY2tncm91bmQ6IHJhZGlhbC1ncmFkaWVudCgjZmYwMGY1MDAsICMzZDhhMzY3NykgIWltcG9ydGFudDsnLFxufTtcblxudHlwZSBOb3RlVGV4dCA9IHtcbiAgIHg6IG51bWJlcixcbiAgIHk6IG51bWJlcixcbiAgIHQ6IHN0cmluZ1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdlbkJhY2tncm91bmROb3RlKHRPYmplY3RzOiBBcnJheTxOb3RlVGV4dD4sIGNlbGxXaWR0aDogbnVtYmVyLCBmU2l6ZTogbnVtYmVyKSB7XG4gICBjb25zdCB0ZXh0ID0gdE9iamVjdHMubWFwKChvYmopID0+IHtcbiAgICAgIHJldHVybiBgPHRleHQgeD0nJHtvYmoueH0nIHk9JyR7b2JqLnl9JyBmaWxsPSdncmV5JyBmb250LXNpemU9JyR7ZlNpemV9Jz4ke29iai50fTwvdGV4dD5gO1xuICAgfSkuam9pbignJyk7XG4gICBjb25zdCBzdmcgPSBgPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZlcnNpb249JzEuMScgaGVpZ2h0PScke2NlbGxXaWR0aH1weCcgd2lkdGg9JyR7Y2VsbFdpZHRofXB4Jz5cbiAgICAgICR7dGV4dH1cbiAgIDwvc3ZnPmA7XG4gICByZXR1cm4gYHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2Zyl9XCIpYDtcbn1cblxuLypcbiAqIENvcHlyaWdodCAoYykgMjAyMSwgSzR1c1xuICogQXV0aG9yOiBSYWtzYSBFbmcgPGVuZy5yYWtzYUBnbWFpbC5jb20+XG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKlxuICogMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAqICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICpcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgJ0FTIElTJ1xuICogQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuICogSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0VcbiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRVxuICogTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuICogQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0ZcbiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTU1xuICogSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbiAqIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4gKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKlxuICoqLyJdfQ==