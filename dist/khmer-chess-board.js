!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(function(){return(()=>{"use strict";var e={497:(e,t,n)=>{function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(878).Graveyard,a=n(352),h=a.addCss,u=a.drawBoard,l=a.BORDER_WIDTH,v=a.MIN_SQUARE_WIDTH,E=a.TD_GRAVEYARD_NUMBER,f=n(306),g=n(226),d=g.KhmerChess,P=g.Piece,p=g.boardHelper,C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),o(this,"options",{width:500,container:null}),o(this,"squares",[]),o(this,"squaresIndex",{}),o(this,"graveyard",new s),o(this,"khmerChess",new d),!t.container)throw new Error("Container is required!");this.options.container=t.container;var n=(p.ROW_NUMBER-1)*l+p.ROW_NUMBER*v;if(t.width<n)throw new Error("Board width must more than ".concat(n));t.width&&(this.options.width=t.width),h.call(this),u.call(this),this.renderKhmerChess()}var t,n;return t=e,(n=[{key:"loadRen",value:function(e){this.khmerChess.load(e),this.renderKhmerChess()}},{key:"squareWidth",value:function(){return(this.options.width-(p.ROW_NUMBER-1)*l)/p.ROW_NUMBER}},{key:"renderKhmerChess",value:function(){for(var e=this,t=0;t<E;t++)this.graveyard.get(t).removePiece();this.khmerChess.graveyard().forEach((function(t,n){e.graveyard.get(n).setPiece(new P(t.type,t.color))})),this.khmerChess.board().forEach((function(t,n){t.forEach((function(t,i){var r=e.squares[n*p.ROW_NUMBER+i];r.removePiece(),t&&r.setPiece(new P(t.type,t.color))}))}))}}])&&c(t.prototype,n),e}();o(C,"name",f.name),o(C,"version",f.version),o(C,"BORDER_WIDTH",void 0),o(C,"MIN_SQUARE_WIDTH",void 0),o(C,"TD_GRAVEYARD_NUMBER",void 0),o(C,"TABLE_CLASS",void 0),console.log(d.name,d.version),console.log(C.name,C.version),e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({KhmerChessBoard:C,Graveyard:s},g)},878:e=>{function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(t="squares")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}var n,i;return n=e,(i=[{key:"push",value:function(e){this.squares.push(e)}},{key:"get",value:function(e){return this.squares[e]}}])&&t(n.prototype,i),e}();e.exports={Graveyard:n}},466:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(226).boardHelper,o=function(){function e(t,n,i,c,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"x",0),r(this,"y",0),r(this,"isGraveyard",!1),r(this,"container",document.createElement("td")),r(this,"piece",null),this.x=t,this.y=n,this.container=i,this.setPiece(c),this.isGraveyard=o}var t,n;return t=e,(n=[{key:"h",get:function(){return this.isGraveyard?"".concat(this.x,"x"):c.HORIZONTAL_CODE_LETTERS[this.x]}},{key:"v",get:function(){return this.y+1}},{key:"index",get:function(){return this.y*c.ROW_NUMBER+this.x}},{key:"indexCode",get:function(){return"".concat(this.h).concat(this.v)}},{key:"removePiece",value:function(){this.setPiece(null)}},{key:"setPiece",value:function(e){this.piece=e,this.drawPiece()}},{key:"drawPiece",value:function(){this.container.classList.remove("piece"),this.piece&&(this.container.classList.add("piece"),this.container.classList.add("type-".concat(this.piece.type)),this.container.classList.add("color-".concat(this.piece.color)))}}])&&i(t.prototype,n),e}();e.exports={SquarePiece:o}},352:(e,t,n)=>{var i=n(226).boardHelper,r=n(466).SquarePiece,c=n(734).PIECES_SVG,o="khmer-chess-board";e.exports={addCss:function(){var e=this.options.width,t=this.squareWidth(),n=e/12,r="\n      table.".concat(o,"  {\n        table-layout: fixed;\n        border-collapse: collapse;\n        border-spacing: 0px;\n        width: ").concat(e,"px;\n        text-align: center;\n        border: 0px;\n        padding: 0px;\n        margin: auto;\n        background-color: white;\n      }\n      table.").concat(o," tr {\n        width: ").concat(e,"px;\n        height: ").concat(t,"px;\n      }\n      table.").concat(o," td {\n        user-select: none;\n        background-color: #f4d1a6;\n        border: 1px solid white;\n        padding: 0px;\n        margin: 0px;\n        max-width: ").concat(t,"px;\n        max-height: ").concat(t,"px;\n      }\n      table.").concat(o," td, table.").concat(o," td::before {\n        font-size: ").concat(n,"px;\n      }\n      table.").concat(o," td.piece::before {\n        width: ").concat(t,"px;\n        height: ").concat(t,"px;\n        background-size: ").concat(t,"px ").concat(t,"px;\n        display: block;\n        content: ' ';\n      }\n    ");i.getColorArray().forEach((function(e){i.getPieceCharArray().forEach((function(t){r+="\n            table.".concat(o," td.piece.type-").concat(t,".color-").concat(e,"::before {\n                background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(c[e+t]),"');\n            }\n              ")}))}));var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");s.appendChild(a),a.type="text/css",a.styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r))},drawBoard:function(){for(var e=this,t=this.squareWidth(),n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.options.container,n=document.createElement("table");return n.classList.add(o),t.appendChild(n),n},c=function(e){var t=document.createElement("tbody");return e.appendChild(t),t},s=function(e){var t=document.createElement("tr");return e.appendChild(t),t},a=function(e){var t=document.createElement("td");return e.appendChild(t),t},h=n(),u=c(h),l=0;l<i.ROW_NUMBER;l++)for(var v=s(u),E=0;E<i.ROW_NUMBER;E++){var f=a(v);f.style.cursor="pointer";var g=new r(E,i.ROW_NUMBER-l-1,f,null);this.squaresIndex[g.indexCode]=g}Object.keys(this.squaresIndex).forEach((function(t){e.squares[e.squaresIndex[t].index]=e.squaresIndex[t]}));var d=t+10;h.style.height+=d;var P=s(u);P.style.height=d;var p=a(P);p.addEventListener("mousewheel",(function(e){this.scrollLeft-=e.wheelDelta,e.preventDefault()}),!1),p.style.width=this.options.width,p.style.height=d,p.style.overflowX="scroll",p.style.overflowY="hidden",p.colSpan=8,p.style.padding=8*this.options.width/600,p.style.boxShadow="inset 0 0 ".concat(this.options.width/60,"px #000000");var C=n(p),_=29+30*t;C.style.width=_,C.style.height=t;var w=s(c(C));w.style.width=_;for(var y=0;y<30;y++){var b=a(w),I=new r(y,0,b,null,!0);this.graveyard.push(I)}var O=15*this.options.width/600,m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i='url("data:image/svg+xml;utf8,';i+="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='".concat(t,"px' width='").concat(t,"px'>"),n.forEach((function(e){i+="<text x='".concat(e.x,"' y='").concat(e.y,"' "),i+="fill='white' font-size='".concat(O,"'>").concat(e.t,"</text>")})),i+='</svg>")',e.style.backgroundImage=i,e.style.backgroundRepeat="no-repeat"},k=this.squaresIndex.a1;m(k.container,[{x:t/2-t/10,y:t,t:"a"},{x:0,y:t/2+t/10,t:"1"}]),k.container.style.backgroundRepeat="no-repeat";for(var T=1;T<i.ROW_NUMBER;T++){var x=i.HORIZONTAL_CODE_LETTERS[T];m(this.squaresIndex["".concat(x,"1")].container,[{x:t/2-t/10,y:t,t:x}])}for(var R=1;R<i.ROW_NUMBER;R++)m(this.squaresIndex["a".concat(R+1)].container,[{x:0,y:t/2+t/10,t:R+1}]);for(var M=0;M<30;M++)m(this.graveyard.get(M).container,[{x:t/2-t/10,y:t,t:M+1}])},BORDER_WIDTH:1,MIN_SQUARE_WIDTH:5,TD_GRAVEYARD_NUMBER:30,TABLE_CLASS:o}},734:(e,t,n)=>{var i;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(226).boardHelper,o="#ffffff",s="#422007",a="drop-shadow",h='<defs>\n<filter id="'.concat(a,'" height="130%">\n  <feGaussianBlur in="SourceAlpha" stdDeviation="5"/> \n  <feOffset dx="5" dy="5" result="offsetblur"/> \n  <feMerge> \n    <feMergeNode/>\n    <feMergeNode in="SourceGraphic"/> \n  </feMerge>\n</filter>\n</defs>'),u=(r(i={},"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_TOUK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_SES),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_KOL),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_SDECH),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_NEANG),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_TREY),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_WHITE).concat(c.PIECE_TYPE_BORK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(o,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_TOUK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_SES),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_KOL),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_SDECH),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_NEANG),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_TREY),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),r(i,"".concat(c.PIECE_COLOR_BLACK).concat(c.PIECE_TYPE_BORK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(h,'\n    <path fill="').concat(s,'" filter="url(#').concat(a,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),i);e.exports={PIECES_SVG:u}},226:(e,t,n)=>{function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(698).KhmerChess,s=n(516),a=n(643),h=n(960),u=n(952);e.exports=r(r({KhmerChess:o,boardHelper:s},a),{},{renHelper:h,KPGN:u})},952:(e,t,n)=>{function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(643).REN,a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(this,e),o(this,"name",""),o(this,"id",""),this.id=t,this.name=n}return c(e,[{key:"toJson",value:function(){return{id:this.id,name:this.name}}}]),e}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e),o(this,"win",0),o(this,"draw",0),o(this,"lost",0),this.win=t,this.draw=n,this.lost=r}return c(e,[{key:"toJson",value:function(){return{win:this.win,draw:this.draw,lost:this.lost}}}]),e}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i(this,e),o(this,"from",""),o(this,"to",""),o(this,"jump",!1),o(this,"capture",""),this.from=t,this.to=n,this.jump=r,this.capture=c}return c(e,[{key:"toJson",value:function(){return{from:this.from,to:this.to,jump:this.jump,capture:this.capture}}}]),e}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e),o(this,"totalSecond",0),o(this,"currentWhite",0),o(this,"currentBlack",0),this.totalSecond=t,this.currentWhite=n,this.currentBlack=r}return c(e,[{key:"toJson",value:function(){return{totalSecond:this.totalSecond,currentWhite:this.currentWhite,currentBlack:this.currentBlack}}}]),e}(),v=function(){function e(t){i(this,e),o(this,"event",""),o(this,"date",""),o(this,"location",""),o(this,"players",{white:new a,black:new a}),o(this,"result",{last:{whiteWin:!1,blackWin:!1},white:new h}),o(this,"moves",[new u]),o(this,"ren",new s),o(this,"timer",new l)}return c(e,[{key:"toJson",value:function(){return{event:this.event,date:this.date,location:this.location,players:{white:this.players.white.toJson(),black:this.players.black.toJson()},result:{last:{whiteWin:this.result.last.whiteWin,blackWin:this.result.last.blackWin},white:this.result.white.toJson()},moves:this.moves.map((function(e){return e.toJson()})),ren:this.ren.toString(),timer:this.timer.toJson()}}}]),e}();e.exports={KPGN:v,Player:a,Result:h,Move:u,Timer:l}},698:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(952).KPGN,o=n(19),s=n(960),a=n(705),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"moveHelper",new o),r(this,"renInstance",s.toRen()),r(this,"kpgnInstance",new c),this.renInstance=s.toRen(t)}var t,n;return t=e,(n=[{key:"load",value:function(e){this.renInstance=s.toRen(e)}},{key:"reset",value:function(){this.renInstance=s.toRen()}},{key:"moves",value:function(){return[]}},{key:"in_check",value:function(){return null}},{key:"in_checkmate",value:function(){return null}},{key:"in_stalemate",value:function(){return null}},{key:"in_draw",value:function(){return!1}},{key:"in_draw_count",value:function(){return null}},{key:"game_over",value:function(){return!1}},{key:"validate_ren",value:function(e){try{return s.toRen(e),{valid:!0,error_number:0,error:"No errors."}}catch(e){return{valid:!1,error_number:1,error:e.message}}}},{key:"ren",value:function(){return this.renInstance.toString()}},{key:"board",value:function(){return this.renInstance.board.toMultiArray()}},{key:"graveyard",value:function(){return this.renInstance.graveyard.pieces}},{key:"kpgn",value:function(){return this.kpgnInstance.toJson()}},{key:"load_kpgn",value:function(e,t){this.kpgnInstance=new c(e)}},{key:"ascii",value:function(){var e=this.renInstance.board.toMultiArray(),t=e.reduce((function(t,n,i){var r=n.map((function(e){return" ".concat(e?e.toString():" "," ")})).join("┃"),c=i==e.length-1?"┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛":"┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫";return t+"\n".concat(8-i," ┃").concat(r,"┃\n  ").concat(c)}),"  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓"),n=this.renInstance.graveyard.pieces.map((function(){return"━━━"})).join("┳"),i=this.renInstance.graveyard.pieces.map((function(e){return" ".concat(e?e.toString():" "," ")})).join("┃"),r=this.renInstance.graveyard.pieces.map((function(){return"━━━"})).join("┻"),c="  ┏".concat(n,"┓\n  ┃").concat(i,"┃\n  ┗").concat(r,"┛");return"".concat(t,"\n    a   b   c   d   e   f   g   h\n").concat(c)}},{key:"turn",value:function(){this.renInstance.turn}},{key:"move",value:function(e){}},{key:"undo",value:function(){return!1}},{key:"clear",value:function(){this.renInstance=s.toRen("4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB")}},{key:"put",value:function(e,t){return null}},{key:"get",value:function(e){return null}},{key:"remove",value:function(e){return null}},{key:"history",value:function(){return this.kpgnInstance.moves}},{key:"addUpdateRenderEventListener",value:function(e){}},{key:"removeUpdateRenderEventListener",value:function(e){}}])&&i(t.prototype,n),e}();r(h,"name",a.name),r(h,"version",a.version),e.exports={KhmerChess:h}},643:(e,t,n)=>{function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(516).PIECE_TYPE_BORK,a=n(516),h=n(444),u="bhgqkghb/8/ffffffff/8/8/FFFFFFFF/8/BHGKQGHB",l="-",v=function(){function e(t,n){i(this,e),o(this,"type",a.PIECE_TYPE_TREY),o(this,"color",a.PIECE_COLOR_WHITE),h.isUndefined(n)&&(h.isUndefined(t)&&(t=a.toWhitePiece(a.PIECE_TYPE_TREY)),n=h.isUpperCase(t)?a.PIECE_COLOR_WHITE:a.PIECE_COLOR_BLACK,t=t.toLowerCase()),this.type=t,this.color=n}return c(e,[{key:"pCode",get:function(){return this.color==a.PIECE_COLOR_WHITE?a.toWhitePiece(this.type):this.type}},{key:"toOrigin",value:function(){return this.type==s?new e(this.color,a.PIECE_TYPE_TREY):this}},{key:"toString",value:function(){var e=this.type;return a.isWhite(this.color)&&(e=a.toWhitePiece(e)),e}}]),e}(),E=function(){function e(t,n,r){i(this,e),o(this,"h","a"),o(this,"v",1),o(this,"x",0),o(this,"y",0),o(this,"p",new v),this.p=t,h.isUndefined(r)&&(r=n.v,n=n.h),this.h=n,this.v=r,this.x=a.HORIZONTAL_CODE_LETTERS.indexOf(this.h),this.y=this.v-1}return c(e,[{key:"toString",value:function(){return"".concat(this.toPString()).concat(this.h).concat(this.v)}},{key:"toPString",value:function(){return h.isNull(this.p)?a.EMPTY_PIECE:this.p.toString()}}]),e}(),f=function(){function e(t){i(this,e),o(this,"poses",Array.from({length:a.getSubBoardNumber()},(function(e,t){var n=a.numToCodeP(t);return new E(null,n)}))),h.isUndefined(t)&&(t=u);var n=this.extract(t).replace(/\//g,"");if(n.length<a.getSubBoardNumber()||!a.isValidPiecesString(n))throw new Error("Invalid board string ".concat(t));this.poses=n.split("").map((function(e,t){var n=a.numToCodeP(t);return new E(e==a.EMPTY_PIECE?null:new v(e),n)}))}return c(e,[{key:"toMultiArray",value:function(){var e=[[],[],[],[],[],[],[],[]];return this.poses.forEach((function(t){e[t.y][t.x]=t.p})),e}},{key:"compress",value:function(e){var t=new RegExp("(\\".concat(a.EMPTY_PIECE,"+)"),"g");return e.replace(t,(function(e){return e.length}))}},{key:"extract",value:function(e){return e.replace(/(\d+)/g,(function(e){return Array.from({length:e},(function(){return a.EMPTY_PIECE})).join("")}))}},{key:"toStringFull",value:function(){return this.poses.map((function(e,t){var n=e.toPString();return t&&t%8==0&&t!=a.getSubBoardNumber()?"".concat(a.BOARD_SEPARATOR).concat(n):n})).join("")}},{key:"toString",value:function(){var e=this.toStringFull();return this.compress(e)}}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,e),o(this,"whiteKing",!1),o(this,"whiteQueen",!1),o(this,"blackKing",!1),o(this,"blackQueen",!1);var n=a;this.whiteKing=!!~t.indexOf(n.toWhitePiece(n.PIECE_TYPE_SDECH)),this.whiteQueen=!!~t.indexOf(n.toWhitePiece(n.PIECE_TYPE_NEANG)),this.blackKing=!!~t.indexOf(n.PIECE_TYPE_SDECH),this.blackQueen=!!~t.indexOf(n.PIECE_TYPE_NEANG)}return c(e,[{key:"toString",value:function(){var e="".concat(this.whiteKing?a.toWhitePiece(a.PIECE_TYPE_SDECH):l);return e+="".concat(this.whiteQueen?a.toWhitePiece(a.PIECE_TYPE_NEANG):l),(e+="".concat(this.blackKing?a.PIECE_TYPE_SDECH:l))+"".concat(this.blackQueen?a.PIECE_TYPE_NEANG:l)}}]),e}(),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,e),o(this,"whiteKing",!1),o(this,"blackKing",!1);var n=a;this.whiteKing=!!~t.indexOf(n.toWhitePiece(n.PIECE_TYPE_SDECH)),this.blackKing=!!~t.indexOf(n.PIECE_TYPE_SDECH)}return c(e,[{key:"toString",value:function(){return"".concat(this.whiteKing?a.toWhitePiece(a.PIECE_TYPE_SDECH):l)+"".concat(this.blackKing?a.PIECE_TYPE_SDECH:l)}}]),e}(),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,e),o(this,"white",null),o(this,"black",null);var n=t.split(".");if(this.white=h.isStringNumber(n[0])?Number(n[0]):null,this.black=h.isStringNumber(n[1])?Number(n[1]):null,!h.isNull(this.white)&&!h.isNull(this.white))throw new Error("Invalid countdown string ".concat(t))}return c(e,[{key:"toString",value:function(){return"".concat(h.isNull(this.white)?l:this.white)+".".concat(h.isNull(this.black)?l:this.black)}}]),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i(this,e),o(this,"pieces",[]),t.length>30||!a.isValidPiecesString(t,!0))throw new Error("Invalid graveyard string ".concat(t));this.pieces=t.split("").map((function(e,n){var i=new v(e);if(i.type==a.PIECE_TYPE_SDECH)throw new Error("King cannot die graveyard:".concat(t));return i}))}return c(e,[{key:"toString",value:function(){return this.pieces.map((function(e){return e.toString()})).join("")}}]),e}(),C=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.PIECE_COLOR_WHITE,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0;i(this,e),o(this,"board",new f),o(this,"turn",a.PIECE_COLOR_WHITE),o(this,"kqMoved",new g),o(this,"kAttacked",new d),o(this,"countdown",new P),o(this,"graveyard",new p),this.board=new f(t),this.turn=n,this.kqMoved=new g(r),this.kqMoved=new d(c),this.countdown=new P(s),this.graveyard=new p(h);var u=this.isInvalidPieceCount();if(u)throw new Error("Invalid piece string board:".concat(t,", graveyard:").concat(h,", count:").concat(u))}return c(e,[{key:"isInvalidPieceCount",value:function(){var e=this.board.poses.map((function(e){return e.p})).filter((function(e){return!h.isNull(e)})).concat(this.graveyard.pieces).map((function(e){return e.toOrigin()})).reduce((function(e,t){return e[t.toString()]=e[t.toString()]||0,e[t.toString()]++,e}),{}),t=Object.keys(e).map((function(t){return"".concat(t).concat(e[t])})).sort().join("");return"B2F8G2H2K1Q1b2f8g2h2k1q1"!=t&&t}},{key:"toString",value:function(){var e=this.board.toString();return e+=" ".concat(this.turn.toString()),e+=" ".concat(this.kqMoved.toString()),e+=" ".concat(this.kAttacked.toString()),(e+=" ".concat(this.countdown.toString()))+" ".concat(this.graveyard.toString())}}]),e}();e.exports={Piece:v,Pos:E,Board:f,KqMoved:g,CountDown:P,Graveyard:p,REN:C,DEFAULT_BOARD_STR:u}},516:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(444),a=n(349),h=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=i,this.height=r}var t,n;return t=e,(n=[{key:"isContainsPoint",value:function(e){var t=e.x,n=e.y;return this.x<=t&&this.x+this.width>=t&&this.y<=n&&this.y+this.height>=n}}])&&o(t.prototype,n),e}(),u=null,l={HORIZONTAL_CODE_LETTERS:"abcdefgh",PIECE_COLOR_WHITE:"w",PIECE_COLOR_BLACK:"b",PIECE_TYPE_TOUK:"b",PIECE_TYPE_SES:"h",PIECE_TYPE_KOL:"g",PIECE_TYPE_SDECH:"k",PIECE_TYPE_NEANG:"q",PIECE_TYPE_TREY:"f",PIECE_TYPE_BORK:"t",EMPTY_PIECE:".",BOARD_SEPARATOR:"/",ROW_NUMBER:8,ROW_FIRST_INDEX:0,ROW_LAST_INDEX:7,mask:null,getPieceCharArray:function(){return[this.PIECE_TYPE_TOUK,this.PIECE_TYPE_SES,this.PIECE_TYPE_KOL,this.PIECE_TYPE_SDECH,this.PIECE_TYPE_NEANG,this.PIECE_TYPE_TREY,this.PIECE_TYPE_BORK]},getColorArray:function(){return[this.PIECE_COLOR_WHITE,this.PIECE_COLOR_BLACK]},isValidPiecesString:function(e,t){var n=this;s.isNull(u)&&(u=[].concat(r(this.getPieceCharArray()),r(this.getPieceCharArray().map((function(e){return n.toWhitePiece(e)}))),[this.EMPTY_PIECE,this.BOARD_SEPARATOR]));var i=t?u.filter((function(e){return!~[n.EMPTY_PIECE,n.BOARD_SEPARATOR].indexOf(e)})):u;return!e.split("").some((function(e){return!~i.indexOf(e)}))},toWhitePiece:function(e){return e.toUpperCase()},isValidPosXY:function(e,t){return!s.isUndefined(e)&&(s.isUndefined(t)||(e=this.p(e,t)),!s.isUndefined(e.x)&&!s.isUndefined(e.y)&&this.rect(0,0,this.ROW_LAST_INDEX,this.ROW_LAST_INDEX).isContainsPoint(e))},isValidPiece:function(e){return e!=l.EMPTY_PIECE},isWhite:function(e){return e===l.PIECE_COLOR_WHITE},isBlack:function(e){return e===l.PIECE_COLOR_BLACK},codeP:function(e,t){return{h:e,v:t}},p:function(e,t){return{x:e,y:t}},res:function(e,t){return{width:e,height:t}},rect:function(e,t,n,i){return new h(e,t,n,i)},getSubBoardNumber:function(){return l.ROW_NUMBER*l.ROW_NUMBER},nerdPosToXY:function(e){if(s.isNumber(e.x)&&s.isNumber(e.y))return e;if(s.isNumber(e)){var t=e%this.ROW_NUMBER,n=Math.floor(e/this.ROW_NUMBER);return this.p(t,n)}return null},nerdXyToPos:function(e,t){return s.isUndefined(t)?e.x+e.y*this.ROW_NUMBER:e+t*this.ROW_NUMBER},isPosInBoard:function(e){return s.isNumber(e)&&e>=0&&e<=this.getSubBoardNumber()-1},getCharPieceFromString:function(e,t){return this.isPosInBoard(t)&&e.length===this.getSubBoardNumber()?e.charAt(t):this.EMPTY_PIECE},getPieceProperties:function(e){var t=this.pieceHash[e];return{color:t?t[0]:this.PIECE_COLOR_EMPTY,type:t?t[1]:this.EMPTY_PIECE}},getCharPieceInPos:function(e,t){return this.getCharPieceFromString(t,e)},getPieceInPos:function(e,t,n){s.isNumber(t)?e=this.nerdXyToPos(e,t):s.isString(t)&&(n=t);var i=this.getCharPieceInPos(e,n),r=this.PIECE_COLOR_WHITE,c=this.PIECE_TYPE_TREY;if(this.isValidPiece(i)){var o=this.getPieceProperties(i);r=o.color,c=o.type}return{isValidPiece:this.isValidPiece(i),color:r,type:c}},convertMask:function(e,t,n){var i=this.isWhite(n)?1:-1;return t=this.nerdPosToXY(t),e.x=e.x*i+t.x,e.y=e.y*i+t.y,this.isValidPosXY(e)?this.nerdXyToPos(e):null},getPieceCanMovePoses:function(e,t,n){var i=this,r=[];return this.mask=this.mask||a(this),this.mask[e].forEach((function(e){var c=i.convertMask(i.p(e[0],e[1]),t,n);s.isNull(c)||r.push(c)})),r},getPieceCanMovePosesValid:function(e,t,n,i){for(var r,c,o=this.getPieceCanMovePoses(e,t,n),a=[],h=o.length,u=this.nerdPosToXY(t),l=0;l<h;l++){if(r=this.nerdPosToXY(o[l]),(c=this.getPieceInPos(r.x,r.y,i)).isValidPiece?(n===c.color||e===this.PIECE_TYPE_TREY&&r.x===u.x)&&(r=null):e===this.PIECE_TYPE_TREY&&r.x!=u.x&&(r=null),!s.isNull(r)&&e===this.PIECE_TYPE_TOUK){var v=u.x,E=u.y,f=void 0,g=void 0;if(r.x===u.x){for(f=Math.abs(r.y-u.y),g=u.y<r.y?1:-1;--f>0;)if(this.getPieceInPos(v,E+g*f,i).isValidPiece){r=null;break}}else if(r.y===u.y)for(f=Math.abs(r.x-u.x),g=u.x<r.x?1:-1;--f>0;)if(this.getPieceInPos(v+g*f,E,i).isValidPiece){r=null;break}}s.isNull(r)||a.push(o[l])}return a},replacePiecesString:function(e,t,n){return e.substring(0,n)+t+e.substring(n+1)},injectPiece:function(e,t,n){var i=e.charAt(t);return this.isCharPiecesInBoard(i,e)?(e=this.replacePiecesString(e,this.EMPTY_PIECE,t),e=this.replacePiecesString(e,i,n)):null},getPieceCode:function(e,t){var n=e+t;for(var i in this.pieceHash)if(n===this.pieceHash[i])return i;return this.EMPTY_PIECE},getKingWillInDanger:function(e,t){for(var n,i,r,c=t.indexOf(this.getPieceCode(e,this.PIECE_TYPE_SDECH)),o=t.length,s=0;s<o;s++)if((i=this.getPieceInPos(s,t)).isValidPiece&&i.color!=e&&i.type===this.PIECE_TYPE_TOUK)for(n=this.getPieceCanMovePoses(i.type,s,i.color,t),r=0;r<n.length;r++)if(n[r]===c)return[this.numToCode(s),this.numToCode(c)];return null},getKingInDanger:function(e,t){for(var n,i,r,c=t.indexOf(this.getPieceCode(e,this.PIECE_TYPE_SDECH)),o=t.length,s=0;s<o;s++)if((i=this.getPieceInPos(s,t)).isValidPiece&&i.color!=e)for(n=this.getPieceCanMovePosesValid(i.type,s,i.color,t),r=0;r<n.length;r++)if(n[r]===c)return[this.numToCode(s),this.numToCode(c)];return null},numToCodeP:function(e){return this.codeP(this.HORIZONTAL_CODE_LETTERS[e%8],1+(e/8|0))},numToCode:function(e){var t=this.numToCodeP(e);return"".concat(t.h).concat(t.v)},generatePosesCanMove:function(e,t,n,i,r){var c,o=this.getPieceCanMovePosesValid(e,t,n,i),a=this.isHaveCaptured(i);e===this.PIECE_TYPE_SDECH?a||r||((c=this.convertMask(this.p(2,1),t,n))&&!this.getPieceInPos(c,i).isValidPiece&&o.push(c),(c=this.convertMask(this.p(-2,1),t,n))&&!this.getPieceInPos(c,i).isValidPiece&&o.push(c)):e===this.PIECE_TYPE_NEANG&&(a||r||(c=this.convertMask(this.p(-0,2),t,n))&&!this.getPieceInPos(c,i).isValidPiece&&o.push(c));for(var h,u=o.length,l=[],v=0;v<u;v++)h=this.injectPiece(i,t,o[v]),s.isNull(this.getKingInDanger(n,h))&&l.push(this.numToCode(o[v]));return l},isCharPiecesInBoard:function(e,t){return!!~t.indexOf(e)},getPiecesInBoard:function(e){var t=this;return e.split("").filter((function(e){return t.isValidPiece(e)}))},isHaveCaptured:function(e){return this.getPiecesInBoard(e).length<4*this.ROW_NUMBER},filterPieceInBoard:function(e){for(var t,n,i,r=[],c=[],o=0;o<e.length;o++)t=e.charAt(o),this.isValidPiece(t)&&(i={color:(n=this.getPieceProperties(t)).color,type:n.type,index:o,code:this.numToCode(o)},this.isWhite(i.color)?r.push(i):c.push(i));return{whitePieces:r,blackPieces:c}},extractPiecesToArray:function(e){var t,n=this;e=e.split("");var r=(i(t={},this.PIECE_COLOR_BLACK,[]),i(t,this.PIECE_COLOR_WHITE,[]),t);return e.forEach((function(e){if(e!==n.EMPTY_PIECE){var t=n.getPieceProperties(e);r[t.color].push(t.type)}})),r},isStateCount:function(e,t){return 1===this.extractPiecesToArray(t)[e].length},checkCountable:function(e,t){var n=this.extractPiecesToArray(t),i=n[e],r=n[this.oppositeColor(e)];return i.length<=2&&r.length>=2},checkCount:function(e,t,n){var i,r,c=function(e,t){return e.join("").split(t).length-1},o=this.extractPiecesToArray(t),s=o[e],a=o[this.oppositeColor(e)];if(1===s.length&&a.length>1){if(i=a,r=this.PIECE_TYPE_TREY,!~i.indexOf(r)){var h=64,u=c(a,this.PIECE_TYPE_TOUK);return u?h=u>1?8:16:c(a,this.PIECE_TYPE_KOL)>1?h=22:c(a,this.PIECE_TYPE_SES)>1?h=32:c(a,this.PIECE_TYPE_KOL)&&(h=44),[a.length+1,h]}return[0,64]}return n&&this.checkCountable(e,t)?[0,64]:null},getHashKey:function(e){var t=this,n=Object.keys(this.pieceHash).filter((function(n){return t.pieceHash[n]===e}));return 1===n.length?n[0]:this.EMPTY_PIECE},getPieceKeyByProp:function(e){var t;for(var n in this.pieceHash)if(t=this.getPieceProperties(n),e.color===t.color&&e.type===t.type)return n;return this.EMPTY_PIECE},getPieceKeyByName:function(e){return this.getPieceKeyByProp({color:e[0],type:e[1]})},oppositeColor:function(e){return this.isWhite(e)?this.PIECE_COLOR_BLACK:this.PIECE_COLOR_WHITE}};l.pieceHash={a:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_TOUK,b:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_SES,c:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_KOL,d:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_SDECH,e:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_NEANG,f:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_TREY,g:l.PIECE_COLOR_WHITE+l.PIECE_TYPE_BORK,h:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_TOUK,i:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_SES,j:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_KOL,k:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_SDECH,l:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_NEANG,m:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_TREY,n:l.PIECE_COLOR_BLACK+l.PIECE_TYPE_BORK},e.exports=l},349:(e,t,n)=>{var i=n(516);e.exports=function(){var e={};return e[i.PIECE_TYPE_TOUK]=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0]],e[i.PIECE_TYPE_SES]=[[-1,-2],[1,-2],[-2,-1],[2,-1],[-1,2],[1,2],[-2,1],[2,1]],e[i.PIECE_TYPE_NEANG]=[[-1,-1],[1,-1],[-1,1],[1,1]],e[i.PIECE_TYPE_KOL]=e[i.PIECE_TYPE_NEANG].concat([[0,1]]),e[i.PIECE_TYPE_SDECH]=e[i.PIECE_TYPE_KOL].concat([[0,-1],[1,0],[-1,0]]),e[i.PIECE_TYPE_TREY]=[[0,1],[-1,1],[1,1]],e[i.PIECE_TYPE_BORK]=e[i.PIECE_TYPE_NEANG],e}},444:e=>{var t={isValid:function(e){return!this.isNull(e)&&!this.isUndefined(e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isString:function(e){return this.isValid(e)&&"string"==typeof e},isNotEmpty:function(e){return this.isValidString(e)&&""!=e},isNumber:function(e){return this.isValid(e)&&"number"==typeof e},isStringNumber:function(e){return this.isString(e)&&""!=e&&!isNaN(Number(e))},isArray:function(e){return this.isValid(e)&&e instanceof Array},isFunction:function(e){return this.isValid(e)&&"function"==typeof e},isObject:function(e){return this.isValid(e)&&e instanceof Object},isBoolean:function(e){return this.isValid(e)&&"boolean"==typeof e},isTrue:function(e){return this.isValidBoolean(e)&&e},isFalse:function(e){return this.isValidBoolean(e)&&!e},isPoint:function(e){return this.isValid(e)&&this.isValidObject(e)&&this.isValidNumber(e.x)&&this.isValidNumber(e.y)},isSize:function(e){return this.isValid(e)&&this.isValidObject(e)&&this.isValidNumber(e.width)&&this.isValidNumber(e.height)},isOdd:function(e){return!!(e%2)},isEven:function(e){return!this.isOdd(e)},isUpperCase:function(e){return e===e.toUpperCase()}};e.exports=t},19:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n(516),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"init",value:function(e){this.piecesString=e.piecesString,this.currentTurn=e.currentTurn,this.isNeangMoved=e.isNeangMoved,this.isSdechMoved=e.isSdechMoved,this.genCanMove=e.genCanMove,this.genCanMoveForAnother=e.genCanMoveForAnother,this.whiteMoves=[],this.blackMoves=[],this.whiteKingInDanger=null,this.whiteKingWillInDanger=null,this.blackKingInDanger=null,this.blackKingWillInDanger=null,this.winColor=null,this.stuckColor=null}},{key:"generateCanMoves",value:function(){var e=this,t=r.filterPieceInBoard(this.piecesString);this.whiteMoves=t.whitePieces,this.blackMoves=t.blackPieces;var n=function(t){for(var n=0;n<t.length;n++){var i=t[n].type,c=i===r.PIECE_TYPE_SDECH,o=i===r.PIECE_TYPE_NEANG,s=e.isSdechMoved;c||(s=!!o&&e.isNeangMoved);var a=r.generatePosesCanMove(i,t[n].index,t[n].color,e.piecesString,s);t[n].canMoveIndexes=a}};n(this.whiteMoves),n(this.blackMoves)}},{key:"cleanPieceNoMove",value:function(){var e=function(e){for(var t=!0;t;){t=!1;for(var n=0;n<e.length;n++){var i=e[n];if(!i.canMoveIndexes||!i.canMoveIndexes.length){e.splice(n,1),t=!0;break}}}};e(this.whiteMoves),e(this.blackMoves)}},{key:"checkIfKingInDanger",value:function(){this.whiteKingInDanger=r.getKingInDanger(r.PIECE_COLOR_WHITE,this.piecesString),this.whiteKingWillInDanger=r.getKingWillInDanger(r.PIECE_COLOR_WHITE,this.piecesString),this.blackKingInDanger=r.getKingInDanger(r.PIECE_COLOR_BLACK,this.piecesString),this.blackKingWillInDanger=r.getKingWillInDanger(r.PIECE_COLOR_BLACK,this.piecesString)}},{key:"genWinLost",value:function(){this.whiteKingInDanger&&!this.whiteMoves.length?this.winColor=r.PIECE_COLOR_BLACK:this.blackKingInDanger&&!this.blackMoves.length&&(this.winColor=r.PIECE_COLOR_WHITE)}},{key:"getStuck",value:function(){this.winColor||(r.isWhite(this.currentTurn)&&!this.whiteMoves.length?this.stuckColor=r.PIECE_COLOR_WHITE:r.isBlack(this.currentTurn)&&!this.blackMoves.length&&(this.stuckColor=r.PIECE_COLOR_BLACK))}},{key:"calcCanMove",value:function(e){this.init(e),this.generateCanMoves(),this.cleanPieceNoMove();var t=[];this.genCanMove&&(t=r.isWhite(this.currentTurn)?this.whiteMoves:this.blackMoves);var n=[];return this.genCanMoveForAnother&&(n=r.isBlack(this.currentTurn)?this.whiteMoves:this.blackMoves),{moves:t,anotherMoves:n}}},{key:"calcState",value:function(e){return this.init(e),this.generateCanMoves(),this.cleanPieceNoMove(),this.checkIfKingInDanger(),this.genWinLost(),this.getStuck(),{blackKingInDanger:this.blackKingInDanger,whiteKingInDanger:this.whiteKingInDanger,blackKingWillInDanger:this.blackKingWillInDanger,whiteKingWillInDanger:this.whiteKingWillInDanger,winColor:this.winColor,stuckColor:this.stuckColor,blackCountable:r.checkCountable(r.PIECE_COLOR_BLACK,this.piecesString),whiteCountable:r.checkCountable(r.PIECE_COLOR_WHITE,this.piecesString)}}},{key:"calCount",value:function(e){return{countingBlack:r.checkCount(r.PIECE_COLOR_BLACK,e.piecesString,e.force),countingWhite:r.checkCount(r.PIECE_COLOR_WHITE,e.piecesString,e.force)}}}])&&i(t.prototype,n),e}();e.exports=c},960:(e,t,n)=>{var i=n(643),r=i.REN,c=i.DEFAULT_BOARD_STR,o=n(444),s={toRen:function(e){o.isUndefined(e)&&(e=c);var t=e.split(" ");return new r(t[0],t[1],t[2],t[3],t[4],t[5])}};e.exports=s},306:e=>{e.exports=JSON.parse('{"name":"khmer-chess-board","version":"1.0.1","description":"Khmer Chess Javascript library to simulate chess board","main":"index.js","scripts":{"start":"webpack serve --config webpack.config.dev.js","test":"echo \\"Error: no test specified\\" && exit 1","build":"webpack --config webpack.config.js"},"repository":{"type":"git","url":"git+https://github.com/K4us/khmer-chess-board.js.git"},"author":"Raksa Eng <eng.raksa@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/K4us/khmer-chess-board.js/issues"},"homepage":"https://github.com/K4us/khmer-chess-board.js#readme","keywords":["Khmer","KhmerChess","Chess","Board"],"dependencies":{"khmer-chess":"^1.0.5"},"devDependencies":{"@babel/core":"^7.12.16","@babel/plugin-proposal-class-properties":"^7.12.13","@babel/preset-env":"^7.12.16","babel-loader":"^8.2.2","jest":"^26.6.3","webpack":"^5.21.2","webpack-cli":"^4.5.0","webpack-dev-server":"^3.11.2"}}')},705:e=>{e.exports=JSON.parse('{"name":"khmer-chess","version":"1.0.6","description":"KhmerChess Javascript library","main":"index.js","scripts":{"test":"jest","build":"webpack --config webpack.config.js"},"repository":{"type":"git","url":"git+https://github.com/K4us/khmer-chess.js.git"},"keywords":["KhmerChess","Khmer","Chess","Node.js","Library"],"author":"Raksa Eng <eng.raksa@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/K4us/khmer-chess.js/issues"},"homepage":"https://github.com/K4us/khmer-chess.js#readme","devDependencies":{"@babel/core":"^7.12.16","@babel/plugin-proposal-class-properties":"^7.12.13","@babel/preset-env":"^7.12.16","babel-loader":"^8.2.2","jest":"^26.6.3","webpack":"^5.21.2","webpack-cli":"^4.5.0"},"dependencies":{}}')}},t={};return function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}(497)})()}));
//# sourceMappingURL=khmer-chess-board.js.map