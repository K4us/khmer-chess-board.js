!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var i in e)("object"==typeof exports?exports:t)[i]=e[i]}}(self,(function(){return(()=>{"use strict";var t={497:(t,n,e)=>{var i;function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,n,e){return n&&c(t.prototype,n),e&&c(t,e),t}function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var a=e(79).KhmerChess,h="abcdefgh",u="khmer-chess-board",l={PIECE_COLOR_WHITE:"w",PIECE_COLOR_BLACK:"b"},v="#ffffff",E="#422007",f={PIECE_TYPE_TOUK:"b",PIECE_TYPE_SES:"h",PIECE_TYPE_KOL:"g",PIECE_TYPE_SDECH:"k",PIECE_TYPE_NEANG:"q",PIECE_TYPE_TREY:"f",PIECE_TYPE_BORK:"t"},P="drop-shadow",g='<defs>\n<filter id="'.concat(P,'" height="130%">\n  <feGaussianBlur in="SourceAlpha" stdDeviation="5"/> \n  <feOffset dx="5" dy="5" result="offsetblur"/> \n  <feMerge> \n    <feMergeNode/>\n    <feMergeNode in="SourceGraphic"/> \n  </feMerge>\n</filter>\n</defs>'),d=(o(i={},"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_TOUK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_SES),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_KOL),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_SDECH),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_NEANG),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_TREY),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_WHITE).concat(f.PIECE_TYPE_BORK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(v,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_TOUK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_SES),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_KOL),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_SDECH),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_NEANG),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_TREY),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),o(i,"".concat(l.PIECE_COLOR_BLACK).concat(f.PIECE_TYPE_BORK),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 1024 1000">\n    '.concat(g,'\n    <path fill="').concat(E,'" filter="url(#').concat(P,')" \n d="M507 417c145 0 265 39 283 89c1 2 2 5 2 8v1v3v4v172v3v2v2c0 2 0 4 -1 6h-1c-15 51 -135 92 -283 92c-146 0 -266 -39 -283 -90c-1 -2 -2 -5 -2 -8v-3v-1v-1v-176v-2v-1v-3c0 -3 1 -6 2 -8c17 -50 138 -89 283 -89zM507 443c-127 0 -231 31 -240 70v1v10\n c9 39 114 70 240 70s229 -30 239 -69v-11l1 -1c-9 -39 -114 -70 -240 -70zM504 473h1h2c99 0 180 20 180 45s-81 46 -180 46s-180 -21 -180 -46s79 -45 177 -45zM267 573v117c13 8 28 15 45 22c51 19 120 31 195 31s144 -12 195 -31c17 -6 31 -14 44 -22v-116\n c-51 28 -138 46 -239 46s-189 -19 -240 -47z" />\n </svg>\n ')),i),C=function(){function t(n,e){r(this,t),o(this,"type",f.PIECE_TYPE_TREY),o(this,"color",l.PIECE_COLOR_WHITE),this.type=n,this.color=e}return s(t,[{key:"pCode",get:function(){return this.color==l.PIECE_COLOR_WHITE?this.type.toUpperCase():this.type}}]),t}(),_=function(){function t(n,e,i,c,s){r(this,t),o(this,"x",0),o(this,"y",0),o(this,"isGraveyard",!1),o(this,"container",document.createElement("td")),o(this,"piece",null),this.x=n,this.y=e,this.container=i,this.setPiece(c),this.isGraveyard=s}return s(t,[{key:"h",get:function(){return this.isGraveyard?"".concat(this.x,"x"):h[this.x]}},{key:"v",get:function(){return this.y+1}},{key:"index",get:function(){return 8*this.y+this.x}},{key:"indexCode",get:function(){return"".concat(this.h).concat(this.v)}},{key:"removePiece",value:function(){this.setPiece(null)}},{key:"setPiece",value:function(t){this.piece=t,this.drawPiece()}},{key:"drawPiece",value:function(){this.container.classList.remove("piece"),this.piece&&(this.container.classList.add("piece"),this.container.classList.add("type-".concat(this.piece.type)),this.container.classList.add("color-".concat(this.piece.color)))}}]),t}(),p=function(){function t(){r(this,t),o(this,"squares",[])}return s(t,[{key:"push",value:function(t){this.squares.push(t)}},{key:"get",value:function(t){return this.squares[t]}}]),t}(),w=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,t),o(this,"options",{width:500,container:null}),o(this,"squares",[]),o(this,"squaresIndex",{}),o(this,"graveyard",new p),o(this,"khmerChess",new a),this.khmerChess.load("bhgqkghb/8/1ff5/8/8/FFFFFFFF/8/BHGKQGHB w ---- -- -.- ffffff"),!n.container)throw new Error("Container is required!");this.options.container=n.container;var e=47;if(n.width<e)throw new Error("Board width must more than ".concat(e));n.width&&(this.options.width=n.width),this.addCss(),this.drawBoard(),this.renderKhmerChess()}return s(t,[{key:"addCss",value:function(){var t=this._squareWidth(),n=this.options.width/12,e="\n          table.".concat(u,"  {\n            table-layout: fixed;\n            border-collapse: collapse;\n            border-spacing: 0px;\n            width: ").concat(this.options.width,"px;\n            height: ").concat(this.options.width,"px;\n            text-align: center;\n            border: 0px;\n            padding: 0px;\n            margin: auto;\n            background-color: white;\n          }\n          table.").concat(u," tr {\n            width: ").concat(this.options.width,"px;\n            height: ").concat(t,"px;\n          }\n          table.").concat(u," td {\n            user-select: none;\n            background-color: #f4d1a6;\n            border: 1px solid white;\n            padding: 0px;\n            margin: 0px;\n            max-width: ").concat(t,"px;\n            max-height: ").concat(t,"px;\n          }\n          table.").concat(u," td, table.").concat(u," td::before {\n            font-size: ").concat(n,"px;\n          }\n          table.").concat(u," td.piece::before {\n            width: ").concat(t,"px;\n            height: ").concat(t,"px;\n            background-size: ").concat(t,"px ").concat(t,"px;\n            display: block;\n            content: ' ';\n          }\n        ");Object.values(l).forEach((function(t){Object.values(f).forEach((function(n){e+="\n                table.".concat(u," td.piece.type-").concat(n,".color-").concat(t,"::before {\n                    background-image: url('data:image/svg+xml;utf8,").concat(encodeURIComponent(d[t+n]),"');\n                }\n                  ")}))}));var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");i.appendChild(r),r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}},{key:"drawBoard",value:function(){for(var t=this,n=this._squareWidth(),e=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.options.container,e=document.createElement("table");return e.classList.add(u),n.appendChild(e),e},i=function(t){var n=document.createElement("tbody");return t.appendChild(n),n},r=function(t){var n=document.createElement("tr");return t.appendChild(n),n},c=function(t){var n=document.createElement("td");return t.appendChild(n),n},s=e(),o=i(s),a=0;a<8;a++)for(var h=r(o),v=0;v<8;v++){var E=c(h);E.style.cursor="pointer";var P=new C(f.PIECE_TYPE_TREY,l.PIECE_COLOR_WHITE),g=new _(v,8-a-1,E,P);this.squaresIndex[g.indexCode]=g}Object.keys(this.squaresIndex).forEach((function(n){t.squares[t.squaresIndex[n].index]=t.squaresIndex[n]}));var d=n+10;s.style.height+=d;var p=r(o);p.style.height=d;var w=c(p);w.addEventListener("mousewheel",(function(t){this.scrollLeft-=t.wheelDelta,t.preventDefault()}),!1),w.style.width=this.options.width,w.style.height=d,w.style.overflowX="scroll",w.style.overflowY="hidden",w.colSpan=8,w.style.padding=8*this.options.width/600,w.style.boxShadow="inset 0 0 ".concat(this.options.width/60,"px #000000");var I=e(w),y=29+30*n;I.style.width=y,I.style.height=n;var T=r(i(I));T.style.width=y;for(var O=0;O<30;O++){var k=c(T),b=new _(O,0,k,null,!0);this.graveyard.push(b)}this._addNote()}},{key:"_addNote",value:function(){var t=this._squareWidth(),n=15*this.options.width/600,e=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r='url("data:image/svg+xml;utf8,';r+="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='".concat(t,"px' width='").concat(t,"px'>"),i.forEach((function(t){r+="<text x='".concat(t.x,"' y='").concat(t.y,"' "),r+="fill='white' font-size='".concat(n,"'>").concat(t.t,"</text>")})),r+='</svg>")',e.style.backgroundImage=r,e.style.backgroundRepeat="no-repeat"},i=this.squaresIndex.a1;e(i.container,[{x:t/2-t/10,y:t,t:"a"},{x:0,y:t/2+t/10,t:"1"}]),i.container.style.backgroundRepeat="no-repeat";for(var r=1;r<8;r++){var c=h[r];e(this.squaresIndex["".concat(c,"1")].container,[{x:t/2-t/10,y:t,t:c}])}for(var s=1;s<8;s++)e(this.squaresIndex["a".concat(s+1)].container,[{x:0,y:t/2+t/10,t:s+1}]);for(var o=0;o<30;o++)e(this.graveyard.get(o).container,[{x:t/2-t/10,y:t,t:o+1}])}},{key:"_squareWidth",value:function(){return(this.options.width-7)/8}},{key:"renderKhmerChess",value:function(){for(var t=this,n=0;n<30;n++)this.graveyard.get(n).removePiece();this.khmerChess.graveyard().forEach((function(n,e){t.graveyard.get(e).setPiece(new C(n.type,n.color))})),this.khmerChess.board().forEach((function(n,e){n.forEach((function(n,i){var r=t.squares[8*e+i];r.removePiece(),n&&r.setPiece(new C(n.type,n.color))}))}))}}]),t}();t.exports={KhmerChessBoard:w}},79:(t,n,e)=>{function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var c=e(616).KPGN,s=e(336),o=e(514),a=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"moveHelper",new s),r(this,"renInstance",o.toRen()),r(this,"kpgnInstance",new c),this.renInstance=o.toRen(n)}var n,e;return n=t,(e=[{key:"load",value:function(t){this.renInstance=o.toRen(t)}},{key:"reset",value:function(){this.renInstance=o.toRen()}},{key:"moves",value:function(){return[]}},{key:"in_check",value:function(){return null}},{key:"in_checkmate",value:function(){return null}},{key:"in_stalemate",value:function(){return null}},{key:"in_draw",value:function(){return!1}},{key:"in_draw_count",value:function(){return null}},{key:"game_over",value:function(){return!1}},{key:"validate_ren",value:function(t){try{return o.toRen(t),{valid:!0,error_number:0,error:"No errors."}}catch(t){return{valid:!1,error_number:1,error:t.message}}}},{key:"ren",value:function(){return this.renInstance.toString()}},{key:"board",value:function(){return this.renInstance.board.toMultiArray()}},{key:"graveyard",value:function(){return this.renInstance.graveyard.pieces}},{key:"kpgn",value:function(){return this.kpgnInstance.toJson()}},{key:"load_kpgn",value:function(t,n){this.kpgnInstance=new c(t)}},{key:"ascii",value:function(){var t=this.renInstance.board.toMultiArray(),n=t.reduce((function(n,e,i){var r=e.map((function(t){return" ".concat(t?t.toString():" "," ")})).join("┃"),c=i==t.length-1?"┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛":"┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫";return n+"\n".concat(8-i," ┃").concat(r,"┃\n  ").concat(c)}),"  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓"),e=this.renInstance.graveyard.pieces.map((function(){return"━━━"})).join("┳"),i=this.renInstance.graveyard.pieces.map((function(t){return" ".concat(t?t.toString():" "," ")})).join("┃"),r=this.renInstance.graveyard.pieces.map((function(){return"━━━"})).join("┻"),c="  ┏".concat(e,"┓\n  ┃").concat(i,"┃\n  ┗").concat(r,"┛");return"".concat(n,"\n    a   b   c   d   e   f   g   h\n").concat(c)}},{key:"turn",value:function(){this.renInstance.turn}},{key:"move",value:function(t){}},{key:"undo",value:function(){return!1}},{key:"clear",value:function(){this.renInstance=o.toRen("4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB")}},{key:"put",value:function(t,n){return null}},{key:"get",value:function(t){return null}},{key:"remove",value:function(t){return null}},{key:"history",value:function(){return this.kpgnInstance.moves}},{key:"addUpdateRenderEventListener",value:function(t){}},{key:"removeUpdateRenderEventListener",value:function(t){}}])&&i(n.prototype,e),t}();t.exports={KhmerChess:a}},616:(t,n,e)=>{function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}function s(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var o=e(608).REN,a=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(this,t),s(this,"name",""),s(this,"id",""),this.id=n,this.name=e}return c(t,[{key:"toJson",value:function(){return{id:this.id,name:this.name}}}]),t}(),h=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),s(this,"win",0),s(this,"draw",0),s(this,"lost",0),this.win=n,this.draw=e,this.lost=r}return c(t,[{key:"toJson",value:function(){return{win:this.win,draw:this.draw,lost:this.lost}}}]),t}(),u=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i(this,t),s(this,"from",""),s(this,"to",""),s(this,"jump",!1),s(this,"capture",""),this.from=n,this.to=e,this.jump=r,this.capture=c}return c(t,[{key:"toJson",value:function(){return{from:this.from,to:this.to,jump:this.jump,capture:this.capture}}}]),t}(),l=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),s(this,"totalSecond",0),s(this,"currentWhite",0),s(this,"currentBlack",0),this.totalSecond=n,this.currentWhite=e,this.currentBlack=r}return c(t,[{key:"toJson",value:function(){return{totalSecond:this.totalSecond,currentWhite:this.currentWhite,currentBlack:this.currentBlack}}}]),t}(),v=function(){function t(n){i(this,t),s(this,"event",""),s(this,"date",""),s(this,"location",""),s(this,"players",{white:new a,black:new a}),s(this,"result",{last:{whiteWin:!1,blackWin:!1},white:new h}),s(this,"moves",[new u]),s(this,"ren",new o),s(this,"timer",new l)}return c(t,[{key:"toJson",value:function(){return{event:this.event,date:this.date,location:this.location,players:{white:this.players.white.toJson(),black:this.players.black.toJson()},result:{last:{whiteWin:this.result.last.whiteWin,blackWin:this.result.last.blackWin},white:this.result.white.toJson()},moves:this.moves.map((function(t){return t.toJson()})),ren:this.ren.toString(),timer:this.timer.toJson()}}}]),t}();t.exports={KPGN:v,Player:a,Result:h,Move:u,Timer:l}},608:(t,n,e)=>{function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}function s(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var o=e(259).PIECE_TYPE_BORK,a=e(259),h=e(473),u="bhgqkghb/8/ffffffff/8/8/FFFFFFFF/8/BHGKQGHB",l="-",v=function(){function t(n,e){i(this,t),s(this,"type",a.PIECE_TYPE_TREY),s(this,"color",a.PIECE_COLOR_WHITE),h.isUndefined(e)&&(h.isUndefined(n)&&(n=a.toWhitePiece(a.PIECE_TYPE_TREY)),e=h.isUpperCase(n)?a.PIECE_COLOR_WHITE:a.PIECE_COLOR_BLACK,n=n.toLowerCase()),this.type=n,this.color=e}return c(t,[{key:"toOrigin",value:function(){return this.type==o?new t(this.color,a.PIECE_TYPE_TREY):this}},{key:"toString",value:function(){var t=this.type;return a.isWhite(this.color)&&(t=a.toWhitePiece(t)),t}}]),t}(),E=function(){function t(n,e,r){i(this,t),s(this,"h","a"),s(this,"v",1),s(this,"x",0),s(this,"y",0),s(this,"p",new v),this.p=n,h.isUndefined(r)&&(r=e.v,e=e.h),this.h=e,this.v=r,this.x=a.HORIZONTAL_CODE_LETTERS.indexOf(this.h),this.y=this.v-1}return c(t,[{key:"toString",value:function(){return"".concat(this.toPString()).concat(this.h).concat(this.v)}},{key:"toPString",value:function(){return h.isNull(this.p)?a.EMPTY_PIECE:this.p.toString()}}]),t}(),f=function(){function t(n){i(this,t),s(this,"poses",Array.from({length:a.getSubBoardNumber()},(function(t,n){var e=a.numToCodeP(n);return new E(null,e)}))),h.isUndefined(n)&&(n=u);var e=this.extract(n).replace(/\//g,"");if(e.length<a.getSubBoardNumber()||!a.isValidPiecesString(e))throw new Error("Invalid board string ".concat(n));this.poses=e.split("").map((function(t,n){var e=a.numToCodeP(n);return new E(t==a.EMPTY_PIECE?null:new v(t),e)}))}return c(t,[{key:"toMultiArray",value:function(){var t=[[],[],[],[],[],[],[],[]];return this.poses.forEach((function(n){t[n.y][n.x]=n.p})),t}},{key:"compress",value:function(t){var n=new RegExp("(\\".concat(a.EMPTY_PIECE,"+)"),"g");return t.replace(n,(function(t){return t.length}))}},{key:"extract",value:function(t){return t.replace(/(\d+)/g,(function(t){return Array.from({length:t},(function(){return a.EMPTY_PIECE})).join("")}))}},{key:"toStringFull",value:function(){return this.poses.map((function(t,n){var e=t.toPString();return n&&n%8==0&&n!=a.getSubBoardNumber()?"".concat(a.BOARD_SEPARATOR).concat(e):e})).join("")}},{key:"toString",value:function(){var t=this.toStringFull();return this.compress(t)}}]),t}(),P=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,t),s(this,"whiteKing",!1),s(this,"whiteQueen",!1),s(this,"blackKing",!1),s(this,"blackQueen",!1);var e=a;this.whiteKing=!!~n.indexOf(e.toWhitePiece(e.PIECE_TYPE_SDECH)),this.whiteQueen=!!~n.indexOf(e.toWhitePiece(e.PIECE_TYPE_NEANG)),this.blackKing=!!~n.indexOf(e.PIECE_TYPE_SDECH),this.blackQueen=!!~n.indexOf(e.PIECE_TYPE_NEANG)}return c(t,[{key:"toString",value:function(){var t="".concat(this.whiteKing?a.toWhitePiece(a.PIECE_TYPE_SDECH):l);return t+="".concat(this.whiteQueen?a.toWhitePiece(a.PIECE_TYPE_NEANG):l),(t+="".concat(this.blackKing?a.PIECE_TYPE_SDECH:l))+"".concat(this.blackQueen?a.PIECE_TYPE_NEANG:l)}}]),t}(),g=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,t),s(this,"whiteKing",!1),s(this,"blackKing",!1);var e=a;this.whiteKing=!!~n.indexOf(e.toWhitePiece(e.PIECE_TYPE_SDECH)),this.blackKing=!!~n.indexOf(e.PIECE_TYPE_SDECH)}return c(t,[{key:"toString",value:function(){return"".concat(this.whiteKing?a.toWhitePiece(a.PIECE_TYPE_SDECH):l)+"".concat(this.blackKing?a.PIECE_TYPE_SDECH:l)}}]),t}(),d=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,t),s(this,"white",null),s(this,"black",null);var e=n.split(".");if(this.white=h.isStringNumber(e[0])?Number(e[0]):null,this.black=h.isStringNumber(e[1])?Number(e[1]):null,!h.isNull(this.white)&&!h.isNull(this.white))throw new Error("Invalid countdown string ".concat(n))}return c(t,[{key:"toString",value:function(){return"".concat(h.isNull(this.white)?l:this.white)+".".concat(h.isNull(this.black)?l:this.black)}}]),t}(),C=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i(this,t),s(this,"pieces",[]),n.length>30||!a.isValidPiecesString(n,!0))throw new Error("Invalid graveyard string ".concat(n));this.pieces=n.split("").map((function(t,e){var i=new v(t);if(i.type==a.PIECE_TYPE_SDECH)throw new Error("King cannot die graveyard:".concat(n));return i}))}return c(t,[{key:"toString",value:function(){return this.pieces.map((function(t){return t.toString()})).join("")}}]),t}(),_=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.PIECE_COLOR_WHITE,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0;i(this,t),s(this,"board",new f),s(this,"turn",a.PIECE_COLOR_WHITE),s(this,"kqMoved",new P),s(this,"kAttacked",new g),s(this,"countdown",new d),s(this,"graveyard",new C),this.board=new f(n),this.turn=e,this.kqMoved=new P(r),this.kqMoved=new g(c),this.countdown=new d(o),this.graveyard=new C(h);var u=this.isInvalidPieceCount();if(u)throw new Error("Invalid piece string board:".concat(n,", graveyard:").concat(h,", count:").concat(u))}return c(t,[{key:"isInvalidPieceCount",value:function(){var t=this.board.poses.map((function(t){return t.p})).filter((function(t){return!h.isNull(t)})).concat(this.graveyard.pieces).map((function(t){return t.toOrigin()})).reduce((function(t,n){return t[n.toString()]=t[n.toString()]||0,t[n.toString()]++,t}),{}),n=Object.keys(t).map((function(n){return"".concat(n).concat(t[n])})).sort().join("");return"B2F8G2H2K1Q1b2f8g2h2k1q1"!=n&&n}},{key:"toString",value:function(){var t=this.board.toString();return t+=" ".concat(this.turn.toString()),t+=" ".concat(this.kqMoved.toString()),t+=" ".concat(this.kAttacked.toString()),(t+=" ".concat(this.countdown.toString()))+" ".concat(this.graveyard.toString())}}]),t}();t.exports={Piece:v,Pos:E,Board:f,KqMoved:P,CountDown:d,Graveyard:C,REN:_,DEFAULT_BOARD_STR:u}},259:(t,n,e)=>{function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function r(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=e(473),s=e(281),o=function(){function t(n,e,i,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n,this.y=e,this.width=i,this.height=r}var n,e;return n=t,(e=[{key:"isContainsPoint",value:function(t){var n=t.x,e=t.y;return this.x<=n&&this.x+this.width>=n&&this.y<=e&&this.y+this.height>=e}}])&&r(n.prototype,e),t}(),a=null,h={HORIZONTAL_CODE_LETTERS:"abcdefgh",PIECE_COLOR_WHITE:"w",PIECE_COLOR_BLACK:"b",PIECE_TYPE_TOUK:"b",PIECE_TYPE_SES:"h",PIECE_TYPE_KOL:"g",PIECE_TYPE_SDECH:"k",PIECE_TYPE_NEANG:"q",PIECE_TYPE_TREY:"f",PIECE_TYPE_BORK:"t",EMPTY_PIECE:".",BOARD_SEPARATOR:"/",ROW_NUMBER:8,ROW_FIRST_INDEX:0,ROW_LAST_INDEX:7,mask:null,isValidPiecesString:function(t,n){var e=this;c.isNull(a)&&(a=[this.PIECE_TYPE_TOUK,this.PIECE_TYPE_SES,this.PIECE_TYPE_KOL,this.PIECE_TYPE_SDECH,this.PIECE_TYPE_NEANG,this.PIECE_TYPE_TREY,this.PIECE_TYPE_BORK,this.toWhitePiece(this.PIECE_TYPE_TOUK),this.toWhitePiece(this.PIECE_TYPE_SES),this.toWhitePiece(this.PIECE_TYPE_KOL),this.toWhitePiece(this.PIECE_TYPE_SDECH),this.toWhitePiece(this.PIECE_TYPE_NEANG),this.toWhitePiece(this.PIECE_TYPE_TREY),this.toWhitePiece(this.PIECE_TYPE_BORK),this.EMPTY_PIECE,this.BOARD_SEPARATOR]);var i=n?a.filter((function(t){return!~[e.EMPTY_PIECE,e.BOARD_SEPARATOR].indexOf(t)})):a;return!t.split("").some((function(t){return!~i.indexOf(t)}))},toWhitePiece:function(t){return t.toUpperCase()},isValidPosXY:function(t,n){return!c.isUndefined(t)&&(c.isUndefined(n)||(t=this.p(t,n)),!c.isUndefined(t.x)&&!c.isUndefined(t.y)&&this.rect(0,0,this.ROW_LAST_INDEX,this.ROW_LAST_INDEX).isContainsPoint(t))},isValidPiece:function(t){return t!=h.EMPTY_PIECE},isWhite:function(t){return t===h.PIECE_COLOR_WHITE},isBlack:function(t){return t===h.PIECE_COLOR_BLACK},codeP:function(t,n){return{h:t,v:n}},p:function(t,n){return{x:t,y:n}},res:function(t,n){return{width:t,height:n}},rect:function(t,n,e,i){return new o(t,n,e,i)},getSubBoardNumber:function(){return h.ROW_NUMBER*h.ROW_NUMBER},nerdPosToXY:function(t){if(c.isNumber(t.x)&&c.isNumber(t.y))return t;if(c.isNumber(t)){var n=t%this.ROW_NUMBER,e=Math.floor(t/this.ROW_NUMBER);return this.p(n,e)}return null},nerdXyToPos:function(t,n){return c.isUndefined(n)?t.x+t.y*this.ROW_NUMBER:t+n*this.ROW_NUMBER},isPosInBoard:function(t){return c.isNumber(t)&&t>=0&&t<=this.getSubBoardNumber()-1},getCharPieceFromString:function(t,n){return this.isPosInBoard(n)&&t.length===this.getSubBoardNumber()?t.charAt(n):this.EMPTY_PIECE},getPieceProperties:function(t){var n=this.pieceHash[t];return{color:n?n[0]:this.PIECE_COLOR_EMPTY,type:n?n[1]:this.EMPTY_PIECE}},getCharPieceInPos:function(t,n){return this.getCharPieceFromString(n,t)},getPieceInPos:function(t,n,e){c.isNumber(n)?t=this.nerdXyToPos(t,n):c.isString(n)&&(e=n);var i=this.getCharPieceInPos(t,e),r=this.PIECE_COLOR_WHITE,s=this.PIECE_TYPE_TREY;if(this.isValidPiece(i)){var o=this.getPieceProperties(i);r=o.color,s=o.type}return{isValidPiece:this.isValidPiece(i),color:r,type:s}},convertMask:function(t,n,e){var i=this.isWhite(e)?1:-1;return n=this.nerdPosToXY(n),t.x=t.x*i+n.x,t.y=t.y*i+n.y,this.isValidPosXY(t)?this.nerdXyToPos(t):null},getPieceCanMovePoses:function(t,n,e){var i=this,r=[];return this.mask=this.mask||s(this),this.mask[t].forEach((function(t){var s=i.convertMask(i.p(t[0],t[1]),n,e);c.isNull(s)||r.push(s)})),r},getPieceCanMovePosesValid:function(t,n,e,i){for(var r,s,o=this.getPieceCanMovePoses(t,n,e),a=[],h=o.length,u=this.nerdPosToXY(n),l=0;l<h;l++){if(r=this.nerdPosToXY(o[l]),(s=this.getPieceInPos(r.x,r.y,i)).isValidPiece?(e===s.color||t===this.PIECE_TYPE_TREY&&r.x===u.x)&&(r=null):t===this.PIECE_TYPE_TREY&&r.x!=u.x&&(r=null),!c.isNull(r)&&t===this.PIECE_TYPE_TOUK){var v=u.x,E=u.y,f=void 0,P=void 0;if(r.x===u.x){for(f=Math.abs(r.y-u.y),P=u.y<r.y?1:-1;--f>0;)if(this.getPieceInPos(v,E+P*f,i).isValidPiece){r=null;break}}else if(r.y===u.y)for(f=Math.abs(r.x-u.x),P=u.x<r.x?1:-1;--f>0;)if(this.getPieceInPos(v+P*f,E,i).isValidPiece){r=null;break}}c.isNull(r)||a.push(o[l])}return a},replacePiecesString:function(t,n,e){return t.substring(0,e)+n+t.substring(e+1)},injectPiece:function(t,n,e){var i=t.charAt(n);return this.isCharPiecesInBoard(i,t)?(t=this.replacePiecesString(t,this.EMPTY_PIECE,n),t=this.replacePiecesString(t,i,e)):null},getPieceCode:function(t,n){var e=t+n;for(var i in this.pieceHash)if(e===this.pieceHash[i])return i;return this.EMPTY_PIECE},getKingWillInDanger:function(t,n){for(var e,i,r,c=n.indexOf(this.getPieceCode(t,this.PIECE_TYPE_SDECH)),s=n.length,o=0;o<s;o++)if((i=this.getPieceInPos(o,n)).isValidPiece&&i.color!=t&&i.type===this.PIECE_TYPE_TOUK)for(e=this.getPieceCanMovePoses(i.type,o,i.color,n),r=0;r<e.length;r++)if(e[r]===c)return[this.numToCode(o),this.numToCode(c)];return null},getKingInDanger:function(t,n){for(var e,i,r,c=n.indexOf(this.getPieceCode(t,this.PIECE_TYPE_SDECH)),s=n.length,o=0;o<s;o++)if((i=this.getPieceInPos(o,n)).isValidPiece&&i.color!=t)for(e=this.getPieceCanMovePosesValid(i.type,o,i.color,n),r=0;r<e.length;r++)if(e[r]===c)return[this.numToCode(o),this.numToCode(c)];return null},numToCodeP:function(t){return this.codeP(this.HORIZONTAL_CODE_LETTERS[t%8],1+(t/8|0))},numToCode:function(t){var n=this.numToCodeP(t);return"".concat(n.h).concat(n.v)},generatePosesCanMove:function(t,n,e,i,r){var s,o=this.getPieceCanMovePosesValid(t,n,e,i),a=this.isHaveCaptured(i);t===this.PIECE_TYPE_SDECH?a||r||((s=this.convertMask(this.p(2,1),n,e))&&!this.getPieceInPos(s,i).isValidPiece&&o.push(s),(s=this.convertMask(this.p(-2,1),n,e))&&!this.getPieceInPos(s,i).isValidPiece&&o.push(s)):t===this.PIECE_TYPE_NEANG&&(a||r||(s=this.convertMask(this.p(-0,2),n,e))&&!this.getPieceInPos(s,i).isValidPiece&&o.push(s));for(var h,u=o.length,l=[],v=0;v<u;v++)h=this.injectPiece(i,n,o[v]),c.isNull(this.getKingInDanger(e,h))&&l.push(this.numToCode(o[v]));return l},isCharPiecesInBoard:function(t,n){return!!~n.indexOf(t)},getPiecesInBoard:function(t){var n=this;return t.split("").filter((function(t){return n.isValidPiece(t)}))},isHaveCaptured:function(t){return this.getPiecesInBoard(t).length<4*this.ROW_NUMBER},filterPieceInBoard:function(t){for(var n,e,i,r=[],c=[],s=0;s<t.length;s++)n=t.charAt(s),this.isValidPiece(n)&&(i={color:(e=this.getPieceProperties(n)).color,type:e.type,index:s,code:this.numToCode(s)},this.isWhite(i.color)?r.push(i):c.push(i));return{whitePieces:r,blackPieces:c}},extractPiecesToArray:function(t){var n,e=this;t=t.split("");var r=(i(n={},this.PIECE_COLOR_BLACK,[]),i(n,this.PIECE_COLOR_WHITE,[]),n);return t.forEach((function(t){if(t!==e.EMPTY_PIECE){var n=e.getPieceProperties(t);r[n.color].push(n.type)}})),r},isStateCount:function(t,n){return 1===this.extractPiecesToArray(n)[t].length},checkCountable:function(t,n){var e=this.extractPiecesToArray(n),i=e[t],r=e[this.oppositeColor(t)];return i.length<=2&&r.length>=2},checkCount:function(t,n,e){var i,r,c=function(t,n){return t.join("").split(n).length-1},s=this.extractPiecesToArray(n),o=s[t],a=s[this.oppositeColor(t)];if(1===o.length&&a.length>1){if(i=a,r=this.PIECE_TYPE_TREY,!~i.indexOf(r)){var h=64,u=c(a,this.PIECE_TYPE_TOUK);return u?h=u>1?8:16:c(a,this.PIECE_TYPE_KOL)>1?h=22:c(a,this.PIECE_TYPE_SES)>1?h=32:c(a,this.PIECE_TYPE_KOL)&&(h=44),[a.length+1,h]}return[0,64]}return e&&this.checkCountable(t,n)?[0,64]:null},getHashKey:function(t){var n=this,e=Object.keys(this.pieceHash).filter((function(e){return n.pieceHash[e]===t}));return 1===e.length?e[0]:this.EMPTY_PIECE},getPieceKeyByProp:function(t){var n;for(var e in this.pieceHash)if(n=this.getPieceProperties(e),t.color===n.color&&t.type===n.type)return e;return this.EMPTY_PIECE},getPieceKeyByName:function(t){return this.getPieceKeyByProp({color:t[0],type:t[1]})},oppositeColor:function(t){return this.isWhite(t)?this.PIECE_COLOR_BLACK:this.PIECE_COLOR_WHITE}};h.pieceHash={a:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_TOUK,b:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_SES,c:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_KOL,d:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_SDECH,e:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_NEANG,f:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_TREY,g:h.PIECE_COLOR_WHITE+h.PIECE_TYPE_BORK,h:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_TOUK,i:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_SES,j:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_KOL,k:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_SDECH,l:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_NEANG,m:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_TREY,n:h.PIECE_COLOR_BLACK+h.PIECE_TYPE_BORK},t.exports=h},281:(t,n,e)=>{var i=e(259);t.exports=function(){var t={};return t[i.PIECE_TYPE_TOUK]=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0]],t[i.PIECE_TYPE_SES]=[[-1,-2],[1,-2],[-2,-1],[2,-1],[-1,2],[1,2],[-2,1],[2,1]],t[i.PIECE_TYPE_NEANG]=[[-1,-1],[1,-1],[-1,1],[1,1]],t[i.PIECE_TYPE_KOL]=t[i.PIECE_TYPE_NEANG].concat([[0,1]]),t[i.PIECE_TYPE_SDECH]=t[i.PIECE_TYPE_KOL].concat([[0,-1],[1,0],[-1,0]]),t[i.PIECE_TYPE_TREY]=[[0,1],[-1,1],[1,1]],t[i.PIECE_TYPE_BORK]=t[i.PIECE_TYPE_NEANG],t}},473:t=>{var n={isValid:function(t){return!this.isNull(t)&&!this.isUndefined(t)},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isString:function(t){return this.isValid(t)&&"string"==typeof t},isNotEmpty:function(t){return this.isValidString(t)&&""!=t},isNumber:function(t){return this.isValid(t)&&"number"==typeof t},isStringNumber:function(t){return this.isString(t)&&""!=t&&!isNaN(Number(t))},isArray:function(t){return this.isValid(t)&&t instanceof Array},isFunction:function(t){return this.isValid(t)&&"function"==typeof t},isObject:function(t){return this.isValid(t)&&t instanceof Object},isBoolean:function(t){return this.isValid(t)&&"boolean"==typeof t},isTrue:function(t){return this.isValidBoolean(t)&&t},isFalse:function(t){return this.isValidBoolean(t)&&!t},isPoint:function(t){return this.isValid(t)&&this.isValidObject(t)&&this.isValidNumber(t.x)&&this.isValidNumber(t.y)},isSize:function(t){return this.isValid(t)&&this.isValidObject(t)&&this.isValidNumber(t.width)&&this.isValidNumber(t.height)},isOdd:function(t){return!!(t%2)},isEven:function(t){return!this.isOdd(t)},isUpperCase:function(t){return t===t.toUpperCase()}};t.exports=n},336:(t,n,e)=>{function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=e(259),c=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,(e=[{key:"init",value:function(t){this.piecesString=t.piecesString,this.currentTurn=t.currentTurn,this.isNeangMoved=t.isNeangMoved,this.isSdechMoved=t.isSdechMoved,this.genCanMove=t.genCanMove,this.genCanMoveForAnother=t.genCanMoveForAnother,this.whiteMoves=[],this.blackMoves=[],this.whiteKingInDanger=null,this.whiteKingWillInDanger=null,this.blackKingInDanger=null,this.blackKingWillInDanger=null,this.winColor=null,this.stuckColor=null}},{key:"generateCanMoves",value:function(){var t=this,n=r.filterPieceInBoard(this.piecesString);this.whiteMoves=n.whitePieces,this.blackMoves=n.blackPieces;var e=function(n){for(var e=0;e<n.length;e++){var i=n[e].type,c=i===r.PIECE_TYPE_SDECH,s=i===r.PIECE_TYPE_NEANG,o=t.isSdechMoved;c||(o=!!s&&t.isNeangMoved);var a=r.generatePosesCanMove(i,n[e].index,n[e].color,t.piecesString,o);n[e].canMoveIndexes=a}};e(this.whiteMoves),e(this.blackMoves)}},{key:"cleanPieceNoMove",value:function(){var t=function(t){for(var n=!0;n;){n=!1;for(var e=0;e<t.length;e++){var i=t[e];if(!i.canMoveIndexes||!i.canMoveIndexes.length){t.splice(e,1),n=!0;break}}}};t(this.whiteMoves),t(this.blackMoves)}},{key:"checkIfKingInDanger",value:function(){this.whiteKingInDanger=r.getKingInDanger(r.PIECE_COLOR_WHITE,this.piecesString),this.whiteKingWillInDanger=r.getKingWillInDanger(r.PIECE_COLOR_WHITE,this.piecesString),this.blackKingInDanger=r.getKingInDanger(r.PIECE_COLOR_BLACK,this.piecesString),this.blackKingWillInDanger=r.getKingWillInDanger(r.PIECE_COLOR_BLACK,this.piecesString)}},{key:"genWinLost",value:function(){this.whiteKingInDanger&&!this.whiteMoves.length?this.winColor=r.PIECE_COLOR_BLACK:this.blackKingInDanger&&!this.blackMoves.length&&(this.winColor=r.PIECE_COLOR_WHITE)}},{key:"getStuck",value:function(){this.winColor||(r.isWhite(this.currentTurn)&&!this.whiteMoves.length?this.stuckColor=r.PIECE_COLOR_WHITE:r.isBlack(this.currentTurn)&&!this.blackMoves.length&&(this.stuckColor=r.PIECE_COLOR_BLACK))}},{key:"calcCanMove",value:function(t){this.init(t),this.generateCanMoves(),this.cleanPieceNoMove();var n=[];this.genCanMove&&(n=r.isWhite(this.currentTurn)?this.whiteMoves:this.blackMoves);var e=[];return this.genCanMoveForAnother&&(e=r.isBlack(this.currentTurn)?this.whiteMoves:this.blackMoves),{moves:n,anotherMoves:e}}},{key:"calcState",value:function(t){return this.init(t),this.generateCanMoves(),this.cleanPieceNoMove(),this.checkIfKingInDanger(),this.genWinLost(),this.getStuck(),{blackKingInDanger:this.blackKingInDanger,whiteKingInDanger:this.whiteKingInDanger,blackKingWillInDanger:this.blackKingWillInDanger,whiteKingWillInDanger:this.whiteKingWillInDanger,winColor:this.winColor,stuckColor:this.stuckColor,blackCountable:r.checkCountable(r.PIECE_COLOR_BLACK,this.piecesString),whiteCountable:r.checkCountable(r.PIECE_COLOR_WHITE,this.piecesString)}}},{key:"calCount",value:function(t){return{countingBlack:r.checkCount(r.PIECE_COLOR_BLACK,t.piecesString,t.force),countingWhite:r.checkCount(r.PIECE_COLOR_WHITE,t.piecesString,t.force)}}}])&&i(n.prototype,e),t}();t.exports=c},514:(t,n,e)=>{var i=e(608),r=i.REN,c=i.DEFAULT_BOARD_STR,s=e(473),o={toRen:function(t){s.isUndefined(t)&&(t=c);var n=t.split(" ");return new r(n[0],n[1],n[2],n[3],n[4],n[5])}};t.exports=o}},n={};return function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{}};return t[i](r,r.exports,e),r.exports}(497)})()}));
//# sourceMappingURL=khmer-chess-board.js.map